{"version":3,"file":"tss-sdk.umd.js.map","sources":["node_modules/tslib/tslib.es6.js","ng://@tss/sdk/lib/core/resource.config.ts","ng://@tss/sdk/lib/core/logging/log-level.ts","ng://@tss/sdk/lib/core/units/measurement-unit.ts","ng://@tss/sdk/lib/core/core.config.ts","ng://@tss/sdk/lib/core/type-check/is-type.function.ts","ng://@tss/sdk/lib/core/type-check/is-string.function.ts","ng://@tss/sdk/lib/core/auto-config.decorator.ts","ng://@tss/sdk/lib/app/app.config.ts","ng://@tss/sdk/lib/core/url/join.function.ts","ng://@tss/sdk/lib/core/tokens/tokens.constants.ts","ng://@tss/sdk/lib/core/tokens/replace-tokens.function.ts","ng://@tss/sdk/lib/core/tokens/replace-token.function.ts","ng://@tss/sdk/lib/core/formatting/format.function.ts","ng://@tss/sdk/lib/core/url/clean.function.ts","ng://@tss/sdk/lib/core/resource/resource.constants.ts","ng://@tss/sdk/lib/core/resource/base-empty-resource.service.ts","ng://@tss/sdk/lib/app/api.service.ts","ng://@tss/sdk/lib/core/logging/logger.service.ts","ng://@tss/sdk/lib/core/storage/get-byte-size.function.ts","ng://@tss/sdk/lib/core/storage/storage.constants.ts","ng://@tss/sdk/lib/core/type-check/is-defined.function.ts","ng://@tss/sdk/lib/core/type-check/is-value.function.ts","ng://@tss/sdk/lib/core/storage/format-byte-size.function.ts","ng://@tss/sdk/lib/core/storage/base-storage.service.ts","ng://@tss/sdk/lib/core/storage/persistent-storage.service.ts","ng://@tss/sdk/lib/core/environment/has-window.function.ts","ng://@tss/sdk/lib/core/url/get-full-url.function.ts","ng://@tss/sdk/lib/core/url/get-query-params.function.ts","ng://@tss/sdk/lib/core/array/get-last-item.function.ts","ng://@tss/sdk/lib/core/url/get-post-hash-route-paths.function.ts","ng://@tss/sdk/lib/core/url/get-first-hash-route-path.function.ts","ng://@tss/sdk/lib/core/type-check/is-date.function.ts","ng://@tss/sdk/lib/core/type-check/is-not-value.function.ts","ng://@tss/sdk/lib/core/type-check/can-not-be-number.function.ts","ng://@tss/sdk/lib/core/type-check/can-be-number.function.ts","ng://@tss/sdk/lib/core/type-conversion/to-primitive-type.function.ts","ng://@tss/sdk/lib/core/formatting/lower-case-first.function.ts","ng://@tss/sdk/lib/core/object/set-value.function.ts","ng://@tss/sdk/lib/security/security-config.ts","ng://@tss/sdk/lib/core/type-check/is-array.function.ts","ng://@tss/sdk/lib/core/type-check/is-number.function.ts","ng://@tss/sdk/lib/security/role-manager.service.ts","ng://@tss/sdk/lib/security/auth.service.ts","ng://@tss/sdk/lib/core/resource/base-resource.service.ts","ng://@tss/sdk/lib/app/app-profile.service.ts","ng://@tss/sdk/lib/app/app-initializer.service.ts","ng://@tss/sdk/lib/app/app-profile.ts","ng://@tss/sdk/lib/core/keys.pipe.ts","ng://@tss/sdk/lib/core/storage/file-size.pipe.ts","ng://@tss/sdk/lib/core/date-time/date-time.constants.ts","ng://@tss/sdk/lib/core/date-time/conversion/to-milliseconds.function.ts","ng://@tss/sdk/lib/core/date-time/conversion/milliseconds-to-seconds.function.ts","ng://@tss/sdk/lib/core/date-time/conversion/milliseconds-to-minutes.function.ts","ng://@tss/sdk/lib/core/date-time/conversion/milliseconds-to-hours.function.ts","ng://@tss/sdk/lib/core/date-time/conversion/milliseconds-to-days.function.ts","ng://@tss/sdk/lib/core/date-time/readable/to-readable-time.function.ts","ng://@tss/sdk/lib/core/date-time/readable/readable-time.pipe.ts","ng://@tss/sdk/lib/core/safe-url.pipe.ts","ng://@tss/sdk/lib/core/core.module.ts","ng://@tss/sdk/lib/geometry/geometry.module.ts","ng://@tss/sdk/lib/data-source/data-source.module.ts","ng://@tss/sdk/lib/esri/esri.module.ts","ng://@tss/sdk/lib/maps/drawing/layer-renderer-type-definition.ts","ng://@tss/sdk/lib/maps/drawing/layer-renderer-type.pipe.ts","ng://@tss/sdk/lib/maps/map.module.ts","ng://@tss/sdk/lib/lrs/lrs.module.ts","ng://@tss/sdk/lib/security/token.interceptor.ts","ng://@tss/sdk/lib/security/has-roles.directive.ts","ng://@tss/sdk/lib/security/security.module.ts","ng://@tss/sdk/lib/polyfill/prevent-default-link.directive.ts","ng://@tss/sdk/lib/polyfill/polyfill.module.ts","ng://@tss/sdk/lib/queuing/queue.module.ts","ng://@tss/sdk/lib/core/type-check/is-function.function.ts","ng://@tss/sdk/lib/http/is-route-match.function.ts","ng://@tss/sdk/lib/http/http.config.ts","ng://@tss/sdk/lib/http/http-param.interceptor.ts","ng://@tss/sdk/lib/http/http.module.ts","ng://@tss/sdk/lib/app/app.module.ts","ng://@tss/sdk/lib/app/app-spatial.module.ts","ng://@tss/sdk/lib/app/settings/app-setting.ts","ng://@tss/sdk/lib/app/settings/app-setting.service.ts","ng://@tss/sdk/lib/cache/cache-persistance.ts","ng://@tss/sdk/lib/cache/cache-strategy.ts","ng://@tss/sdk/lib/cache/cache.config.ts","ng://@tss/sdk/lib/cache/cache.constants.ts","ng://@tss/sdk/lib/cache/cache.storage.ts","ng://@tss/sdk/lib/cache/cache.service.ts","ng://@tss/sdk/lib/core/tokens/has-tokens.function.ts","ng://@tss/sdk/lib/core/tokens/standardize-tokens.function.ts","ng://@tss/sdk/lib/core/tokens/strip-token-braces.function.ts","ng://@tss/sdk/lib/core/tokens/extract-token-values-from-template.function.ts","ng://@tss/sdk/lib/cache/cache.interceptor.ts","ng://@tss/sdk/lib/cache/cache.module.ts","ng://@tss/sdk/lib/core/array/add-if-not-exist.function.ts","ng://@tss/sdk/lib/core/array/add-range-to-beginning.function.ts","ng://@tss/sdk/lib/core/array/add-range.function.ts","ng://@tss/sdk/lib/core/array/remove-duplicates.function.ts","ng://@tss/sdk/lib/core/array/remove-item.function.ts","ng://@tss/sdk/lib/core/array/remove-where.function.ts","ng://@tss/sdk/lib/core/clone/clone.function.ts","ng://@tss/sdk/lib/core/color/hex-to-rgb.function.ts","ng://@tss/sdk/lib/core/color/is-hex-color.function.ts","ng://@tss/sdk/lib/core/color/rgb-to-hex.function.ts","ng://@tss/sdk/lib/core/color/transparency-to-opacity.function.ts","ng://@tss/sdk/lib/core/cookie/get-cookie.function.ts","ng://@tss/sdk/lib/core/date-time/add/add-milliseconds.function.ts","ng://@tss/sdk/lib/core/date-time/add/add-minutes.function.ts","ng://@tss/sdk/lib/core/date-time/add/add-days.function.ts","ng://@tss/sdk/lib/core/date-time/add/add-hours.function.ts","ng://@tss/sdk/lib/core/date-time/add/add-seconds.function.ts","ng://@tss/sdk/lib/core/date-time/conversion/to-utc-date.function.ts","ng://@tss/sdk/lib/core/date-time/format/format-date.function.ts","ng://@tss/sdk/lib/core/date-time/conversion/to-standardized-query-date-format.function.ts","ng://@tss/sdk/lib/core/date-time/conversion/to-utc-epoch-date.function.ts","ng://@tss/sdk/lib/core/date-time/format/format-date-for-query.function.ts","ng://@tss/sdk/lib/core/date-time/format/sql-date-format.ts","ng://@tss/sdk/lib/core/date-time/get-current-date-as-utc.function.ts","ng://@tss/sdk/lib/core/date-time/get-current-date-epoch-as-utc.ts","ng://@tss/sdk/lib/core/date-time/get-elapsed-milliseconds.function.ts","ng://@tss/sdk/lib/core/date-time/get-elapsed-seconds.function.ts","ng://@tss/sdk/lib/core/date-time/readable/seconds-to-readable-time.function.ts","ng://@tss/sdk/lib/core/date-time/set-date-to-beginning-of-date.function.ts","ng://@tss/sdk/lib/core/date-time/set-date-to-end-of-date.function.ts","ng://@tss/sdk/lib/core/date-time/subtract/subract-days.function.ts","ng://@tss/sdk/lib/core/date-time/subtract/subract-minutes.function.ts","ng://@tss/sdk/lib/core/date-time/subtract/subract-seconds.function.ts","ng://@tss/sdk/lib/core/date-time/subtract/subtract-hours.function.ts","ng://@tss/sdk/lib/core/date-time/subtract/subtract-milliseconds.function.ts","ng://@tss/sdk/lib/core/environment/has-local-storage.function.ts","ng://@tss/sdk/lib/core/environment/online-state.service.ts","ng://@tss/sdk/lib/core/equality/equality.constants.ts","ng://@tss/sdk/lib/core/equality/almost-equal.function.ts","ng://@tss/sdk/lib/core/equality/points-almost-equal.function.ts","ng://@tss/sdk/lib/core/error/error.constants.ts","ng://@tss/sdk/lib/core/error/error-msg.function.ts","ng://@tss/sdk/lib/core/formatting/format-number.function.ts","ng://@tss/sdk/lib/core/formatting/formatting.constants.ts","ng://@tss/sdk/lib/core/formatting/upper-case-each-word.function.ts","ng://@tss/sdk/lib/core/formatting/upper-case-first-letter.function.ts","ng://@tss/sdk/lib/core/formatting/humanize.function.ts","ng://@tss/sdk/lib/core/formatting/trim-end.function.ts","ng://@tss/sdk/lib/core/formatting/trip-start.function.ts","ng://@tss/sdk/lib/core/formatting/trim.function.ts","ng://@tss/sdk/lib/core/grouping/group-by.function.ts","ng://@tss/sdk/lib/core/media/media.constants.ts","ng://@tss/sdk/lib/core/media/base64-mime-type.function.ts","ng://@tss/sdk/lib/core/media/strip-base64-metadata.function.ts","ng://@tss/sdk/lib/core/media/base64-to-byte-array.function.ts","ng://@tss/sdk/lib/core/media/base64-to-blob.function.ts","ng://@tss/sdk/lib/core/type-check/is-object.function.ts","ng://@tss/sdk/lib/core/merge/merge-deep.function.ts","ng://@tss/sdk/lib/core/merge/merge-deep-array.function.ts","ng://@tss/sdk/lib/core/notify/base-notification-tracker.ts","ng://@tss/sdk/lib/core/notify/notification-promise-tracker.ts","ng://@tss/sdk/lib/core/notify/notification-subscription-tracker.ts","ng://@tss/sdk/lib/core/notify/notify-type.ts","ng://@tss/sdk/lib/core/notify/notify.service.ts","ng://@tss/sdk/lib/core/object/assign-valid-values.function.ts","ng://@tss/sdk/lib/core/object/get-value.function.ts","ng://@tss/sdk/lib/core/random/get-random-integer.function.ts","ng://@tss/sdk/lib/core/random/get-random-number.function.ts","ng://@tss/sdk/lib/core/rounding/round.function.ts","ng://@tss/sdk/lib/core/sort/sort-by-order.function.ts","ng://@tss/sdk/lib/core/sort/sort-and-reorder.function.ts","ng://@tss/sdk/lib/core/sort/sort-direction.ts","ng://@tss/sdk/lib/core/sort/sort.function.ts","ng://@tss/sdk/lib/core/stats/average.function.ts","ng://@tss/sdk/lib/core/stats/calculate-cross-product.function.ts","ng://@tss/sdk/lib/core/stats/calculate-percent-complete.function.ts","ng://@tss/sdk/lib/core/stats/calculate-remaining-seconds.function.ts","ng://@tss/sdk/lib/core/stats/is-number-between-or-equal.function.ts","ng://@tss/sdk/lib/core/stats/is-number-between.function.ts","ng://@tss/sdk/lib/core/stats/sum.function.ts","ng://@tss/sdk/lib/core/stats/stats-tracker.ts","ng://@tss/sdk/lib/core/stats/sum-property.function.ts","ng://@tss/sdk/lib/core/stats/sum-values.function.ts","ng://@tss/sdk/lib/core/storage/in-memory-storage.service.ts","ng://@tss/sdk/lib/core/tokens/extract-tokens.function.ts","ng://@tss/sdk/lib/core/tokens/extract-token-expressions.function.ts","ng://@tss/sdk/lib/core/type-check/is-boolean.function.ts","ng://@tss/sdk/lib/core/type-check/is-not-array.function.ts","ng://@tss/sdk/lib/core/type-check/is-not-boolean.function.ts","ng://@tss/sdk/lib/core/type-check/is-not-date.function.ts","ng://@tss/sdk/lib/core/type-check/is-not-defined.function.ts","ng://@tss/sdk/lib/core/type-check/is-not-function.function.ts","ng://@tss/sdk/lib/core/type-check/is-not-number.function.ts","ng://@tss/sdk/lib/core/type-check/is-not-object.function.ts","ng://@tss/sdk/lib/core/type-check/is-primitive.function.ts","ng://@tss/sdk/lib/core/type-check/is-not-primitive.function.ts","ng://@tss/sdk/lib/core/type-check/is-not-string.function.ts","ng://@tss/sdk/lib/core/type-check/is-not-type.function.ts","ng://@tss/sdk/lib/core/units/area-unit.ts","ng://@tss/sdk/lib/core/units/convert-area-units.function.ts","ng://@tss/sdk/lib/core/units/length-unit.ts","ng://@tss/sdk/lib/core/units/unit-conversion.constants.ts","ng://@tss/sdk/lib/core/units/to-meters.function.ts","ng://@tss/sdk/lib/core/units/from-meters.function.ts","ng://@tss/sdk/lib/core/units/convert-length-units.function.ts","ng://@tss/sdk/lib/core/units/meters-per-second-to-kilometers-per-hour.function.ts","ng://@tss/sdk/lib/core/units/meters-per-second-to-miles-per-hour.function.ts","ng://@tss/sdk/lib/core/url/ensure-protocol.function.ts","ng://@tss/sdk/lib/core/url/get-base-url.function.ts","ng://@tss/sdk/lib/core/url/join-and-format.function.ts","ng://@tss/sdk/lib/core/url/parameters-to-string.function.ts","ng://@tss/sdk/lib/core/url/url.constants.ts","ng://@tss/sdk/lib/core/url/remove-empty-params.function.ts","ng://@tss/sdk/lib/core/url/strip-trailing-slash.function.ts","ng://@tss/sdk/lib/core/using.function.ts","ng://@tss/sdk/lib/core/uuid/guid.constants.ts","ng://@tss/sdk/lib/core/uuid/uuid-value-replacer.function.ts","ng://@tss/sdk/lib/core/uuid/uuid.function.ts","ng://@tss/sdk/lib/core/uuid/guid.ts","ng://@tss/sdk/lib/core/validation/validation-results.ts","ng://@tss/sdk/lib/core/validation/validation-check.ts","ng://@tss/sdk/lib/csv/csv.config.ts","ng://@tss/sdk/lib/csv/csv.constants.ts","ng://@tss/sdk/lib/csv/csv.module.ts","ng://@tss/sdk/lib/csv/to-csv.function.ts","ng://@tss/sdk/lib/geometry/geometry/is-line.function.ts","ng://@tss/sdk/lib/geometry/line/is-multi-part.function.ts","ng://@tss/sdk/lib/geometry/line/to-multi-part-paths.function.ts","ng://@tss/sdk/lib/geometry/line/flatten-line.function.ts","ng://@tss/sdk/lib/geometry/geometry/is-point.function.ts","ng://@tss/sdk/lib/geometry/point/is-multi-part-point.function.ts","ng://@tss/sdk/lib/geometry/point/to-multi-part-point.function.ts","ng://@tss/sdk/lib/geometry/geometry/is-polygon.function.ts","ng://@tss/sdk/lib/csv/geometry-to-csv.function.ts","ng://@tss/sdk/lib/data-source/apply-edits-seed/apply-edits.constants.ts","ng://@tss/sdk/lib/data-source/data-source-config.ts","ng://@tss/sdk/lib/data-source/apply-edits-seed/data-source-edit.service.ts","ng://@tss/sdk/lib/data-source/attachments/attachment-type.ts","ng://@tss/sdk/lib/http/to-form-data-string.function.ts","ng://@tss/sdk/lib/data-source/attachments/attachments.constants.ts","ng://@tss/sdk/lib/data-source/attachments/attachment.service.ts","ng://@tss/sdk/lib/data-source/data-source-provider-type.ts","ng://@tss/sdk/lib/data-source/data-source.constants.ts","ng://@tss/sdk/lib/data-source/data-source.service.ts","ng://@tss/sdk/lib/data-source/data-table.ts","ng://@tss/sdk/lib/data-source/get-data-source-id.function.ts","ng://@tss/sdk/lib/data-source/is-oracle-provider.function.ts","ng://@tss/sdk/lib/data-source/get-date-format-for-provider.function.ts","ng://@tss/sdk/lib/data-source/is-enterprise-provider.function.ts","ng://@tss/sdk/lib/data-source/seed/seed-pod.constants.ts","ng://@tss/sdk/lib/maps/fields/layer-field.ts","ng://@tss/sdk/lib/maps/where-clause-builder.ts","ng://@tss/sdk/lib/lrs/lrs-where-clause-builder.ts","ng://@tss/sdk/lib/esri/base-esri.service.ts","ng://@tss/sdk/lib/esri/esri-config.ts","ng://@tss/sdk/lib/geometry/geometry.constants.ts","ng://@tss/sdk/lib/geometry/point/to-single-part-point.function.ts","ng://@tss/sdk/lib/geometry/point/sort-points.function.ts","ng://@tss/sdk/lib/geometry/line/single-line-to-coordinates.ts","ng://@tss/sdk/lib/geometry/line/multi-line-to-coordinates.ts","ng://@tss/sdk/lib/geometry/line/has-measure-values.function.ts","ng://@tss/sdk/lib/geometry/line/sort-line-by-measure.function.ts","ng://@tss/sdk/lib/geometry/point/get-measure-from-point.function.ts","ng://@tss/sdk/lib/geometry/line/get-measure-extent-from-line.function.ts","ng://@tss/sdk/lib/geometry/point/get-measure-extent-from-point.function.ts","ng://@tss/sdk/lib/geometry/geometry/get-measure-extent.function.ts","ng://@tss/sdk/lib/maps/fields/get-coded-value-domain.function.ts","ng://@tss/sdk/lib/maps/fields/get-coded-value-name.function.ts","ng://@tss/sdk/lib/maps/fields/get-coded-value-name-or-default.function.ts","ng://@tss/sdk/lib/lrs/data/is-dynamic-data-expression.function.ts","ng://@tss/sdk/lib/lrs/data/extract-feature-data.function.ts","ng://@tss/sdk/lib/lrs/data/evaluate-feature-data-expression.function.ts","ng://@tss/sdk/lib/maps/map-feature.ts","ng://@tss/sdk/lib/lrs/lrs-feature.ts","ng://@tss/sdk/lib/lrs/events/event-feature.ts","ng://@tss/sdk/lib/lrs/feature.ts","ng://@tss/sdk/lib/geometry/line/get-point.function.ts","ng://@tss/sdk/lib/geometry/line/to-multi-line-string.function.ts","ng://@tss/sdk/lib/geometry/line/to-line-string.function.ts","ng://@tss/sdk/lib/geometry/line/to-line-or-multi-line-string.function.ts","ng://@tss/sdk/lib/geometry/geometry/degrees-to-radians.function.ts","ng://@tss/sdk/lib/geometry/point/get-distance-between-points.function.ts","ng://@tss/sdk/lib/geometry/line/get-measure.function.ts","ng://@tss/sdk/lib/lrs/networks/network-feature.ts","ng://@tss/sdk/lib/lrs/lrs-feature-collection.ts","ng://@tss/sdk/lib/lrs/events/event-feature-collection.ts","ng://@tss/sdk/lib/lrs/networks/network-feature-collection.ts","ng://@tss/sdk/lib/esri/esri-map-service-request.ts","ng://@tss/sdk/lib/http/to-form-data.function.ts","ng://@tss/sdk/lib/esri/esri.constants.ts","ng://@tss/sdk/lib/esri/geometry-to-measure/geometry-to-measure.constants.ts","ng://@tss/sdk/lib/esri/geometry-to-measure/get-geometry-to-measure-options.function.ts","ng://@tss/sdk/lib/esri/query/esri-query.constants.ts","ng://@tss/sdk/lib/esri/query/get-map-query-options.function.ts","ng://@tss/sdk/lib/esri/query/to-http-query-params.function.ts","ng://@tss/sdk/lib/esri/try-strip-gdb-version.function.ts","ng://@tss/sdk/lib/maps/to-layer-id.function.ts","ng://@tss/sdk/lib/esri/join-and-format-with-layer.function.ts","ng://@tss/sdk/lib/maps/drawing/class-break-info.ts","ng://@tss/sdk/lib/maps/drawing/unique-value-info.ts","ng://@tss/sdk/lib/maps/drawing/layer-drawing-info-renderer.ts","ng://@tss/sdk/lib/maps/drawing/layer-drawing-info.ts","ng://@tss/sdk/lib/maps/feature-class-layer.ts","ng://@tss/sdk/lib/esri/esri-map-server.service.ts","ng://@tss/sdk/lib/esri/feature-server/is-feature-server-layer-url.function.ts","ng://@tss/sdk/lib/esri/feature-server/is-feature-server-service-url.ts","ng://@tss/sdk/lib/esri/map-server/is-map-server-service-url.ts","ng://@tss/sdk/lib/esri/lrs-server/is-lrs-server-service-url.function.ts","ng://@tss/sdk/lib/esri/lrs-server/is-lrs-server-layers-service-url.function.ts","ng://@tss/sdk/lib/esri/is-cacheable-esri-service-route.function.ts","ng://@tss/sdk/lib/esri/map-server/extract-map-server-layer-id.function.ts","ng://@tss/sdk/lib/esri/map-server/extract-map-server-url.function.ts","ng://@tss/sdk/lib/esri/map-server/is-map-server-layer-url.function.ts","ng://@tss/sdk/lib/esri/portal/does-path-include-portal-access-code.function.ts","ng://@tss/sdk/lib/esri/portal/does-path-include-portal-access-token.function.ts","ng://@tss/sdk/lib/esri/portal/get-portal-url.function.ts","ng://@tss/sdk/lib/esri/portal/to-esri-portal-access-token.function.ts","ng://@tss/sdk/lib/esri/to-esri-server-token.function.ts","ng://@tss/sdk/lib/esri/portal/remove-portal-access-token-from-hash.function.ts","ng://@tss/sdk/lib/esri/portal/esri-portal.service.ts","ng://@tss/sdk/lib/esri/portal/extract-portal-access-token.function.ts","ng://@tss/sdk/lib/esri/portal/get-portal-oauth-redirect-url.function.ts","ng://@tss/sdk/lib/esri/portal/get-portal-sharing-url.function.ts","ng://@tss/sdk/lib/export/export.config.ts","ng://@tss/sdk/lib/export/export.constants.ts","ng://@tss/sdk/lib/export/export.module.ts","ng://@tss/sdk/lib/export/export.service.ts","ng://@tss/sdk/lib/geolocation/geolocation.config.ts","ng://@tss/sdk/lib/geolocation/geolocation.constants.ts","ng://@tss/sdk/lib/geolocation/geolocator/geolocatable.decorator.ts","ng://@tss/sdk/lib/geolocation/geolocator/geolocator-accuracy-unit.ts","ng://@tss/sdk/lib/geolocation/geolocator/base-geolocator.service.ts","ng://@tss/sdk/lib/geolocation/gps-position/position-to-gps-position.function.ts","ng://@tss/sdk/lib/geolocation/geolocator/geolocator-capability.ts","ng://@tss/sdk/lib/geolocation/geolocator/geolocation-gps-locator.service.ts","ng://@tss/sdk/lib/geolocation/geolocation.module.ts","ng://@tss/sdk/lib/geolocation/is-position-acceptable.function.ts","ng://@tss/sdk/lib/geolocation/gps-position/is-position-error.function.ts","ng://@tss/sdk/lib/geolocation/gps-position/gps-position-to-point.ts","ng://@tss/sdk/lib/geolocation/gps-position/is-valid-latitude.function.ts","ng://@tss/sdk/lib/geolocation/gps-position/is-valid-longitude.function.ts","ng://@tss/sdk/lib/geolocation/gps-position/is-valid-location.function.ts","ng://@tss/sdk/lib/geolocation/gps-position/is-not-valid-location.function.ts","ng://@tss/sdk/lib/geolocation/gps-position/gps-positions-almost-equal.ts","ng://@tss/sdk/lib/geolocation/geolocation.service.ts","ng://@tss/sdk/lib/geolocation/geolocator/geolocator-source.service.ts","ng://@tss/sdk/lib/geolocation/gps-position/gps-positions-to-point.ts","ng://@tss/sdk/lib/geolocation/gps-position/is-not-valid-latitude.function.ts","ng://@tss/sdk/lib/geolocation/gps-position/is-not-valid-longitude.function.ts","ng://@tss/sdk/lib/geometry/geometry/set-measures-by-geometric-length.function.ts","ng://@tss/sdk/lib/geolocation/position-path-builder.ts","ng://@tss/sdk/lib/geometry/geometry/radians-to-degrees.function.ts","ng://@tss/sdk/lib/geometry/geometry.config.ts","ng://@tss/sdk/lib/geometry/line/extract-measures-from-line.function.ts","ng://@tss/sdk/lib/geometry/line/get-distance-to-line.function.ts","ng://@tss/sdk/lib/geometry/line/get-measure-from-flat-coordinate-system.function.ts","ng://@tss/sdk/lib/geometry/line/get-measure-from-lat-lng.function.ts","ng://@tss/sdk/lib/geometry/line/get-nearest-point-by-geometry.function.ts","ng://@tss/sdk/lib/geometry/point/bounds.function.ts","ng://@tss/sdk/lib/geometry/line/is-line-within-bounds.function.ts","ng://@tss/sdk/lib/geometry/line/is-point-on-line.function.ts","ng://@tss/sdk/lib/geometry/point/calculate-cross-product-by-points.function.ts","ng://@tss/sdk/lib/gps-gate/gps-gate.config.ts","ng://@tss/sdk/lib/gps-gate/gps-gate-geolocator.service.ts","ng://@tss/sdk/lib/gps-gate/gps-gate.module.ts","ng://@tss/sdk/lib/lrs/calibration-points/calibration-point-layer.ts","ng://@tss/sdk/lib/lrs/capture-position.ts","ng://@tss/sdk/lib/lrs/centerlines/centerline-layer.ts","ng://@tss/sdk/lib/lrs/data/lrs-data.service.ts","ng://@tss/sdk/lib/lrs/lrs.config.ts","ng://@tss/sdk/lib/lrs/data-source-lrs-metadata.service.ts","ng://@tss/sdk/lib/lrs/lrs-layer.ts","ng://@tss/sdk/lib/lrs/events/event-layer.ts","ng://@tss/sdk/lib/lrs/hierarchy/generate-hierarchy-filters.function.ts","ng://@tss/sdk/lib/lrs/intersections/intersection-layer.ts","ng://@tss/sdk/lib/lrs/layer-search.ts","ng://@tss/sdk/lib/lrs/networks/network-layer.ts","ng://@tss/sdk/lib/lrs/redlines/redline-layer.ts","ng://@tss/sdk/lib/maps/map-server-metadata.ts","ng://@tss/sdk/lib/lrs/lrs-metadata-validations.ts","ng://@tss/sdk/lib/lrs/non-lrs/non-lrs-layer.ts","ng://@tss/sdk/lib/lrs/lrs-metadata.ts","ng://@tss/sdk/lib/lrs/lrs-metadata-merge.ts","ng://@tss/sdk/lib/lrs/lrs-metadata-retriever.ts","ng://@tss/sdk/lib/lrs/lrs-metadata.service.ts","ng://@tss/sdk/lib/lrs/redlines/redline-feature.ts","ng://@tss/sdk/lib/maps/drawing/symbol-location-type-definition.ts","ng://@tss/sdk/lib/maps/map-table.ts","ng://@tss/sdk/lib/maps/maps.config.ts","ng://@tss/sdk/lib/motion/motion.config.ts","ng://@tss/sdk/lib/motion/device-motion.service.ts","ng://@tss/sdk/lib/motion/motion.module.ts","ng://@tss/sdk/lib/orientation/heading/get-heading-from-orientation.function.ts","ng://@tss/sdk/lib/orientation/orientation.config.ts","ng://@tss/sdk/lib/orientation/device-orientation.service.ts","ng://@tss/sdk/lib/orientation/orientation.module.ts","ng://@tss/sdk/lib/queuing/queue-worker-token.ts","ng://@tss/sdk/lib/queuing/work-queue-status-event-type.ts","ng://@tss/sdk/lib/queuing/work-queue-status-tracker.ts","ng://@tss/sdk/lib/queuing/work-queue-manager.ts","ng://@tss/sdk/lib/queuing/queuable-work-queue-manager.ts","ng://@tss/sdk/lib/queuing/queue-item-status.ts","ng://@tss/sdk/lib/queuing/queue.config.ts","ng://@tss/sdk/lib/security/privileges/privilege.service.ts","ng://@tss/sdk/lib/security/roles/role.ts","ng://@tss/sdk/lib/security/roles/role-privilege.service.ts","ng://@tss/sdk/lib/security/roles/role.service.ts","ng://@tss/sdk/lib/security/security.constants.ts","ng://@tss/sdk/lib/security/roles/user-role.service.ts","ng://@tss/sdk/lib/security/users/user.service.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export class ResourceConfig {\n  serviceUrl: string;\n\n  get hasServiceUrl(): boolean {\n    return Boolean(this.serviceUrl);\n  }\n}\n","export enum LogLevel {\n  Trace = 0,\n  Debug = 1,\n  Info = 2,\n  Warn = 3,\n  Error = 4,\n  Fatal = 5\n}\n\n\nexport type LogType = 'trace' | 'debug' | 'info' | 'warn' | 'error' | 'fatal';\n\n\nexport function typeToLevel(type: LogType): LogLevel {\n  if (type === 'trace') {\n    return LogLevel.Trace;\n  } else if (type === 'debug') {\n    return LogLevel.Debug;\n  } else if (type === 'info') {\n    return LogLevel.Info;\n  } else if (type === 'warn') {\n    return LogLevel.Warn;\n  } else if (type === 'error') {\n    return LogLevel.Error;\n  } else if (type === 'fatal') {\n    return LogLevel.Fatal;\n  } else {\n    throw new Error(`Unknown log type: '${type}'`);\n  }\n}\n\n\nexport function levelToType(level: LogLevel): LogType {\n  if (level === LogLevel.Trace) {\n    return 'trace';\n  } else if (level === LogLevel.Debug) {\n    return 'debug';\n  } else if (level === LogLevel.Info) {\n    return 'info';\n  } else if (level === LogLevel.Warn) {\n    return 'warn';\n  } else if (level === LogLevel.Error) {\n    return 'error';\n  } else if (level === LogLevel.Fatal) {\n    return 'fatal';\n  } else {\n    throw new Error(`Unknown log level: '${level}'`);\n  }\n}\n","export enum MeasurementUnit {\n  Imperial = 'imperial',\n  Metric = 'metric'\n}\n","import { Injectable } from '@angular/core';\nimport { LogLevel } from './logging/log-level';\nimport { AutoConfigData } from './auto-config-data';\nimport { MeasurementUnit } from './units/measurement-unit';\n\n\n/**\n * A simple settings/config class for storing key/value pairs with persistence.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class CoreConfig {\n  static readonly moduleConfigs: AutoConfigData[] = [{ className: 'CoreConfig', injectorToken: CoreConfig }];\n\n  autoConfig = true;\n  logEnabled = true;\n  logLevel = LogLevel.Info;\n  defaultNotifyInfoMsg = 'Info';\n  defaultNotifyWarnMsg = 'Warning';\n  defaultNotifyErrorMsg = 'Error';\n  defaultNotifySuccessMsg = 'Success';\n  defaultNotifyWaitMsg = 'Wait';\n  measurementUnit = MeasurementUnit.Imperial;\n}\n","export function isType(val: any, expectedType: string): boolean {\n  return typeof val === expectedType;\n}\n","import { isType } from './is-type.function';\n\n\nexport function isString(val: any): boolean {\n  return isType(val, 'string');\n}\n","import { CoreConfig } from './core.config';\nimport { AutoConfigData } from './auto-config-data';\nimport { isString } from './type-check/is-string.function';\n\n\nexport function AutoConfig(config: AutoConfigData | string): ClassDecorator {\n  return (constructor: any) => {\n    const autoConf: AutoConfigData = isString(config)\n      ? { className: config as string, injectorToken: constructor }\n      : config as AutoConfigData;\n\n    CoreConfig.moduleConfigs.push(autoConf);\n  };\n}\n","import { Injectable } from '@angular/core';\nimport { ResourceConfig } from '../core/resource.config';\nimport { AutoConfig } from '../core/auto-config.decorator';\nimport { AppProfile } from './app-profile';\n\n\nexport const DEFAULT_APP_ID = 'all';\nexport const DEFAULT_PROFILE_ID = 'default';\n\n\n/**\n * Application related configuration options. These settings are used to\n * drive all general \"global\" application related behaviour. The settings can be\n * overridden directly in the code, application module, or from the TDS server.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('AppConfig')\nexport class AppConfig extends ResourceConfig {\n  appId = DEFAULT_APP_ID;\n  queryProfile = true;\n  profileId: string = null;\n  profile: AppProfile = null;\n  defaultProfileId = DEFAULT_PROFILE_ID;\n  allowQueryParamInjections = true;\n  continueOnAppBootstrapError = false;\n  appSettingsEndpoint = 'api/apps/{appId}/settings/{id}';\n  appProfileEndpoint = 'api/apps/{appId}/profiles/{id}';\n  pingEndpoint = 'api/ping';\n  statusEndpoint = 'api/status';\n}\n","// Port from: https://github.com/jfromaniello/url-join\n// TODO: Refactor this to be cleaner - RG.\nexport function join(...parts): string {\n  const resultArray = [];\n  let str;\n\n  if (Array.isArray(parts[0])) {\n    parts = parts[0];\n  }\n\n  parts[0] = parts[0] || '';\n  // If the first part is a plain protocol, we combine it with the next part.\n  if (parts[0].match(/^[^/:]+:\\/*$/) && parts.length > 1) {\n    const first = parts.shift();\n    parts[0] = first + parts[0];\n  }\n\n  // There must be two or three slashes in the file protocol, two slashes in anything else.\n  if (parts[0].match(/^file:\\/\\/\\//)) {\n    parts[0] = parts[0].replace(/^([^/:]+):\\/*/, '$1:///');\n  } else {\n    parts[0] = parts[0].replace(/^([^/:]+):\\/*/, '$1://');\n  }\n\n  for (let i = 0; i < parts.length; i++) {\n    let component = parts[i];\n\n    if (typeof component !== 'string') {\n      throw new TypeError('Url must be a string. Received ' + component);\n    }\n\n    if (component === '') { continue; }\n\n    if (i > 0) {\n      // Removing the starting slashes for each component but the first.\n      component = component.replace(/^[\\/]+/, '');\n    }\n\n    if (i < parts.length - 1) {\n      // Removing the ending slashes for each component but the last.\n      component = component.replace(/[\\/]+$/, '');\n    } else {\n      // For the last component we will combine multiple slashes to a single one.\n      component = component.replace(/[\\/]+$/, '/');\n    }\n\n    resultArray.push(component);\n  }\n\n  str = resultArray.join('/');\n  // Each input component is now separated by a single slash except the possible first plain protocol part.\n\n  // Remove trailing slash before parameters or hash.\n  str = str.replace(/\\/(\\?|&|#[^!])/g, '$1');\n\n  // Replace ? in parameters with &.\n  const urlParts = str.split('?');\n  str = urlParts.shift() + (urlParts.length > 0 ? '?' : '') + urlParts.join('&');\n\n  return str;\n}\n","export const TOKEN_EXPRESSION = new RegExp('{(.*?)}', 'gi');\nexport const FULL_TOKEN_EXPRESSION = new RegExp('{{(.*?)}}', 'gi');\nexport const WILDCARD_EXPRESSION_VALUE = '(.*)';\n","import { FULL_TOKEN_EXPRESSION, TOKEN_EXPRESSION } from './tokens.constants';\n\n\nexport function replaceTokens(template: string, replaceValue = ''): string {\n  return (template || '')\n    .replace(FULL_TOKEN_EXPRESSION, replaceValue)\n    .replace(TOKEN_EXPRESSION, replaceValue);\n}\n","export function replaceToken(template: string, tokenKey: string, tokenValue: string): string {\n  return (template || '')\n    .replace(new RegExp(`{{${tokenKey}}}`, 'gi'), tokenValue)\n    .replace(new RegExp(`{${tokenKey}}`, 'gi'), tokenValue);\n}\n","import { replaceTokens } from '../tokens/replace-tokens.function';\nimport { replaceToken } from '../tokens/replace-token.function';\n\n\n// TODO: Expand this to have the full functionality of:\n// https://github.com/davidchambers/string-format\n// -RG.\nexport function format(template: string, tokens: any, removeEmptyTokens = false): string {\n  Object.keys(tokens || {})\n    .forEach(key => template = replaceToken(template, key, tokens[key]));\n\n  if (removeEmptyTokens) {\n    template = replaceTokens(template);\n  }\n\n  return template;\n}\n","import { isString } from '../type-check/is-string.function';\n\n\n/**\n * Cleans a URL:\n *  - Removes double-slashes\n */\nexport function clean(url: string): string {\n  return isString(url)\n    ? url.replace(/([^:]\\/)\\/+/g, '$1')\n    : url;\n}\n","export const NO_URL_ERROR_MSG = 'No URL configured for resource service.';\nexport const UNSUPPORTED_GET_EXCEPTION_MSG = `The 'Get' method is unsupported for this resource`;\nexport const UNSUPPORTED_CREATE_EXCEPTION_MSG = `The 'Create' method is unsupported for this resource`;\nexport const EMPTY_PARAM_VALUE = '';\n","// Angular.\nimport { HttpClient } from '@angular/common/http';\n\n// TSS.\nimport { join } from '../url/join.function';\nimport { format } from '../formatting/format.function';\nimport { clean } from '../url/clean.function';\nimport { isString } from '../type-check/is-string.function';\nimport { ResourceServiceConfig } from './resource-service-config';\nimport { NO_URL_ERROR_MSG } from './resource.constants';\n\n\nexport abstract class BaseEmptyResourceService<T> {\n  protected config: ResourceServiceConfig = {\n    url: null,\n    idFieldName: 'id',\n    cleanUrl: true,\n  };\n\n  constructor(protected http: HttpClient, paramsOrUrl: string | ResourceServiceConfig) {\n    if (isString(paramsOrUrl)) {\n      this.config.url = paramsOrUrl as string;\n    } else {\n      Object.assign(this.config, paramsOrUrl);\n    }\n\n    if (!this.config.url) {\n      throw NO_URL_ERROR_MSG;\n    }\n  }\n\n  protected getUrlWithEntity(entity: T, endpoint: string, tokens: any): string {\n    return this.getUrlWithId(entity ? entity[this.config.idFieldName] : null, endpoint, tokens);\n  }\n\n  protected getUrlWithId(id: string | number, endpoint: string, tokens: any): string {\n    const inferredRouteTokens = {};\n    inferredRouteTokens[this.config.idFieldName] = id;\n\n    return this.getUrl(endpoint, Object.assign(inferredRouteTokens, tokens));\n  }\n\n  protected getUrl(endpoint: string, tokens: any): string {\n    const url = endpoint\n      ? join(this.config.url, endpoint)\n      : this.config.url;\n\n    return this.replaceTokens(url, tokens);\n  }\n\n  protected replaceTokens(url: string, tokens: any): string {\n    tokens = tokens || {};\n    if (this.config.defaultRouteTokens) {\n      tokens = Object.assign({}, this.config.defaultRouteTokens, tokens);\n    }\n\n    url = format(url, tokens, true);\n    if (this.config.cleanUrl) {\n      url = clean(url);\n    }\n\n    return url;\n  }\n}\n","// Angular.\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n// 3rd party.\nimport { Observable } from 'rxjs';\n\n// TSS.\nimport { AppConfig } from './app.config';\nimport { BaseEmptyResourceService } from '../core/resource/base-empty-resource.service';\n\n\nexport interface ApiStatus {\n  up: boolean;\n  down: boolean;\n  configStoreUp: boolean;\n  configStoreDown: boolean;\n  upSince: Date;\n  daysUp: number;\n  appCount: number;\n}\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApiService extends BaseEmptyResourceService<ApiStatus> {\n  constructor(http: HttpClient, private appConfig: AppConfig) {\n    super(http, appConfig.serviceUrl);\n  }\n\n  ping(routeTokens?: any, params?: HttpParams): Observable<void> {\n    const url = this.getUrl(this.appConfig.pingEndpoint, routeTokens);\n    return this.http.get<void>(url, { params });\n  }\n\n  status(routeTokens?: any, params?: HttpParams): Observable<ApiStatus> {\n    const url = this.getUrl(this.appConfig.pingEndpoint, routeTokens);\n    return this.http.get<ApiStatus>(url, { params });\n  }\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// TSS.\nimport { LogEntry } from './log-entry';\nimport { LogLevel, LogType, typeToLevel } from './log-level';\nimport { CoreConfig } from '../core.config';\nimport { format } from '../formatting/format.function';\n\n\n/**\n * Console logger.\n */\n@Injectable({ providedIn: 'root' })\nexport class Logger {\n  public logs: Array<LogEntry> = [];\n\n  constructor(private config: CoreConfig) {\n  }\n\n  get level(): LogLevel {\n    return this.config.logLevel;\n  }\n\n  get enabled(): boolean {\n    return this.config.logEnabled;\n  }\n\n  get isTrace(): boolean {\n    return this.level >= LogLevel.Trace;\n  }\n\n  get isDebug(): boolean {\n    return this.level >= LogLevel.Debug;\n  }\n\n  get isWarn(): boolean {\n    return this.level >= LogLevel.Warn;\n  }\n\n  get isError(): boolean {\n    return this.level >= LogLevel.Error;\n  }\n\n  get isFatal(): boolean {\n    return this.level >= LogLevel.Fatal;\n  }\n\n  get traceCount(): number {\n    return this.count('trace');\n  }\n\n  get debugCount(): number {\n    return this.count('debug');\n  }\n\n  get warnCount(): number {\n    return this.count('warn');\n  }\n\n  get errorCount(): number {\n    return this.count('error');\n  }\n\n  get fatalCount(): number {\n    return this.count('fatal');\n  }\n\n  count(logType: LogType): number {\n    return this.logsByType(logType).length;\n  }\n\n  logsByType(logType: LogType): LogEntry[] {\n    return this.logsByLevel(typeToLevel(logType));\n  }\n\n  logsByLevel(logLevel: LogLevel) {\n    return this.logs.filter(l => l.level === logLevel);\n  }\n\n  logEntry(log: LogEntry): LogEntry {\n    if (this.config.logEnabled && log.level >= this.config.logLevel) {\n      this.logs.push(log);\n\n      if (this.isDebug) {\n        console.log(`${LogLevel[log.level]}: ${log.msg} ${log.error || ''}`);\n      }\n    }\n\n    return log;\n  }\n\n  log(msg: string, level: LogLevel, error: Error = null): LogEntry {\n    return this.logEntry({\n      msg: format(msg, { error }),\n      level,\n      error,\n      created: new Date()\n    });\n  }\n\n  trace(msg: string): LogEntry {\n    return this.log(msg, LogLevel.Trace);\n  }\n\n  debug(msg: string): LogEntry {\n    return this.log(msg, LogLevel.Debug);\n  }\n\n  info(msg: string): LogEntry {\n    return this.log(msg, LogLevel.Info);\n  }\n\n  warn(msg: string, error: Error = null): LogEntry {\n    return this.log(msg, LogLevel.Warn, error);\n  }\n\n  error(msg: string, error: Error = null): LogEntry {\n    return this.log(msg, LogLevel.Error, error);\n  }\n\n  fatal(msg: string, error: Error = null): LogEntry {\n    return this.log(msg, LogLevel.Fatal, error);\n  }\n\n  clear(): void {\n    this.logs.length = 0;\n  }\n}\n","export function getByteSize(value: string): number {\n  value = value || '';\n\n  // Matches only the 10.. bytes that are non-initial characters in a multi-byte sequence.\n  const match = encodeURIComponent(value).match(/%[89ABab]/g);\n  return value.length + (match ? match.length : 0);\n}\n","export const STORAGE_FORMAT_UNITS = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\nexport const NO_BYTES_FORMATTED = '0 KB';\n","import { isType } from './is-type.function';\n\n\nexport function isDefined(val: any): boolean {\n  return !isType(val, 'undefined');\n}\n","import { isDefined } from './is-defined.function';\n\nexport function isValue(val: any): boolean {\n  return isDefined(val) && val !== null && val !== '';\n}\n","import { NO_BYTES_FORMATTED, STORAGE_FORMAT_UNITS } from './storage.constants';\nimport { isValue } from '../type-check/is-value.function';\n\n\nexport function formatByteSize(numberOfBytes: number, decimalPlaces?: number, lowerCaseUnits = false): string {\n  let len = 0;\n\n  if (!numberOfBytes) {\n    return NO_BYTES_FORMATTED;\n  }\n\n  while (numberOfBytes >= 1024 && ++len) {\n    numberOfBytes = numberOfBytes / 1024;\n  }\n\n  if (!isValue(decimalPlaces)) {\n    decimalPlaces = numberOfBytes >= 10 || len < 1 ? 0 : 1;\n  }\n\n  const fixedNum: string = numberOfBytes.toFixed(decimalPlaces);\n  const unit = lowerCaseUnits\n    ? STORAGE_FORMAT_UNITS[len].toLowerCase()\n    : STORAGE_FORMAT_UNITS[len];\n\n  return `${fixedNum} ${unit}`;\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\nimport { getByteSize } from './get-byte-size.function';\nimport { formatByteSize } from './format-byte-size.function';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport abstract class BaseStorage {\n  protected keyPrefix = '';\n  protected keySuffix = '';\n\n  abstract length: number;\n  abstract get(key: string): string;\n  abstract set(key: string, value: string): void;\n  abstract remove(key: string): void;\n  abstract clear(): void;\n\n  has(key: string): boolean {\n    return Boolean(this.get(key));\n  }\n\n  /**\n   * Returns the number of bytes for this storage key.\n   */\n  size(key: string): number {\n    const value = this.get(key);\n    return getByteSize(value) + getByteSize(key);\n  }\n\n  sizeFormatted(key: string): string {\n    return formatByteSize(this.size(key));\n  }\n\n  getObject(key: string): any {\n    const value = this.get(key);\n    return value ? JSON.parse(value) : null;\n  }\n\n  setObject(key: string, value: any): void {\n    this.set(key, JSON.stringify(value));\n  }\n\n  protected formatKey(key: string): string {\n    return `${this.keyPrefix}${key}${this.keySuffix}`;\n  }\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\nimport { BaseStorage } from './base-storage.service';\n\n\n@Injectable({ providedIn: 'root' })\nexport class PersistentStorage extends BaseStorage {\n  get length(): number {\n    return localStorage.length;\n  }\n\n  get(key: string): string {\n    return localStorage.getItem(this.formatKey(key));\n  }\n\n  set(key: string, value: string): void {\n    localStorage.setItem(this.formatKey(key), value);\n  }\n\n  remove(key: string): void {\n    localStorage.removeItem(this.formatKey(key));\n  }\n\n  clear(): void {\n    localStorage.clear();\n  }\n}\n","export function hasWindow(): boolean {\n  return typeof window !== 'undefined';\n}\n","import { hasWindow } from '../environment/has-window.function';\n\n\nexport function getFullUrl(): string | '' {\n  return hasWindow() ? location.href : '';\n}\n","import { getFullUrl } from './get-full-url.function';\n\n\nexport function getQueryParams(search?: string): any {\n  let hashes;\n  search = search || getFullUrl();\n\n  if (!search) {\n    return {};\n  }\n\n  hashes = search.slice(search.indexOf('?') + 1).split('&');\n  if (!hashes || !hashes.length || !hashes[0] || hashes.length === 1 && !String(hashes[0]).includes('=')) {\n    return {};\n  }\n\n  return hashes.reduce((params, hash) => {\n    const [key, val] = hash.split('=');\n    return Object.assign(params, { [key]: decodeURIComponent(val) });\n  }, {});\n}\n","export function getLastItem<T>(list: T[]): T {\n  return list[list.length - 1];\n}\n","import { clean } from './clean.function';\nimport { getLastItem } from '../array/get-last-item.function';\n\n\nexport function getPostHashRoutePaths(url: string): string[] {\n  const parts = clean(url).split('#');\n  const hashPart = parts.length > 1\n    ? getLastItem(parts)\n    : null;\n\n  return hashPart && hashPart !== '/'\n    ? hashPart\n      .split('/')\n      .filter(part => Boolean(part) && !part.includes('='))\n    : [];\n}\n","import { getPostHashRoutePaths } from './get-post-hash-route-paths.function';\n\n\nexport function getFirstHashRoutePath(url: string): string | null {\n  const [postHashParts] = getPostHashRoutePaths(url);\n  return postHashParts || null;\n}\n","export function isDate(val: any): boolean {\n  return val instanceof Date;\n}\n","import { isValue } from './is-value.function';\n\n\nexport function isNotValue(val: any): boolean {\n  return !isValue(val);\n}\n","export function canNotBeNumber(val: any): boolean {\n  return isNaN(Number(val));\n}\n","import { canNotBeNumber } from './can-not-be-number.function';\n\n\nexport function canBeNumber(val: any): boolean {\n  return !canNotBeNumber(val);\n}\n","import { isNotValue } from '../type-check/is-not-value.function';\nimport { canBeNumber } from '../type-check/can-be-number.function';\n\n\nexport function toPrimitiveType(value: string): any {\n  if (isNotValue(value)) {\n    return value;\n  } else if (value === 'true' || value === 'false') {\n    return Boolean(value);\n  } else if (canBeNumber(value)) {\n    return Number(value);\n  } else {\n    return value;\n  }\n}\n","export function lowerCaseFirst(value: string): string {\n  return String(value).charAt(0).toLowerCase() + value.slice(1);\n}\n","// TODO: Refactor this method and give it proper names.\n// This was a copy/paste from online - RG.\nexport function setValue(target: any, key: string, val: any): void {\n  if (!target) {\n    return;\n  }\n\n  const ka = key.split(/\\./);\n  if (ka.length < 2) {\n    target[ka[0]] = val;\n  } else {\n    if (!target[ka[0]]) {\n      target[ka[0]] = {};\n    }\n    target = target[ka.shift()];\n    setValue(target, ka.join('.'), val);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ResourceConfig } from '../core/resource.config';\nimport { AutoConfig } from '../core/auto-config.decorator';\n\n\nexport type AuthorizationTypes = 'Bearer';\n\n/**\n * Security related configuration options. These settings are used to drive all\n * security related behaviour throughout the application. The settings can be\n * overridden directly in the code, application module, or from the TDS server.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('SecurityConfig')\nexport class SecurityConfig extends ResourceConfig {\n  rolesEnabled = true;\n  storeToken = true;\n  autoSignIn = true;\n  authorizationType: AuthorizationTypes = 'Bearer';\n  tokenEndpoint = 'token';\n  signOutEndpoint = 'api/account/signout';\n  userInfoEndpoint = 'api/account/userinfo';\n  usersEndpoint = 'api/users/{id}';\n  rolesEndpoint = 'api/roles/{id}';\n  privilegesEndpoint = 'api/privileges/{id}';\n  userRolesEndpoint = 'api/users/{userId}/roles/{roleName}';\n  rolesPrivilegesEndpoint = 'api/roles/{roleId}/privileges/{privilegeId}';\n  tokenStorageKey = '__tss_token';\n  tokenInvalidationDateLookup = '__tss_token_invalidate_date';\n  tdsTokenInclusionExpression = '/api/';\n  withCredentialsInclusionExpression = '(.*?)';\n  setWithCredentials = false;\n  accessToken: string = null;\n  defaultUserName: string = null;\n  defaultPassword: string = null;\n  roleSplitterExp = '[,|]+';\n  tokenBody = (userName, password) => `grant_type=password&username=${userName}&password=${password}`;\n}\n","export function isArray(val: any): boolean {\n  return Array.isArray(val);\n}\n","import { isType } from './is-type.function';\n\n\nexport function isNumber(val: any): boolean {\n  return isType(val, 'number');\n}\n","import { Injectable } from '@angular/core';\nimport { SecurityConfig } from './security-config';\nimport { isString } from '../core/type-check/is-string.function';\nimport { isArray } from '../core/type-check/is-array.function';\nimport { isValue } from '../core/type-check/is-value.function';\nimport { isNumber } from '../core/type-check/is-number.function';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RoleManagerService {\n  private readonly roles = new Set();\n  private readonly roleSplitterExpr: RegExp;\n\n  constructor(private config: SecurityConfig) {\n    this.roleSplitterExpr = new RegExp(this.config.roleSplitterExp);\n  }\n\n  get enabled(): boolean {\n    return this.config.rolesEnabled;\n  }\n\n  get roleCount(): number {\n    return this.roles.size;\n  }\n\n  getRoles(): string[] {\n    return Array.from(this.roles);\n  }\n\n  setRoles(roles: string | string[] | number | number[]): void {\n    this.clearRoles();\n    this.addRoles(roles);\n  }\n\n  addRoles(roles: string | string[] | number | number[]): void {\n    if (isString(roles) && (roles as string).includes(',')) {\n      roles = this.toArray((roles as string));\n    }\n\n    if (isArray(roles)) {\n      (roles as string[]).forEach(this.addRole, this);\n    } else {\n      this.addRole(roles as string);\n    }\n  }\n\n  addRole(role: string | number): void {\n    this.roles.add(String(role).trim());\n  }\n\n  clearRoles(): void {\n    this.roles.clear();\n  }\n\n  hasRole(role: string | number): boolean {\n    if (!this.enabled) {\n      return true;\n    }\n\n    if (!isValue(role)) {\n      return false;\n    }\n\n    return this.hasRoles(String(role));\n  }\n\n  hasRoles(roles: string | number): boolean {\n    let splitRoles;\n\n    if (!this.enabled) {\n      return true;\n    }\n\n    if (!isValue(roles)) {\n      return false;\n    }\n\n    splitRoles = this.toArray(roles);\n    return String(roles).includes(',')\n      ? this.hasAllRoles(splitRoles)\n      : this.hasAnyRoles(splitRoles);\n  }\n\n  hasAllRoles(roles: string | string[] | number | number[]): boolean {\n    if (!this.enabled) {\n      return true;\n    }\n\n    if (!isValue(roles)) {\n      return false;\n    }\n\n    const roleList: string[] = this.toStringArray(roles);\n    return roleList.every(this.forRealHasRole.bind(this));\n  }\n\n  hasAnyRoles(roles: string | string[] | number | number[]): boolean {\n    if (!this.enabled) {\n      return true;\n    }\n\n    if (!isValue(roles)) {\n      return false;\n    }\n\n    const roleList: string[] = this.toStringArray(roles);\n    return roleList.some(this.forRealHasRole.bind(this));\n  }\n\n  private forRealHasRole(role: string | number): boolean {\n    return this.roles.has(String(role).trim());\n  }\n\n  private toStringArray(roles: string | string[] | number | number[]): string[] {\n    let rolesList: string[] = [];\n    if (isString(roles)) {\n      rolesList = this.toArray(roles as string);\n    } else if (isNumber(roles)) {\n      rolesList.push(String(roles));\n    } else {\n      rolesList = roles as string[];\n    }\n\n    return rolesList;\n  }\n\n  private toArray(roles: string | number): string[] {\n    return String(roles).split(this.roleSplitterExpr);\n  }\n}\n\n","// Angular.\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n// 3rd party.\nimport { Observable, Subject } from 'rxjs';\nimport { publishReplay } from 'rxjs/operators';\n\n// TSS.\nimport { UserAccount } from './user-account';\nimport { RoleManagerService } from './role-manager.service';\nimport { SecurityConfig } from './security-config';\nimport { Logger } from '../core/logging/logger.service';\nimport { PersistentStorage } from '../core/storage/persistent-storage.service';\nimport { isString } from '../core/type-check/is-string.function';\n\n\nexport enum SignInState {\n  SignedIn,\n  SignedOut,\n  SignInFailed,\n  SignOutFailed,\n}\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n  rememberMe: boolean;\n  account: UserAccount;\n  isAuthenticated: boolean;\n  isDomainAccount: boolean;\n  isFederatedAccount: boolean;\n\n  readonly stateChange: Observable<SignInState>;\n  private readonly stateChangeSubject = new Subject<SignInState>();\n\n  constructor(\n    private http: HttpClient,\n    private roleMgr: RoleManagerService,\n    private config: SecurityConfig,\n    private storage: PersistentStorage,\n    private log: Logger\n  ) {\n    this.rememberMe = config.storeToken;\n    this.stateChange = this.stateChangeSubject.asObservable();\n\n    if (config.autoSignIn && !this.isAuthenticated) {\n      this.loadStoredToken();\n    }\n  }\n\n  signIn(userName: string, password: string, rememberMe: boolean = this.rememberMe): Observable<UserAccount> {\n    const observable = this.http.post<UserAccount>(\n      `${this.config.serviceUrl}/${this.config.tokenEndpoint}`,\n      this.config.tokenBody(userName, password)\n    )\n      .pipe(\n        publishReplay(1)\n      );\n\n    this.rememberMe = rememberMe;\n    observable.subscribe(this.onSignedIn.bind(this), this.onSignInFailed.bind(this));\n\n    return observable;\n  }\n\n  signOut(): Observable<any> {\n    const signOutUrl = `${this.config.serviceUrl}/${this.config.signOutEndpoint}`;\n    if (this.isFederatedAccount) {\n      this.log.info(`Signing out. Authentication Type: STS. Forwarded to: ${signOutUrl}`);\n      this.onSignedOut();\n\n      if (typeof location !== 'undefined') {\n        location.href = signOutUrl;\n      }\n    } else {\n      // The only reason this \"Account\" method is abstracted here is because there is additional stuff that\n      // has to happen when you sign out - like removing the user information cache, etc.\n      const obserable = this.http.get(signOutUrl)\n        .pipe(\n          publishReplay(1)\n        );\n\n      obserable\n        .subscribe(this.onSignedOut.bind(this), this.onSignedOutFailed.bind(this));\n\n      return obserable;\n    }\n  }\n\n  getUserInfo(): Observable<UserAccount> {\n    return this.http.get<UserAccount>(`${this.config.serviceUrl}/${this.config.userInfoEndpoint}`);\n  }\n\n  getToken(): string {\n    return this.isAuthenticated\n      ? this.account.access_token || null\n      : null;\n  }\n\n  loadStoredToken(): boolean {\n    const token = this.getLocalToken();\n    let loaded = false;\n\n    if (token && token['.expires']) {\n      const expiresDate = token['.expires'];\n      if (expiresDate > new Date()) {\n        this.onSignedIn(token, true);\n        loaded = true;\n      }\n    }\n\n    return loaded;\n  }\n\n  onSignedIn(account: UserAccount, skipLocalStorage: boolean = false) {\n    this.account = account;\n    this.isAuthenticated = true;\n    this.isDomainAccount = (account.foundContextType || '').toLowerCase() === 'domain';\n    this.isFederatedAccount = (account.authenticationType || '').toLowerCase() === 'federation';\n\n    // Note, we are exposing the access token through the security config because the token intercepter\n    // can not use this auth service - it will result in a cyclic dpendency injection error.\n    // See Angular issue: https://github.com/angular/angular/issues/18224\n    // TODO: Deprecate \"accessToken\" property on \"SecurityConfig\" once this is resolved - RG.\n    this.config.accessToken = account.access_token;\n    this.roleMgr.setRoles(account.privileges || account.roles);\n\n    if (!skipLocalStorage && this.rememberMe) {\n      account.lastSignIn = new Date();\n      this.setLocalToken(account);\n    }\n\n    this.log.debug('User signed in succesfully');\n    this.stateChangeSubject.next(SignInState.SignedIn);\n  }\n\n  onSignedOut() {\n    // We set the \"authenticated\" flag state to false so that anyone watching this can see the new state and\n    // get rid of the account information that was cached, because it is no longer applicable.\n    this.isAuthenticated = false;\n    this.isDomainAccount = false;\n    this.isFederatedAccount = false;\n    this.account = null;\n    this.roleMgr.clearRoles();\n    this.setLocalToken(null);\n    this.log.debug('User signed out succesfully');\n    this.stateChangeSubject.next(SignInState.SignedOut);\n  }\n\n  private onSignInFailed(err: any) {\n    this.log.error('Failed to sign in', err);\n    this.stateChangeSubject.next(SignInState.SignInFailed);\n  }\n\n  private onSignedOutFailed(err: any) {\n    this.log.error('Failed to sign out', err);\n    this.stateChangeSubject.next(SignInState.SignOutFailed);\n  }\n\n  private getLocalToken(): UserAccount {\n    try {\n      const token: UserAccount = this.storage.getObject(this.config.tokenStorageKey);\n\n      if (token && token.lastSignIn && isString(token.lastSignIn)) {\n        token.lastSignIn = new Date(token.lastSignIn);\n      }\n\n      if (token && token['.expires'] && isString(token['.expires'])) {\n        token['.expires'] = new Date(Date.parse(token['.expires']));\n      }\n\n      return token;\n    } finally {\n      // We don't need to do anything bbecause this is not critical path.\n    }\n  }\n\n  private setLocalToken(token): void {\n    try {\n      if (token) {\n        this.storage.setObject(this.config.tokenStorageKey, token);\n      } else {\n        this.storage.remove(this.config.tokenStorageKey);\n      }\n    } finally {\n      // We don't need to do anything as this is not a core workflow.\n    }\n  }\n}\n","// Angular.\nimport { HttpClient, HttpParams } from '@angular/common/http';\n\n// 3rd party.\nimport { Observable } from 'rxjs';\n\n// TSS.\nimport { BaseEmptyResourceService } from './base-empty-resource.service';\nimport { ResourceServiceConfig } from './resource-service-config';\n\n\nexport abstract class BaseResourceService<T> extends BaseEmptyResourceService<T> implements BaseEmptyResourceService<T> {\n  constructor(protected http: HttpClient, paramsOrUrl: string | ResourceServiceConfig) {\n    super(http, paramsOrUrl);\n  }\n\n  query(routeTokens?: any, params?: HttpParams): Observable<T[]> {\n    const url = this.getUrl(this.config.queryEndpoint, routeTokens);\n    return this.http.get<T[]>(url, { params });\n  }\n\n  get(id: string | number, routeTokens?: any, params?: HttpParams): Observable<T> {\n    const url = this.getUrlWithId(id, this.config.getEndpoint, routeTokens);\n    return this.http.get<T>(url, { params });\n  }\n\n  create(entity: T, routeTokens?: any, params?: HttpParams): Observable<T> {\n    const url = this.getUrl(this.config.createEndpoint, routeTokens);\n    return this.http.post<T>(url, entity, { params });\n  }\n\n  update(entity: T, routeTokens?: any, params?: HttpParams): Observable<any> {\n    const url = this.getUrlWithEntity(entity, this.config.updateEndpoint, routeTokens);\n    return this.http.put(url, entity, { params });\n  }\n\n  delete(id: string | number, routeTokens?: any, params?: HttpParams): Observable<T> {\n    const url = this.getUrlWithId(id, this.config.deleteEndpoint, routeTokens);\n    return this.http.delete<T>(url, { params });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { AppConfig } from './app.config';\nimport { AppProfile } from './app-profile';\nimport { BaseResourceService } from '../core/resource/base-resource.service';\nimport { join } from '../core/url/join.function';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AppProfileService extends BaseResourceService<AppProfile> {\n  constructor(protected http: HttpClient, config: AppConfig) {\n    super(http, {\n      url: join(config.serviceUrl, config.appProfileEndpoint),\n      defaultRouteTokens: {\n        appId: config.appId\n      }\n    });\n  }\n}\n\n","// Angular.\nimport { Router } from '@angular/router';\nimport { Injector, Injectable } from '@angular/core';\n\n// TSS.\nimport { AutoConfigData } from '../core/auto-config-data';\nimport { CoreConfig } from '../core/core.config';\nimport { Logger } from '../core/logging/logger.service';\nimport { PersistentStorage } from '../core/storage/persistent-storage.service';\nimport { getQueryParams } from '../core/url/get-query-params.function';\nimport { getFirstHashRoutePath } from '../core/url/get-first-hash-route-path.function';\nimport { getFullUrl } from '../core/url/get-full-url.function';\nimport { isDate } from '../core/type-check/is-date.function';\nimport { toPrimitiveType } from '../core/type-conversion/to-primitive-type.function';\nimport { lowerCaseFirst } from '../core/formatting/lower-case-first.function';\nimport { isValue } from '../core/type-check/is-value.function';\nimport { setValue } from '../core/object/set-value.function';\n\nimport { AuthService } from '../security/auth.service';\nimport { SecurityConfig } from '../security/security-config';\nimport { RoleManagerService } from '../security/role-manager.service';\nimport { UserAccount } from '../security/user-account';\n\nimport { AppProfileService } from './app-profile.service';\nimport { AppConfig } from './app.config';\nimport { AppProfile } from './app-profile';\n\n\ninterface ModuleConfigInstanceMap {\n  instance: any;\n  config: AutoConfigData;\n}\n\n\n/**\n * Application initialization service that is responsible for bootstrapping\n * the application.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class AppInitializerService {\n  private static readonly tokenExpireDateKey = 'token-expire-date';\n\n  ready = false;\n  loading = false;\n  onReady: Promise<AppProfile>;\n\n  private readonly moduleConfigInstances = new Map<string, ModuleConfigInstanceMap>();\n  private readonly queryParameters: any;\n  private resolveFn: (value?: AppProfile | PromiseLike<AppProfile>) => void;\n  private rejectFn: (reason?: any) => void;\n\n  constructor(\n    private router: Router,\n    private auth: AuthService,\n    private appProfiles: AppProfileService,\n    private log: Logger,\n    private config: AppConfig,\n    private storage: PersistentStorage,\n    private securityConfig: SecurityConfig,\n    private roleMgr: RoleManagerService,\n    private injector: Injector\n  ) {\n    this.queryParameters = getQueryParams();\n    this.onReady = new Promise<AppProfile>((resolve, reject) => {\n      this.resolveFn = resolve;\n      this.rejectFn = reject;\n    });\n  }\n\n  /**\n   * Initializes/bootstraps a standard TSS application.\n   */\n  initialize(): void {\n    const appId: string = this.config.appId;\n    const [firstRoutePath] = this.router.url.split('/');\n    const profileId: string = this.queryParameters.profileId\n      || firstRoutePath\n      || getFirstHashRoutePath(getFullUrl())\n      || this.config.defaultProfileId;\n\n    // We override module configurations here because the user may be trying to debug the session. The\n    // override has to happen again at the end of the process to override any settings that may have\n    // been set through the app initialization process.\n    this.overrideModuleConfigurationsFromQueryParams();\n\n    this.log.debug(`Initializing application with profile ID: ${profileId}`);\n\n    // We need to try and read any stored security token before we make\n    // a request to get profile info, so that the request is authenticated.\n    this.auth.loadStoredToken();\n    this.populateModuleConfigInstances();\n\n    if (!this.config.queryProfile || !this.config.hasServiceUrl) {\n      this.config.profile = {\n        name: '',\n        appId,\n        id: profileId,\n      };\n\n      this.log.debug(this.config.hasServiceUrl\n        ? `Profile query skipped due to configuration option`\n        : `No service URL configured, can't retrieve profile details - skipping profile retrieval`);\n\n      this.overrideModuleConfigurationsFromQueryParams();\n      this.ready = true;\n      this.resolveFn(this.config.profile);\n    } else {\n      this.loading = true;\n\n      // We need to try and read any stored security token before we make\n      // a request to get profile info, so that the request is authenticated.\n      this.queryProfile(profileId)\n        .then((profile: AppProfile) => this.resolveFn(profile))\n        .catch((err) => {\n          if (this.config.continueOnAppBootstrapError) {\n            this.resolveFn(this.config.profile);\n          } else {\n            this.rejectFn(err);\n          }\n        });\n    }\n  }\n\n  private queryProfile(profileId: string): Promise<AppProfile> {\n    return new Promise((resolve, reject) => {\n      this.appProfiles.get(profileId)\n        .subscribe((profile) => {\n          if (!profile) {\n            return reject(`No profile found with ID '${profileId}'`);\n          }\n\n          this.config.profileId = profile.id;\n          this.config.profile = profile;\n\n          this.checkTokenInvalidationDate();\n          this.applyModuleConfigurations();\n          this.overrideModuleConfigurationsFromQueryParams();\n          this.retrieveUserAccount()\n            .then(() => {\n              this.configureRoleManager();\n              this.ready = true;\n              this.loading = false;\n              resolve(profile);\n            })\n            .catch((err) => {\n              this.loading = false;\n              reject(err);\n            });\n        }, (err) => {\n          this.loading = false;\n          this.log.error(`Failed to retrieve application profile with app ID '${this.config.appId}' and ID '${profileId}'`);\n          reject(err);\n        });\n    });\n  }\n\n  /**\n   * Gets the date of the cached \"invalidation\" date.\n   * The invalidation date is used to let the server force users to re-authenticate.\n   */\n  private getCachedTokenInvalidationDate(): Date {\n    return new Date(this.storage.get(this.securityConfig.tokenInvalidationDateLookup));\n  }\n\n  /**\n   * Caches the \"invalidation\" date.\n   * The invalidation date is used to let the server force users to re-authenticate.\n   */\n  private setCachedTokenExpireDate(setDate?: string): void {\n    this.log.debug(`Setting cached token invalidation date: ${setDate}`);\n\n    if (setDate) {\n      this.log.debug(`Setting token invalidation date to: ${setDate}`);\n      this.storage.set(this.securityConfig.tokenInvalidationDateLookup, setDate);\n    } else {\n      this.storage.remove(this.securityConfig.tokenInvalidationDateLookup);\n    }\n  }\n\n  /**\n   * Compares the cached token validation data with the invalidation date from the server.\n   * If the invalidation date from the server is new than the cached date, then the user\n   * must be forcibly signed out.\n   */\n  private checkTokenInvalidationDate(): void {\n    let tokenExpireDate;\n    const siteInfo = this.config.profile && this.config.profile.app && this.config.profile.app.siteInfo\n      ? this.config.profile.app.siteInfo\n      : null;\n\n    if (siteInfo && siteInfo[AppInitializerService.tokenExpireDateKey]) {\n      const lastTokenInvalidateDate = this.getCachedTokenInvalidationDate();\n      tokenExpireDate = new Date(siteInfo[AppInitializerService.tokenExpireDateKey]);\n\n      // Note, we are setting milliseconds to 0 because we don't care about that level of accuracy.\n      // Also, the \"setMilliseconds\" method returns the \"timestamp\" so we can just compare those two results.\n      const lastTokenValidationDatesMatch = isDate(lastTokenInvalidateDate) && isDate(tokenExpireDate)\n        ? lastTokenInvalidateDate.setMilliseconds(0) === tokenExpireDate.setMilliseconds(0)\n        : lastTokenInvalidateDate === tokenExpireDate;\n\n      if (this.auth.account && this.auth.account.lastSignIn < tokenExpireDate && !lastTokenValidationDatesMatch) {\n        this.log.info('Signing out user due to token invalidation date from security configuration');\n        this.auth.onSignedOut();\n      } else if (this.auth.account) {\n        this.log.debug('User has been authenticated after the token invalidation date');\n      }\n\n      if (tokenExpireDate) {\n        this.setCachedTokenExpireDate(tokenExpireDate);\n      }\n    }\n  }\n\n  /**\n   * Retrieves the user account if the user is already signed in, logs the user out if\n   * the token is expired, or refreshes the user account information - depending on\n   * the configured authentication provider.\n   */\n  private retrieveUserAccount(): Promise<UserAccount> {\n    return new Promise((resolve, reject) => {\n      try {\n        let queryingInfo = false;\n        const app = this.config.profile && this.config.profile.app\n          ? this.config.profile.app : null;\n\n        // If the local auth status says that no one is logged in, but the service is recognizing that someone is\n        // logged in, then this means that authentication is happening through windows via Active Directory or some\n        // other means. We need to get the user info so we can set the app \"state\" as \"logged in\".\n        if (app && app.security && !this.auth.isAuthenticated && app.security.isAuthenticated) {\n          this.log.debug('Retrieving additional user info do to authentication state');\n          queryingInfo = true;\n          this.auth.getUserInfo().subscribe(info => {\n            const expiresDate = new Date();\n            expiresDate.setDate(expiresDate.getDate() + app.security.accessTokenExpireDays);\n            this.auth.onSignedIn(Object.assign({ '.expires': expiresDate }, info));\n            resolve(info);\n          }, err => {\n            reject(err);\n          });\n        } else if (this.auth.isAuthenticated && app.security && !app.security.isAuthenticated) {\n          this.log.debug(`Signing out user do to out of sync authentication state`);\n          // Sign out/clear the auth cache because the server says they don't know who this is, but\n          // the client side code thinks it knows who it is.\n          this.auth.onSignedOut();\n        }\n\n        if (!queryingInfo) {\n          this.log.debug(`No request made for additional user account info`);\n          resolve(this.auth.account);\n        }\n      } catch (e) {\n        this.log.error('Failed to do pre-verification of user on app load. {0}', e);\n        reject(e);\n      }\n    });\n  }\n\n  /**\n   * Set module configuration properties based on overrides from an object.\n   * This object can come from multiple places - such as the server or query params.\n   * See: the \"applyModuleConfigurations\" and \"overrideModuleConfigurations\" methods.\n   */\n  private applyModuleConfigurationsFromObject(sourceMapping: any) {\n    sourceMapping = sourceMapping || {};\n    this.moduleConfigInstances\n      .forEach(config => {\n        const moduleConfigName = config.config.className;\n        const configInstance = config.instance;\n\n        Object.keys(sourceMapping)\n          .forEach((key) => {\n            const value = toPrimitiveType(sourceMapping[key]);\n            const modulePrefix = lowerCaseFirst(moduleConfigName + '.');\n            const rootKey = key.replace(modulePrefix, ''); // Turn appConfig.foo.bar --> foo.bar\n\n            if (isValue(value) && key.toLowerCase().startsWith(modulePrefix.toLowerCase())) {\n              // A config object has properties in our siteInfo object.\n              this.log.debug(`Setting ${moduleConfigName} property '${rootKey}' to ${value}`);\n              setValue(configInstance, rootKey, value);\n            }\n          });\n      });\n  }\n\n  /**\n   * Set module configuration properties based on overrides from the server.\n   * This functionality lets us dynamically override client side configuration\n   * through the use of \"App Settings\" from the server.\n   */\n  private applyModuleConfigurations(): void {\n    const profile = this.config.profile;\n    if (!profile || !profile.app || !profile.app.siteInfo) {\n      return;\n    }\n\n    this.applyModuleConfigurationsFromObject(profile.app.siteInfo);\n  }\n\n  /**\n   * Set module configuration properties based on overrides from the URL query parameters.\n   * This functionality lets us dynamically override client side and server side configurations\n   * by passing explicit settings through query parameters. A good use case for this is to pass\n   * \"coreConfig.logLevel=1\" as a query parameter in production to debug an issue in a production\n   * environment.\n   */\n  private overrideModuleConfigurationsFromQueryParams() {\n    if (this.config.allowQueryParamInjections) {\n      this.applyModuleConfigurationsFromObject(this.queryParameters);\n    }\n  }\n\n  /**\n   * Instantiates instances of each configured module configuration object. Properties of\n   * these module config instances will later be set based on server-side overides.\n   */\n  private populateModuleConfigInstances(): void {\n    CoreConfig.moduleConfigs\n      .forEach(moduleAutoConfig => {\n        try {\n          // Reason: https://github.com/angular/angular/issues/22063\n          // tslint:disable-next-line\n          const configInstance = this.injector.get(moduleAutoConfig.injectorToken);\n          this.moduleConfigInstances.set(moduleAutoConfig.injectorToken, {\n            instance: configInstance,\n            config: moduleAutoConfig\n          });\n          this.log.debug(`Created module configuration instance for: ${moduleAutoConfig.className}`);\n\n          if ('serviceUrl' in configInstance || 'hasServiceUrl' in configInstance) {\n            configInstance.serviceUrl = this.config.serviceUrl;\n          }\n        } catch (err) {\n          this.log.error(`Failed to get module config: ${moduleAutoConfig.className}`, err);\n        }\n      });\n  }\n\n  /**\n   * Updates security options based on information retrieved form the application profile.\n   * For example, security may be enabled or disabled, guest roles will be set, etc.\n   */\n  private configureRoleManager(): void {\n    const security = this.config.profile && this.config.profile.app && this.config.profile.app.security\n      ? this.config.profile.app.security : null;\n\n    if (!security) {\n      return;\n    }\n\n    // We want to explicitly\n    if (security.hasOwnProperty('enabled')) {\n      this.securityConfig.rolesEnabled = !!security.enabled;\n    }\n\n    if (!this.roleMgr.enabled) {\n      this.log.warn('Security is disabled');\n    }\n\n    security.guestPrivileges = security.guestPrivileges || [];\n    this.roleMgr.addRoles(security.guestPrivileges);\n    this.log.info(`Configured default roles (guest roles) - total of ${security.guestPrivileges.length}`);\n    this.log.info(`User has a total of ${this.roleMgr.roleCount} roles assigned to them`);\n  }\n}\n\n/**\n * Application initialization factory that provides a hook into\n * the Angular bootstrapping process.\n */\nexport function AppInitializerFactory(injector: Injector): () => Promise<any> {\n  return (): Promise<AppProfile> => {\n    const initializer: AppInitializerService = injector.get(AppInitializerService);\n    initializer.initialize();\n\n    return initializer.onReady;\n  };\n}\n","export const ALL_APPS_QUERY_ID = 'all';\n\nexport interface AppProfile {\n  id: string;\n  appId: string;\n  name: string;\n  logo?: string;\n  theme?: string;\n  cssPath?: string;\n  jsPath?: string;\n  app?: any;\n  portalAppId?: string;\n}\n","import { PipeTransform, Pipe } from '@angular/core';\n\n@Pipe({ name: 'keys' })\nexport class KeysPipe implements PipeTransform {\n  transform(value: any): any {\n    const keys = [];\n    Object.keys(value)\n      .forEach(key => keys.push({ key, value: value[key] }));\n\n    return keys;\n  }\n}\n","import { PipeTransform, Pipe } from '@angular/core';\nimport { formatByteSize } from './format-byte-size.function';\n\n\n@Pipe({ name: 'fileSize' })\nexport class FileSizePipe implements PipeTransform {\n  transform(bytes: number = 0): string {\n    return formatByteSize(bytes);\n  }\n}\n","export const STANDARDIZED_QUERY_DATE_FORMAT = `timestamp '{date}'`;\nexport const ORACLE_DATE_FORMAT = `TO_DATE('{date}','YYYY-MM-DD HH24:MI:SS')`;\nexport const DEFAULT_DATE_FORMAT = 'yyyy-MM-dd HH:mm:ss';\nexport const HOURS_PER_DAY = 24;\nexport const MINUTES_PER_HOUR = 60;\nexport const SECONDS_PER_MINUTE = 60;\nexport const MILLISECONDS_PER_SECOND = 1000;\nexport const MILLISECONDS_PER_MINUTE = 60000;\nexport const MILLISECONDS_PER_HOUR = 3600000;\nexport const MILLISECONDS_PER_DAY = 86400000;\nexport const READABLE_TIME_SUFFIX_MAP = {\n  ms: 'ms',\n  msDecimalPlaces: 0,\n  sec: 'sec',\n  secDecimalPlaces: 0,\n  min: 'min',\n  minDecimalPlaces: 2,\n  hr: 'hr',\n  hrDecimalPlaces: 2,\n  days: 'days',\n  daysDecimalPlaces: 2,\n};\n","import { MILLISECONDS_PER_SECOND, MILLISECONDS_PER_MINUTE, MILLISECONDS_PER_HOUR, MILLISECONDS_PER_DAY } from '../date-time.constants';\nimport { TimeUnit } from '../time-unit';\n\n\nexport function toMilliseconds(value: number, unitOfTime: TimeUnit): number {\n  let conversionFactor: number;\n\n  if (unitOfTime === 'milliseconds') {\n    conversionFactor = 1;\n  } else if (unitOfTime === 'seconds') {\n    conversionFactor = MILLISECONDS_PER_SECOND;\n  } else if (unitOfTime === 'minutes') {\n    conversionFactor = MILLISECONDS_PER_MINUTE;\n  } else if (unitOfTime === 'hours') {\n    conversionFactor = MILLISECONDS_PER_HOUR;\n  } else if (unitOfTime === 'days') {\n    conversionFactor = MILLISECONDS_PER_DAY;\n  } else {\n    throw new Error(`Unsuported unit of time supplied: '${unitOfTime}'`);\n  }\n\n  return (value || 0) * conversionFactor;\n}\n","import { MILLISECONDS_PER_SECOND } from '../date-time.constants';\n\n\nexport function millisecondsToSeconds(milliseconds: number): number {\n  return milliseconds / MILLISECONDS_PER_SECOND;\n}\n","import { MILLISECONDS_PER_MINUTE } from '../date-time.constants';\n\n\nexport function millisecondsToMinutes(milliseconds: number): number {\n  return milliseconds / MILLISECONDS_PER_MINUTE;\n}\n","import { MILLISECONDS_PER_HOUR } from '../date-time.constants';\n\n\nexport function millisecondsToHours(milliseconds: number): number {\n  return milliseconds / MILLISECONDS_PER_HOUR;\n}\n","import { MILLISECONDS_PER_DAY } from '../date-time.constants';\n\n\nexport function millisecondsToDays(milliseconds: number): number {\n  return milliseconds / MILLISECONDS_PER_DAY;\n}\n","import { millisecondsToSeconds } from '../conversion/milliseconds-to-seconds.function';\nimport { millisecondsToMinutes } from '../conversion/milliseconds-to-minutes.function';\nimport { millisecondsToHours } from '../conversion/milliseconds-to-hours.function';\nimport { millisecondsToDays } from '../conversion/milliseconds-to-days.function';\nimport {\n  MILLISECONDS_PER_SECOND,\n  MILLISECONDS_PER_MINUTE,\n  MILLISECONDS_PER_HOUR,\n  MILLISECONDS_PER_DAY,\n  READABLE_TIME_SUFFIX_MAP\n} from '../date-time.constants';\n\n\nexport function toReadableTime(milliseconds: number, suffixMap: any = {}): string {\n  // TODO: Get rid of magic numbers below - RG.\n  const formatAsMilliseconds = milliseconds < MILLISECONDS_PER_SECOND;\n  const formatAsSeconds = milliseconds < (MILLISECONDS_PER_MINUTE - 1);\n  const formatAsMinutes = milliseconds < (MILLISECONDS_PER_HOUR - 299);\n  const formatAsHours = milliseconds < (MILLISECONDS_PER_DAY - 18000);\n  let value: number = milliseconds;\n  let unit: string;\n  let decimalPlaces: number;\n\n  suffixMap = suffixMap\n    ? Object.assign({}, READABLE_TIME_SUFFIX_MAP, suffixMap)\n    : READABLE_TIME_SUFFIX_MAP;\n\n  // We assume the milliseconds was passed in.\n  if (formatAsMilliseconds) {\n    // The time should be shown in milliseconds.\n    unit = suffixMap.ms;\n    value = milliseconds;\n    decimalPlaces = suffixMap.msDecimalPlaces;\n  } else if (formatAsSeconds) {\n    // The time should be shown in seconds.\n    const seconds = millisecondsToSeconds(milliseconds);\n    unit = suffixMap.sec;\n    value = seconds;\n    decimalPlaces = suffixMap.secDecimalPlaces;\n  } else if (formatAsMinutes) {\n    // The time should be shown in in minutes.\n    const minutes = millisecondsToMinutes(milliseconds);\n    unit = suffixMap.min;\n    value = minutes;\n    decimalPlaces = suffixMap.minDecimalPlaces;\n  } else if (formatAsHours) {\n    // The time should be shown in hours.\n    const hours = millisecondsToHours(milliseconds);\n    unit = suffixMap.hr;\n    value = hours;\n    decimalPlaces = suffixMap.hrDecimalPlaces;\n  } else {\n    // The time should be shown in days.\n    const days = millisecondsToDays(milliseconds);\n    unit = suffixMap.days;\n    value = days;\n    decimalPlaces = suffixMap.daysDecimalPlaces;\n  }\n\n  const numberWithStrippedZeros = Number(value.toFixed(decimalPlaces));\n  return `${numberWithStrippedZeros} ${unit}`;\n}\n","import { PipeTransform, Pipe } from '@angular/core';\nimport { TimeUnit } from '../time-unit';\nimport { toMilliseconds } from '../conversion/to-milliseconds.function';\nimport { toReadableTime } from './to-readable-time.function';\n\n\n@Pipe({ name: 'readableTime' })\nexport class ReadableTimePipe implements PipeTransform {\n  transform(time: number, unit: TimeUnit = 'milliseconds'): any {\n    const millis = toMilliseconds(time, unit);\n    return toReadableTime(millis);\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n\n@Pipe({ name: 'safeUrl' })\nexport class SafeUrlPipe implements PipeTransform {\n  constructor(private readonly sanitizer: DomSanitizer) { }\n  transform(url) {\n    return this.sanitizer.bypassSecurityTrustResourceUrl(url);\n  }\n}\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\n\nimport { KeysPipe } from './keys.pipe';\nimport { FileSizePipe } from './storage/file-size.pipe';\nimport { ReadableTimePipe } from './date-time/readable/readable-time.pipe';\nimport { SafeUrlPipe } from './safe-url.pipe';\n\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [\n    FileSizePipe,\n    KeysPipe,\n    ReadableTimePipe,\n    SafeUrlPipe,\n  ],\n  exports: [\n    FileSizePipe,\n    KeysPipe,\n    ReadableTimePipe,\n    SafeUrlPipe\n  ],\n  providers: [\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssCoreModule { }\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { TssCoreModule } from '../core/core.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    TssCoreModule,\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssGeometryModule { }\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { TssCoreModule } from '../core/core.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    TssCoreModule,\n    HttpClientModule,\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssDataSourceModule { }\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { TssCoreModule } from '../core/core.module';\nimport { TssDataSourceModule } from '../data-source/data-source.module';\n\n\n@NgModule({\n  imports: [\n    TssCoreModule,\n    TssDataSourceModule,\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssEsriModule { }\n","import { LayerRendererType } from './types';\n\n\nexport const LAYER_RENDER_TYPES: LayerRendererTypeDefinition[] = [\n  { alias: 'Single Value', renderType: 'simple', description: 'Displays a single symbology, regardless of values' },\n  { alias: 'Unique Value', renderType: 'uniqueValue', description: 'Displays different symbologies based on a unique value' },\n  { alias: 'Class Break', renderType: 'classBreaks', description: 'Displays different symbologies based on a classification of values' },\n];\n\nexport interface LayerRendererTypeDefinition {\n  alias: string;\n  renderType: LayerRendererType;\n  description: string;\n}\n","import { PipeTransform, Pipe } from '@angular/core';\nimport { LayerRendererType } from './types';\nimport { LAYER_RENDER_TYPES, LayerRendererTypeDefinition } from './layer-renderer-type-definition';\nimport { LayerDrawingInfoRenderer } from './layer-drawing-info-renderer';\nimport { isString } from '../../core/type-check/is-string.function';\n\n\n@Pipe({ name: 'layerRendererType' })\nexport class LayerRendererTypePipe implements PipeTransform {\n  transform(input: LayerRendererType | LayerDrawingInfoRenderer): string {\n    const renderType: LayerRendererType = isString(input)\n      ? input as LayerRendererType\n      : (input as LayerDrawingInfoRenderer).type;\n\n    const definition: LayerRendererTypeDefinition = LAYER_RENDER_TYPES\n      .find(t => t.renderType === renderType);\n\n    return definition.alias;\n  }\n}\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { TssCoreModule } from '../core/core.module';\nimport { LayerRendererTypePipe } from './drawing/layer-renderer-type.pipe';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    TssCoreModule,\n  ],\n  declarations: [\n    LayerRendererTypePipe\n  ],\n  exports: [\n    LayerRendererTypePipe\n  ],\n  providers: [\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssMapsModule { }\n","import { CommonModule } from '@angular/common';\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { TssCoreModule } from '../core/core.module';\nimport { TssDataSourceModule } from '../data-source/data-source.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    TssCoreModule,\n    TssDataSourceModule,\n    HttpClientModule,\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssLrsModule { }\n","// Angular.\nimport { Injectable } from '@angular/core';\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from '@angular/common/http';\n\n// 3rd party.\nimport { Observable } from 'rxjs';\n\n// TSS.\nimport { SecurityConfig } from './security-config';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TokenInterceptor implements HttpInterceptor {\n  constructor(private config: SecurityConfig) {\n\n  }\n\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    const withCredsExpr = new RegExp(this.config.withCredentialsInclusionExpression);\n    if (this.config.accessToken && new RegExp(this.config.tdsTokenInclusionExpression).test(request.url)) {\n      request = request.clone({\n        withCredentials: this.config.setWithCredentials && withCredsExpr.test(request.url),\n        setHeaders: {\n          Authorization: `${this.config.authorizationType} ${this.config.accessToken}`\n        }\n      });\n    } else if (this.config.setWithCredentials && withCredsExpr.test(request.url)) {\n      request = request.clone({\n        withCredentials: true\n      });\n    }\n\n    return next.handle(request);\n  }\n}\n","import { Directive, Input, TemplateRef, ViewContainerRef } from '@angular/core';\nimport { RoleManagerService } from './role-manager.service';\nimport { Logger } from '../core/logging/logger.service';\n\n\n@Directive({\n  // TODO: remove this once this is moved to it's own package - RG.\n  // tslint:disable-next-line\n  selector: '[hasRoles]'\n})\nexport class HasRolesDirective {\n\n  constructor(\n    private templateRef: TemplateRef<any>,\n    private viewContainer: ViewContainerRef,\n    private roleMgr: RoleManagerService,\n    private log: Logger) {\n  }\n\n  @Input() set hasRoles(roles: string | number) {\n    if (this.roleMgr.hasRoles(roles)) {\n      // If condition is true add template to DOM\n      this.viewContainer.createEmbeddedView(this.templateRef);\n      this.log.trace(`Granted access: ${roles}`);\n    } else {\n      // Else remove template from DOM\n      this.viewContainer.clear();\n      this.log.trace(`Denied access: ${roles}`);\n    }\n  }\n}\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { HTTP_INTERCEPTORS, HttpClientModule } from '@angular/common/http';\n\nimport { TssCoreModule } from '../core/core.module';\nimport { TokenInterceptor } from './token.interceptor';\nimport { HasRolesDirective } from './has-roles.directive';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    FormsModule,\n    TssCoreModule\n  ],\n  declarations: [\n    HasRolesDirective,\n  ],\n  exports: [\n    HasRolesDirective,\n  ],\n  providers: [\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: TokenInterceptor,\n      multi: true\n    }\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssSecurityModule { }\n","import { Input, Directive, HostListener } from '@angular/core';\n\n\n@Directive({\n  // TODO: remove this once this is moved to it's own package - RG.\n  // tslint:disable-next-line\n  selector: '[href]'\n})\nexport class PreventDefaultLinkDirective {\n  @Input() href;\n\n  @HostListener('click', ['$event'])\n  preventDefault(event) {\n    if (!this.href.length) {\n      event.preventDefault();\n    }\n  }\n}\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { PreventDefaultLinkDirective } from './prevent-default-link.directive';\n\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [\n    PreventDefaultLinkDirective,\n  ],\n  exports: [\n    PreventDefaultLinkDirective,\n  ],\n  providers: [\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssPolyfillModule { }\n","// Angular.\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n\n/**\n * Queue module provides data queueing and core unit of work queue functionality.\n */\n@NgModule({\n  imports: [\n    CommonModule,\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssQueueModule { }\n","import { isType } from './is-type.function';\n\n\nexport function isFunction(val: any): boolean {\n  return isType(val, 'function');\n}\n","import { RouteExpression } from './route-expression';\nimport { isFunction } from '../core/type-check/is-function.function';\nimport { isString } from '../core/type-check/is-string.function';\nimport { replaceTokens } from '../core/tokens/replace-tokens.function';\n\n\nexport function isRouteMatch(route: string, routeExpression: RouteExpression): boolean {\n  let exp: RegExp;\n\n  if (isFunction(routeExpression)) {\n    return Boolean((routeExpression as (url: string) => boolean)(route));\n  }\n\n  if (isString(routeExpression)) {\n    // NOTE: We are replacing the friendly route matching with real regex.\n    const wildcardExp = new RegExp('[*]', 'gi');\n    const routeAsString = routeExpression as string;\n    const resolvedRoute = replaceTokens(routeAsString, '*')\n      .replace(wildcardExp, '.*');\n\n    exp = new RegExp(resolvedRoute, 'i');\n  } else {\n    exp = routeExpression as RegExp;\n  }\n\n  return exp.test(route);\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// TSS.\nimport { AutoConfig } from '../core/auto-config.decorator';\nimport { HttpParamInjectionDefinition } from './http-param-injection-definition';\nimport { isRouteMatch } from './is-route-match.function';\nimport { RouteExpression } from './route-expression';\n\n\n/**\n * Configuration class for storing global data caching settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('HttpConfig')\nexport class HttpConfig {\n  get hasInjections(): boolean {\n    return Boolean(this.paramInjectionDefitions.length);\n  }\n\n  paramInjectionsEnabled = true;\n  paramInjectionDefitions: HttpParamInjectionDefinition[] = [];\n\n  addOrUpdateParameterInjection(route: RouteExpression, paramName: string, paramValue: string): HttpParamInjectionDefinition {\n    const definition: HttpParamInjectionDefinition = {\n      route,\n      paramName,\n      paramValue\n    };\n\n    const existingDefinition = this.paramInjectionDefitions.find(def => def.route === route && def.paramName === paramName);\n    if (existingDefinition) {\n      Object.assign(existingDefinition, definition);\n      return existingDefinition;\n    } else {\n      this.paramInjectionDefitions.push(definition);\n      return definition;\n    }\n  }\n\n  addParameterInjection(route: RouteExpression, paramName: string, paramValue: string): HttpParamInjectionDefinition {\n    const definition = {\n      route,\n      paramName,\n      paramValue\n    };\n\n    this.paramInjectionDefitions.push(definition);\n    return definition;\n  }\n\n  getInjectionDefinitions(route: string): HttpParamInjectionDefinition[] {\n    return this.paramInjectionDefitions.filter(def => isRouteMatch(route, def.route));\n  }\n\n  getFirstInjectionDefinition(route: string): HttpParamInjectionDefinition {\n    return this.paramInjectionDefitions.find(def => isRouteMatch(route, def.route));\n  }\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from '@angular/common/http';\n\n// 3rd Party.\nimport { Observable } from 'rxjs';\n\n// TSS.\nimport { Logger } from '../core/logging/logger.service';\nimport { HttpConfig } from './http.config';\nimport { HttpParamInjectionDefinition } from './http-param-injection-definition';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class HttpParamInterceptor implements HttpInterceptor {\n  constructor(private config: HttpConfig, private log: Logger) {\n  }\n\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    const httpParamInjections: HttpParamInjectionDefinition[] = this.config.paramInjectionsEnabled\n      ? this.config.getInjectionDefinitions(request.urlWithParams)\n      : [];\n\n    if (httpParamInjections.length) {\n      request = this.generateRequestWithParams(request, httpParamInjections);\n    }\n\n    return next.handle(request);\n  }\n\n  generateRequestWithParams(request: HttpRequest<any>, httpParamInjections: HttpParamInjectionDefinition[]): HttpRequest<any> {\n    let params = request.params;\n    httpParamInjections\n      .forEach(paramInjection => {\n        this.log.debug(`Injecting URL '${request.url}' with parameter value (name: '${paramInjection.paramName}')`);\n        params = params.set(paramInjection.paramName, paramInjection.paramValue);\n      });\n\n    return request.clone({ params });\n  }\n}\n","// Angular.\nimport { CommonModule } from '@angular/common';\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\n\n// TSS\nimport { TssCoreModule } from '../core/core.module';\nimport { HttpParamInterceptor } from './http-param.interceptor';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    TssCoreModule,\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: HttpParamInterceptor,\n      multi: true\n    }\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssHttpModule { }\n","import { NgModule, Injector, CUSTOM_ELEMENTS_SCHEMA, APP_INITIALIZER } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\nimport { RouterModule } from '@angular/router';\n\nimport { TssCoreModule } from '../core/core.module';\nimport { TssSecurityModule } from '../security/security.module';\nimport { TssDataSourceModule } from '../data-source/data-source.module';\nimport { TssPolyfillModule } from '../polyfill/polyfill.module';\nimport { AppConfig } from './app.config';\nimport { AppInitializerFactory, AppInitializerService } from './app-initializer.service';\nimport { AppProfileService } from './app-profile.service';\nimport { ApiService } from './api.service';\nimport { TssQueueModule } from '../queuing/queue.module';\nimport { TssHttpModule } from '../http/http.module';\n\n\n@NgModule({\n  imports: [\n    HttpClientModule,\n    RouterModule,\n    TssCoreModule,\n    TssPolyfillModule,\n    TssHttpModule,\n    TssDataSourceModule,\n    TssQueueModule,\n    TssSecurityModule,\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n    AppProfileService,\n    ApiService,\n    AppInitializerService,\n    {\n      provide: APP_INITIALIZER,\n      useFactory: AppInitializerFactory,\n      multi: true,\n      deps: [Injector]\n    }\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssAppModule {\n}\n","// Angular.\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\n\n// TSS.\nimport { TssGeometryModule } from '../geometry/geometry.module';\nimport { TssEsriModule } from '../esri/esri.module';\nimport { TssMapsModule } from '../maps/map.module';\nimport { TssLrsModule } from '../lrs/lrs.module';\nimport { TssAppModule } from './app.module';\n\n\n@NgModule({\n  imports: [\n    TssAppModule,\n    TssEsriModule,\n    TssGeometryModule,\n    TssMapsModule,\n    TssLrsModule,\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssAppSpatialModule {\n}\n","export const ALL_APP_SETTINGS_QUERY_ID = 'all';\n\n\nexport interface AppSetting {\n  id: string;\n  name: string;\n  value: string;\n  description?: string;\n  appId?: string;\n  placeholderText?: string;\n  order?: string;\n  isPublic?: boolean;\n  isEncrypted?: boolean;\n  preventEdit?: boolean;\n  inputType?: string;\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\n\n// 3rd party.\nimport { Observable } from 'rxjs';\n\n// TSS.\nimport { BaseResourceService } from '../../core/resource/base-resource.service';\nimport { AppSetting, ALL_APP_SETTINGS_QUERY_ID } from './app-setting';\nimport { AppConfig } from '../app.config';\nimport { join } from '../../core/url/join.function';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AppSettingService extends BaseResourceService<AppSetting> {\n  constructor(protected http: HttpClient, config: AppConfig) {\n    super(http, {\n      url: join(config.serviceUrl, config.appSettingsEndpoint),\n      defaultRouteTokens: {\n        appId: config.appId\n      }\n    });\n  }\n\n  /**\n   * Retrieves a list of application settings.\n   */\n  queryAllApps(routeTokens?: any, params?: HttpParams): Observable<AppSetting[]> {\n    routeTokens = routeTokens || {};\n    routeTokens.appId = ALL_APP_SETTINGS_QUERY_ID;\n    return super.query(routeTokens, params);\n  }\n}\n","/**\n * The storage persistance mechanism to use when storing cached data.\n * * inMemory: Only caches data in the users immediate session. Closing and re-opening\n *             the browser window will not keep the cached data.\n * * persistent: Persists the cache data across sessions. This can resolve to any\n *               number of storage mechasims (such as local storage, indexDb, etc).\n */\nexport enum CachePersistence {\n  Persistent = 'persistent',\n  InMemory = 'in-memory',\n}\n","/**\n * The Strategy to use when retrieving and caching data.\n * * networkFirst: Go to the network then go to the cache.\n * * cacheFirst: Go to the cache first and then go to the network for data.\n * * fastest: Use whichever strategy comes back first (a race).\n * * cacheOnly: Only look into the cache for data, never make network request.\n */\nexport enum CacheStrategy {\n  NetworkFirst = 'network-first',\n  CacheFirst = 'cache-first',\n  Fastest = 'fastest',\n  CacheOnly = 'cache-only',\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// TSS.\nimport { AutoConfig } from '../core/auto-config.decorator';\nimport { isRouteMatch } from '../http/is-route-match.function';\nimport { CacheDefinition } from './cache-definition';\nimport { CacheStrategy } from './cache-strategy';\nimport { CacheConfigOptions } from './cache-config-options';\n\n\n/**\n * Configuration class for storing global data caching settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('CacheConfig')\nexport class CacheConfig {\n  /**\n   * Determines whether caching should be used or not. When disabled, all\n   * caching-related functionality is ignored (not used).\n   */\n  cacheEnabled = false;\n\n  /**\n   * List of configurations that describe what to cache and how to cache it.\n   * The main parts of this configuration include the \"route\" (how to match what\n   * to cache) and the \"strategy\" (whether to look for content in the cache first\n   * or try to make the HTTP request first).\n   */\n  cacheDefitions: CacheDefinition[] = [];\n\n  /**\n   * When set, this strategy will trump all strategies defined in the \"Cache Defintions\".\n   * WARNING: This is a global setting and can have adverse affects when used improperly.\n   * The main use case for this setting is to allow for the global cache strategy of\n   * 'cacheOnly', which will allow an application to force an \"offline\" state (forcing\n   * requests to pull from cache only).\n   */\n  forcedGlobalCacheStrategy: CacheStrategy = null;\n\n  static create(config: CacheConfigOptions): CacheConfig {\n    return Object.assign(new CacheConfig(), config);\n  }\n\n  static enable(...defs: CacheDefinition[]): CacheConfig {\n    return CacheConfig.create({\n      cacheEnabled: true,\n      cacheDefitions: defs,\n    });\n  }\n\n  getCacheDefinition(route: string): CacheDefinition {\n    return this.cacheDefitions.find(def => isRouteMatch(route, def.route));\n  }\n}\n","export const CACHE_ONLY_NO_DATA_EXC_MSG = 'No cache available';\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// TSS.\nimport { PersistentStorage } from '../core/storage/persistent-storage.service';\n\n\nexport const CACHE_STORAGE_KEY_PREFIX = 'http-cache:';\n\n\n/**\n * Configuration class for storing global data caching settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class PersistentCacheStorage extends PersistentStorage {\n  constructor() {\n    super();\n    this.keyPrefix = CACHE_STORAGE_KEY_PREFIX;\n  }\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\nimport { HttpResponse } from '@angular/common/http';\n\n// 3rd Party.\nimport { PersistentCacheStorage } from './cache.storage';\nimport { CacheContent } from './cache-content';\n\n\n/**\n * Cache Service is an observables based in-memory cache implementation\n * Keeps track of in-flight observables and sets a default expiry for cached values\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class CacheService {\n  constructor(private cache: PersistentCacheStorage) {\n  }\n\n  get(key: string): HttpResponse<any> {\n    const cacheItem: CacheContent = this.cache.getObject(key);\n    const now = new Date();\n    let cacheData: HttpResponse<any>;\n\n    if (cacheItem && cacheItem.expires && cacheItem.expires.getTime() < now.getTime()) {\n      this.cache.remove(key);\n    } else if (cacheItem) {\n      // NOTE: We can't just pull the serialized data, because\n      // we need an actual instance of the HttpResponse class.\n      cacheData = Object.assign(new HttpResponse<any>(), cacheItem.value);\n    } else {\n      cacheData = null;\n    }\n\n    return cacheData;\n  }\n\n  set(key: string, value: HttpResponse<any>, timeToLive: number = null) {\n    const expires = timeToLive ? this.getExpireDate(timeToLive) : null;\n    const cacheData: CacheContent = { expires, value };\n\n    this.cache.setObject(key, cacheData);\n  }\n\n  has(key: string): boolean {\n    return this.cache.has(key);\n  }\n\n  private getExpireDate(timeToLive: number = null): Date {\n    const expires = new Date();\n    expires.setSeconds(expires.getSeconds() + timeToLive);\n\n    return expires;\n  }\n}\n","import { TOKEN_EXPRESSION } from './tokens.constants';\n\n\nexport function hasTokens(template: string): boolean {\n  return TOKEN_EXPRESSION.test(template);\n}\n","export function standardizeTokens(template: string): string {\n  return (template || '').replace(/{{/gi, '{').replace(/}}/gi, '}');\n}\n","export function stripTokenBraces(value: string): string {\n  return (value || '')\n    .replace(new RegExp('{', 'gi'), '')\n    .replace(new RegExp('}', 'gi'), '');\n}\n","import { standardizeTokens } from './standardize-tokens.function';\nimport { replaceTokens } from './replace-tokens.function';\nimport { WILDCARD_EXPRESSION_VALUE, TOKEN_EXPRESSION } from './tokens.constants';\nimport { stripTokenBraces } from './strip-token-braces.function';\n\n\nexport function extractTokenValuesFromTemplate(template: string, resolvedPath: string): {} {\n  const tokens = {};\n  template = standardizeTokens(template);\n  const wildcardTemplate = replaceTokens(template, WILDCARD_EXPRESSION_VALUE);\n  const parts = new RegExp(wildcardTemplate).exec(resolvedPath);\n\n  if (parts && parts.length) {\n    const tokensList = template.match(TOKEN_EXPRESSION);\n\n    // Get rid of the full match.\n    parts.shift();\n\n    parts.forEach((templateValue: string, index: number) => {\n      if (tokensList[index]) {\n        const key = stripTokenBraces(tokensList[index]);\n        tokens[key] = (templateValue || '').replace(new RegExp('/', 'gi'), '');\n      }\n    });\n  }\n\n  return tokens;\n}\n","// Angualr.\nimport { Injectable } from '@angular/core';\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor, HttpResponse } from '@angular/common/http';\n\n// 3rd Party.\nimport { Observable, of, throwError } from 'rxjs';\nimport { tap, catchError } from 'rxjs/operators';\n\n// TSS.\nimport { CacheService } from './cache.service';\nimport { CacheConfig } from './cache.config';\nimport { Logger } from '../core/logging/logger.service';\nimport { CacheStrategy } from './cache-strategy';\nimport { CacheDefinition } from './cache-definition';\nimport { hasTokens } from '../core/tokens/has-tokens.function';\nimport { isString } from '../core/type-check/is-string.function';\nimport { extractTokenValuesFromTemplate } from '../core/tokens/extract-token-values-from-template.function';\nimport { format } from '../core/formatting/format.function';\nimport { CACHE_ONLY_NO_DATA_EXC_MSG } from './cache.constants';\n\n\nfunction shouldCheckCacheFirst(strategy: CacheStrategy) {\n  return strategy === CacheStrategy.CacheFirst\n    || strategy === CacheStrategy.Fastest\n    || strategy === CacheStrategy.CacheOnly;\n}\n\nfunction getCacheKey(definition: CacheDefinition, requestUrl: string): string {\n  let cacheKey = definition.cacheId || requestUrl;\n  if (hasTokens(cacheKey) && isString(definition.route)) {\n    const tokenValues = extractTokenValuesFromTemplate(definition.route as string, requestUrl);\n    cacheKey = format(cacheKey, tokenValues, true);\n  }\n\n  return cacheKey;\n}\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CacheInterceptor implements HttpInterceptor {\n  constructor(private config: CacheConfig, private cache: CacheService, private log: Logger) {\n  }\n\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    const allowCaching = request.method === 'GET' && this.config.cacheEnabled;\n    let matchingCacheDefinition: CacheDefinition;\n\n    // TODO: Handle request method type.\n    // TDOO: Handle global use cache only.\n\n    if (allowCaching) {\n      matchingCacheDefinition = this.config.getCacheDefinition(request.urlWithParams);\n      const strategy: CacheStrategy = matchingCacheDefinition\n        ? this.config.forcedGlobalCacheStrategy || matchingCacheDefinition.strategy\n        : null;\n\n      if (matchingCacheDefinition && shouldCheckCacheFirst(strategy)) {\n        const cacheKey = getCacheKey(matchingCacheDefinition, request.url);\n        const isCacheOnly = strategy === CacheStrategy.CacheOnly;\n        const cachedResponse: HttpResponse<any> = this.cache.get(cacheKey);\n\n        if (cachedResponse) {\n          this.log.debug(`Resolving HTTP request from cache: '${request.url}'`);\n          return of(cachedResponse);\n        } else if (isCacheOnly) {\n          return throwError(new Error(CACHE_ONLY_NO_DATA_EXC_MSG));\n        }\n      }\n    }\n\n    this.log.trace(`Making HTTP request: '${request.url}'`);\n    let continuedResponse: Observable<HttpEvent<any>> = next.handle(request);\n\n    // If a matched cache definition is found, then we need to handle caching when the request when it is complete.\n    if (allowCaching && matchingCacheDefinition) {\n      continuedResponse = this.cacheResponse(continuedResponse, request, matchingCacheDefinition);\n    }\n\n    return continuedResponse;\n  }\n\n  private cacheResponse(\n    source: Observable<HttpEvent<any>>,\n    request: HttpRequest<any>,\n    cacheDefinition: CacheDefinition\n  ): Observable<HttpEvent<any>> {\n    const cacheKey = getCacheKey(cacheDefinition, request.url);\n    return source.pipe(\n      tap(event => {\n        if (cacheDefinition && event instanceof HttpResponse) {\n          this.log.debug(`Caching HTTP request: '${request.url}'`);\n          this.cache.set(cacheKey, event, cacheDefinition.expires);\n        }\n      }),\n      catchError((error: any) => {\n        const cachedData = this.cache.get(cacheKey);\n        if (cachedData) {\n          this.log.debug(`Failed to resolve cacheable HTTP request from URL '${request.url}', fallingback to cache`);\n          return of(cachedData);\n        } else {\n          this.log.debug(`Failed to resolve cacheable HTTP request from URL '${request.url}' and no cached data available`);\n          throw error;\n        }\n      })\n    );\n  }\n}\n","// Angular.\nimport { CommonModule } from '@angular/common';\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\n\n// TSS\nimport { CacheService } from './cache.service';\nimport { CacheInterceptor } from './cache.interceptor';\nimport { CacheConfig } from './cache.config';\nimport { PersistentCacheStorage } from './cache.storage';\nimport { TssCoreModule } from '../core/core.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    TssCoreModule,\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n    CacheConfig,\n    PersistentCacheStorage,\n    CacheService,\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: CacheInterceptor,\n      multi: true\n    }\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssCacheModule { }\n","export function addIfNotExist<T>(list: T[], ...itemsToAdd: T[]): void {\n  itemsToAdd.forEach(item => {\n    if (list.indexOf(item) === -1) {\n      list.push(item);\n    }\n  });\n}\n","export function addRangeToBeginning<T>(list: T[], itemsToAdd: T[]): void {\n  list.unshift(...itemsToAdd);\n}\n","export function addRange<T>(list: T[], itemsToAdd: T[]): void {\n  list.push(...itemsToAdd);\n}\n","export function removeDuplicates<T>(list: T[]): T[] {\n  return list\n    .filter((element: T, position: number, filteredList: T[]) =>\n      filteredList.indexOf(element) === position);\n}\n","export function removeItem<T>(list: T[], ...itemsToDelete: T[]): void {\n  itemsToDelete.forEach(itemToDelete => {\n    const index = list.indexOf(itemToDelete);\n    const numberOfItemsToRemove = 1;\n    if (index > -1) {\n      list.splice(index, numberOfItemsToRemove);\n    }\n  });\n}\n","import { removeItem } from './remove-item.function';\n\n\nexport function removeWhere<T>(list: T[], predicate: (item: T) => boolean): void {\n  const itemsToRemove = list.filter(t => predicate(t));\n  removeItem(list, ...itemsToRemove);\n}\n","export function clone<T>(objectToClone: T): T {\n  return JSON.parse(JSON.stringify(objectToClone));\n}\n","export function hexToRgb(hex: string): [number, number, number] {\n  // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n  const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  let result = null;\n  hex = hex.replace(shorthandRegex, (_, red, green, blue) => {\n    return red + red + green + green + blue + blue;\n  });\n\n  const matchResult = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  if (matchResult) {\n    const red = parseInt(matchResult[1], 16);\n    const blue = parseInt(matchResult[2], 16);\n    const green = parseInt(matchResult[3], 16);\n    result = [red, blue, green];\n  }\n\n  return result;\n}\n","export function isHexColor(colorTest: string) {\n  return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(colorTest);\n}\n","export function rgbToHex(rgb: [number, number, number]): string {\n  const red = rgb[0];\n  const green = rgb[1];\n  const blue = rgb[2];\n\n  // tslint:disable-next-line\n  return `#${((1 << 24) + (red << 16) + (green << 8) + blue).toString(16).slice(1)}`;\n}\n","export function transparencyToOpacity(transparency: number) {\n  return 1 - (transparency * 0.01);\n}\n","/**\n * Given a cookie key `name`, returns the value of\n * the cookie or `null`, if the key is not found.\n */\nexport function getCookie(name: string): string {\n  const nameMatchLength = name.length + 1;\n  return document.cookie\n    .split(';')\n    .map(c => c.trim())\n    .filter(cookie =>\n      cookie.substring(0, nameMatchLength) === `${name}=`\n    )\n    .map(cookie =>\n      decodeURIComponent(cookie.substring(nameMatchLength))\n    )[0] || null;\n}\n","export function addMilliseconds(milliseconds: number, date?: Date): Date {\n  date = date || new Date();\n  const time = date.getTime();\n  const newTime = time + milliseconds;\n  date.setTime(newTime);\n\n  return date;\n}\n","import { addMilliseconds } from './add-milliseconds.function';\nimport { MILLISECONDS_PER_MINUTE } from '../date-time.constants';\n\n\nexport function addMinutes(minutes: number, date?: Date): Date {\n  return addMilliseconds(minutes * MILLISECONDS_PER_MINUTE, date);\n}\n","import { addMinutes } from './add-minutes.function';\nimport { HOURS_PER_DAY } from '../date-time.constants';\n\n\nexport function addDays(days: number, date?: Date): Date {\n  return addMinutes(days * HOURS_PER_DAY, date);\n}\n","import { addMinutes } from './add-minutes.function';\nimport { MINUTES_PER_HOUR } from '../date-time.constants';\n\n\nexport function addHours(hours: number, date?: Date): Date {\n  return addMinutes(hours * MINUTES_PER_HOUR, date);\n}\n","import { MILLISECONDS_PER_SECOND } from '../date-time.constants';\nimport { addMilliseconds } from './add-milliseconds.function';\n\n\nexport function addSeconds(seconds: number, date?: Date): Date {\n  return addMilliseconds(seconds * MILLISECONDS_PER_SECOND, date);\n}\n","export function toUtcDate(date: Date): Date {\n  return new Date(\n    date.getUTCFullYear(),\n    date.getUTCMonth(),\n    date.getUTCDate(),\n    date.getUTCHours(),\n    date.getUTCMinutes(),\n    date.getUTCSeconds()\n  );\n}\n","// Angular.\nimport { DatePipe } from '@angular/common';\n\n// TSS.\nimport { DEFAULT_DATE_FORMAT, STANDARDIZED_QUERY_DATE_FORMAT, ORACLE_DATE_FORMAT } from '../date-time.constants';\nimport { format } from '../../formatting/format.function';\n\n\nexport function formatDate(date: Date, dateFormat: string = DEFAULT_DATE_FORMAT): string {\n  const dateTransformer = new DatePipe('en-US');\n\n  if (dateFormat === STANDARDIZED_QUERY_DATE_FORMAT || dateFormat === ORACLE_DATE_FORMAT) {\n    return format(dateFormat, {\n      date: dateTransformer.transform(date, DEFAULT_DATE_FORMAT)\n    });\n  }\n\n  const formattedDate = dateTransformer.transform(date, dateFormat);\n  return `${formattedDate}`;\n}\n","import { STANDARDIZED_QUERY_DATE_FORMAT } from '../date-time.constants';\nimport { toUtcDate } from './to-utc-date.function';\nimport { formatDate } from '../format/format-date.function';\n\n\nexport function toStandardizedQueryDateFormat(date: Date): string {\n  // Attribute query expects UTC time, so convert from local time.\n  // The date formatter uses local time, so create a new Date object\n  // whose local time is set to UTC time from the input date.\n  date = toUtcDate(date);\n  return formatDate(date, STANDARDIZED_QUERY_DATE_FORMAT);\n}\n","import { toUtcDate } from './to-utc-date.function';\n\n\nexport function toUtcEpochDate(date: Date): number {\n  return toUtcDate(date).getTime();\n}\n","import { STANDARDIZED_QUERY_DATE_FORMAT, ORACLE_DATE_FORMAT, DEFAULT_DATE_FORMAT } from '../date-time.constants';\nimport { formatDate } from './format-date.function';\n\n\nexport function formatDateForQuery(date: Date, dateFormat: string = DEFAULT_DATE_FORMAT): string {\n  let quoteDate = true;\n  if (dateFormat === STANDARDIZED_QUERY_DATE_FORMAT || dateFormat === ORACLE_DATE_FORMAT) {\n    quoteDate = false;\n  }\n\n  const formattedDate = formatDate(date, dateFormat);\n  return quoteDate ? `'${formattedDate}'` : `${formattedDate}`;\n}\n","export enum SqlDateFormat {\n  Standardized,\n  Literal,\n  Oracle\n}\n","import { toUtcDate } from './conversion/to-utc-date.function';\n\n\nexport function getCurrentDateAsUtc(): Date {\n  return toUtcDate(new Date());\n}\n","import { toUtcDate } from './conversion/to-utc-date.function';\n\n\nexport function getCurrentDateEpochAsUtc(): number {\n  return toUtcDate(new Date()).getTime();\n}\n","export function getElapsedMilliseconds(start: Date, end?: Date) {\n  end = end || new Date();\n  return Math.abs(start.getTime() - end.getTime());\n}\n","import { getElapsedMilliseconds } from './get-elapsed-milliseconds.function';\n\n\nexport function getElapsedSeconds(start: Date, end?: Date) {\n  return getElapsedMilliseconds(start, end) / 1000;\n}\n","import { toReadableTime } from './to-readable-time.function';\nimport { MILLISECONDS_PER_SECOND } from '../date-time.constants';\n\n\nexport function secondsToReadableTime(seconds: number, suffixMap: any = {}): string {\n  return toReadableTime(seconds * MILLISECONDS_PER_SECOND, suffixMap);\n}\n","export function setDateToBeginningOfDay(date: Date): void {\n  date.setHours(0, 0, 0, 0);\n}\n","export function setDateToEndOfDay(date: Date): void {\n  date.setHours(23, 59, 59);\n}\n","import { addDays } from '../add/add-days.function';\n\n\nexport function subtractDays(days: number, date?: Date): Date {\n  return addDays(days * -1, date);\n}\n","import { addMinutes } from '../add/add-minutes.function';\n\n\nexport function subtractMinutes(minutes: number, date?: Date): Date {\n  return addMinutes(minutes * -1, date);\n}\n","import { addSeconds } from '../add/add-seconds.function';\n\n\nexport function subtractSeconds(minutes: number, date?: Date): Date {\n  return addSeconds(minutes * -1, date);\n}\n","import { addHours } from '../add/add-hours.function';\n\n\nexport function subtractHours(hours: number, date?: Date): Date {\n  return addHours(hours * -1, date);\n}\n","import { addMilliseconds } from '../add/add-milliseconds.function';\n\n\nexport function subtractMilliseconds(milliseconds: number, date?: Date): Date {\n  return addMilliseconds(milliseconds * -1, date);\n}\n","import { hasWindow } from './has-window.function';\n\n\nexport function hasLocalStorage(): boolean {\n  return hasWindow() && Boolean(window.localStorage);\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// 3rd party.\nimport { Subject, Observable } from 'rxjs';\n\n\ndeclare const window: any;\n\n@Injectable({ providedIn: 'root' })\nexport class OnlineOfflineService {\n  readonly connectionChanged: Observable<boolean>;\n  private readonly internalConnectionChanged: Subject<boolean>;\n\n  get isOnline() {\n    return !!window.navigator.onLine;\n  }\n\n  constructor() {\n    this.internalConnectionChanged = new Subject<boolean>();\n    this.connectionChanged = this.internalConnectionChanged.asObservable();\n\n    window.addEventListener('online', () => this.updateOnlineStatus());\n    window.addEventListener('offline', () => this.updateOnlineStatus());\n  }\n\n  private updateOnlineStatus() {\n    this.internalConnectionChanged.next(window.navigator.onLine);\n  }\n}\n","export const DEFAULT_POINT_EQUALITY_PRECISION = 7;\n","import { DEFAULT_POINT_EQUALITY_PRECISION } from './equality.constants';\n\n/**\n * Returns true if the two arguments are equal within the given precision.\n */\nexport function almostEqual(number1: number, number2: number, precision = DEFAULT_POINT_EQUALITY_PRECISION): boolean {\n  const tolerance = 0.5 * Math.pow(10, -precision);\n  return Math.abs(number1 - number2) < tolerance;\n}\n\n","import { almostEqual } from './almost-equal.function';\nimport { DEFAULT_POINT_EQUALITY_PRECISION } from './equality.constants';\n\n\nexport function pointsAlmostEqual(x1: number, y1: number, x2: number, y2: number, precision = DEFAULT_POINT_EQUALITY_PRECISION): boolean {\n  return almostEqual(x1, x2, precision) && almostEqual(y1, y2, precision);\n}\n","export const DEFAULT_ERROR_MSG = 'An error occurred';\n","import { DEFAULT_ERROR_MSG } from './error.constants';\nimport { format } from '../formatting/format.function';\nimport { isString } from '../type-check/is-string.function';\n\n\nexport function errorMsg(errorOrMsg: any, error?: any): string {\n  let exceptionDetails;\n\n  errorOrMsg = errorOrMsg || DEFAULT_ERROR_MSG;\n  if (isString(errorOrMsg)) {\n    exceptionDetails = error ? errorMsg(error) : '';\n\n    return format(errorOrMsg, { error: exceptionDetails });\n  }\n\n  return errorMsg(\n    errorOrMsg.innerException\n    || errorOrMsg.InnerException\n    || errorOrMsg.exceptionMessage\n    || errorOrMsg.ExceptionMessage\n    || errorOrMsg.message\n    || errorOrMsg.Message\n    || errorOrMsg.msg\n    || errorOrMsg.Msg\n    || errorOrMsg.error_description\n    || errorOrMsg.error\n    || errorOrMsg.Error\n    || errorOrMsg.data\n    || errorOrMsg.Data\n    || errorOrMsg.exception\n    || errorOrMsg.Exception);\n}\n","import { DecimalPipe } from '@angular/common';\n\n\nexport function formatNumber(value: any, digits?: string, locale?: string): string | null {\n  return new DecimalPipe('en-US').transform(value, digits, locale);\n}\n","export const FIRST_LETTER_SEPERATED_BY_SPACE_MATCH_REGEX = /^[a-z]|\\s[a-z]/gm;\nexport const PASCAL_CASE_FIRST_LETTER_MATCH_REGEX = /(?=[A-Z])/;\nexport const LEADING_AND_TRAILING_UNDERSCORE_MATCH_REGEX = /^[\\s_]+|[\\s_]+$/gm;\nexport const LEADING_AND_TRAILING_HYPHEN_MATCH_REGEX = /^[\\s-]+|[\\s-]+$/gm;\nexport const UNDERSCORE_MATCH_REGEX = /[_\\s]+/gm;\nexport const HYPHEN_MATCH_REGEX = /[-\\s]+/gm;\n\n","import { FIRST_LETTER_SEPERATED_BY_SPACE_MATCH_REGEX } from './formatting.constants';\n\n\nexport function upperCaseEachWord(text: string): string {\n  return (text || '')\n    .replace(FIRST_LETTER_SEPERATED_BY_SPACE_MATCH_REGEX, match =>\n      match.toUpperCase()\n    );\n}\n","export function upperCaseFirstLetter(value: string): string {\n  return String(value).charAt(0).toUpperCase() + value.slice(1);\n}\n","import { upperCaseEachWord } from './upper-case-each-word.function';\nimport { upperCaseFirstLetter } from './upper-case-first-letter.function';\nimport {\n  PASCAL_CASE_FIRST_LETTER_MATCH_REGEX,\n  LEADING_AND_TRAILING_UNDERSCORE_MATCH_REGEX,\n  LEADING_AND_TRAILING_HYPHEN_MATCH_REGEX,\n  UNDERSCORE_MATCH_REGEX,\n  HYPHEN_MATCH_REGEX\n} from './formatting.constants';\n\n\nexport function humanize(text: string, upperCaseAllWords = true) {\n  const result = (text || '')\n    .split(PASCAL_CASE_FIRST_LETTER_MATCH_REGEX)\n    .join(' ')\n    .replace(LEADING_AND_TRAILING_UNDERSCORE_MATCH_REGEX, '')\n    .replace(LEADING_AND_TRAILING_HYPHEN_MATCH_REGEX, '')\n    .replace(UNDERSCORE_MATCH_REGEX, ' ')\n    .replace(HYPHEN_MATCH_REGEX, ' ')\n    .toLowerCase();\n\n  return upperCaseAllWords\n    ? upperCaseEachWord(result)\n    : upperCaseFirstLetter(result);\n}\n","export function trimEnd(value: string, trimCharacter = ' '): string {\n  if (value.endsWith(trimCharacter)) {\n    value = value.substr(0, value.length - 1);\n  }\n\n  return value;\n}\n","export function trimStart(value: string, trimCharacter = ' '): string {\n  if (value.startsWith(trimCharacter)) {\n    value = value.substr(1);\n  }\n\n  return value;\n}\n","import { trimStart } from './trip-start.function';\nimport { trimEnd } from './trim-end.function';\n\n\nexport function trim(value: string, trimCharacter = ' '): string {\n  value = trimStart(value, trimCharacter);\n  value = trimEnd(value, trimCharacter);\n\n  return value;\n}\n","export function groupBy<Key, Value>(list: Value[], keyGetter: ((item: Value) => Key)): Map<Key, Value[]> {\n  const map = new Map();\n\n  list.forEach((item: Value) => {\n    const key: Key = keyGetter(item);\n    const collection: Value[] = map.get(key);\n\n    if (!collection) {\n      map.set(key, [item]);\n    } else {\n      collection.push(item);\n    }\n  });\n\n  return map;\n}\n","export const BASE_64_METADATA_REGEX = /data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/;\nexport const JSON_MIME_TYPE = 'application/json';\n\n// Text files.\nexport const TEXT_MIME_TYPE = 'text/plain';\nexport const TEXT_FILE_EXTENSION = '.txt';\n\n// Audio.\nexport const AUDIO_WEBM_MIME_TYPE = 'audio/webm';\nexport const AUDIO_MP3_MIME_TYPE = 'audio/mpeg-3';\nexport const AUDIO_MP3_FILE_EXTENSION = '.mp3';\n\n// Video.\nexport const VIDEO_WEBM_MIME_TYPE = 'video/webm;codecs=h264';\nexport const VIDEO_MP4_MIME_TYPE = 'video/mp4';\nexport const VIDEO_MP4_FILE_EXTENSION = '.mp4';\n\n// Images.\nexport const IMAGE_PNG_FILE_EXTENSION = '.png';\nexport const IMAGE_PNG_MIME_TYPE = 'image/png';\nexport const IMAGE_JPEG_FILE_EXTENSION = '.jpeg';\nexport const IMAGE_JPEG_MIME_TYPE = 'image/jpeg';\n","import { BASE_64_METADATA_REGEX } from './media.constants';\n\n\nexport function base64MimeType(encoded: string): string {\n  let result = null;\n  const mime = encoded.match(BASE_64_METADATA_REGEX);\n\n  if (mime && mime.length) {\n    result = mime[1];\n  }\n\n  return result;\n}\n","import { getLastItem } from '../array/get-last-item.function';\n\n\nexport function stripBase64Metadata(base64: string): string {\n  const result = base64.split(',');\n  return getLastItem(result).trim();\n}\n","import { stripBase64Metadata } from './strip-base64-metadata.function';\n\n\nexport function base64toByteArray(base64Data: string): Uint8Array[] {\n  const sliceSize = 1024;\n  const strippedBase64Data = stripBase64Metadata(base64Data);\n  const byteCharacters = atob(strippedBase64Data);\n  const bytesLength = byteCharacters.length;\n  const slicesCount = Math.ceil(bytesLength / sliceSize);\n  const byteArrays = new Array(slicesCount);\n  let sliceIndex: number;\n\n  for (sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n    const begin = sliceIndex * sliceSize;\n    const end = Math.min(begin + sliceSize, bytesLength);\n\n    const bytes = new Array(end - begin);\n    let offset: number;\n    let i: number;\n\n    for (offset = begin, i = 0; offset < end; ++i, ++offset) {\n      bytes[i] = byteCharacters[offset].charCodeAt(0);\n    }\n\n    byteArrays[sliceIndex] = new Uint8Array(bytes);\n  }\n\n  return byteArrays;\n}\n","import { base64MimeType } from './base64-mime-type.function';\nimport { base64toByteArray } from './base64-to-byte-array.function';\n\n\nexport function base64toBlob(base64Data: string, contentType: string = null) {\n  contentType = contentType || base64MimeType(base64Data);\n  return new Blob(base64toByteArray(base64Data), { type: contentType });\n}\n","import { isType } from './is-type.function';\nimport { isValue } from './is-value.function';\n\n\nexport function isObject(val: any): boolean {\n  return isType(val, 'object') && !Array.isArray(val) && isValue(val);\n}\n","import { isObject } from '../type-check/is-object.function';\nimport { isFunction } from '../type-check/is-function.function';\n\n\n/**\n * Deep merge two objects.\n */\nexport function mergeDeep(target: any, source: any, options: { ignoreArrays?: boolean, copyFunctions?: boolean } = {}): any {\n  if (isObject(target) && isObject(source)) {\n    Object.keys(source).forEach(key => {\n      const value = source[key];\n      if (isObject(value)) {\n        if (!target[key]) {\n          target[key] = {};\n        }\n\n        mergeDeep(target[key], value, options);\n      } else {\n        let doCopy = true;\n\n        if (options.ignoreArrays && Array.isArray(value)\n          || isFunction(value) && !options.copyFunctions) {\n          doCopy = false;\n        }\n\n        if (doCopy) {\n          Object.assign(target, { [key]: value });\n        }\n      }\n    });\n  }\n\n  return target;\n}\n","import { MergeDeepArrayOptions } from './merge-deep-array-options';\nimport { mergeDeep } from './merge-deep.function';\n\n\nexport function mergeDeepArray(target: any[], source: any[], options?: MergeDeepArrayOptions): void {\n  if (!target || !source) {\n    return;\n  }\n\n  options = Object.assign({}, {\n    identifier: 'id',\n    addMissing: true,\n    beforeMerge: () => undefined,\n    afterMerge: () => undefined,\n  }, options);\n\n  target.forEach(targetItem => {\n    const targetId = targetItem[options.identifier];\n    const match = source.find(s => targetId && s[options.identifier] === targetId);\n    if (match) {\n      const continueWithMerge = options.beforeMerge(targetItem, match);\n      if (continueWithMerge !== false) {\n        mergeDeep(targetItem, match);\n      }\n\n      options.afterMerge(targetItem, match);\n    }\n  });\n\n  if (options.addMissing) {\n    source\n      .filter(src => !target.find(x => src[options.identifier] && src[options.identifier] === x[options.identifier]))\n      .forEach(missing => target.push(missing));\n  }\n}\n","import { NotificationTracker } from './notification-tracker';\nimport { NotifyResponse } from './notify-response';\nimport { NotifyEventType } from './notify-event-type';\nimport { NotifyService } from './notify.service';\nimport { Logger } from '../logging/logger.service';\nimport { NotificationConfig } from './notification-config';\nimport { isFunction } from '../type-check/is-function.function';\nimport { errorMsg } from '../error/error-msg.function';\n\n\nexport abstract class BaseNotificationTracker<T> implements NotificationTracker<T> {\n  protected onDone: (value: T | undefined | null | PromiseLike<T>) => void;\n  protected waitResponse: NotifyResponse;\n  protected eventWatchers: {\n    eventType: NotifyEventType,\n    callback: ((e?: any) => void)\n  }[] = [];\n\n  constructor(protected notify: NotifyService, protected log?: Logger, protected config: NotificationConfig = { logErrors: true }) {\n  }\n\n  wait(message: string, title?: string, config?: any): NotificationTracker<T> {\n    this.waitResponse = this.notify.wait(message, title, config);\n\n    // This method needs implemented in each implementation.\n    this.emit('wait');\n    return this;\n  }\n\n  waitIf(predicate: boolean | (() => boolean), message: string, title?: string, config?: any): NotificationTracker<T> {\n    const doWait = isFunction(predicate)\n      ? (predicate as () => boolean)()\n      : Boolean(predicate);\n\n    return doWait ? this.wait(message, title, config) : this;\n  }\n\n  success(message: string, title?: string, config?: any): NotificationTracker<T> {\n    this.config.showSuccess = true;\n    this.config.successMsg = message;\n    this.config.successTitle = title;\n    this.config.successConfiguration = config;\n    this.emit('success');\n    return this;\n  }\n\n  error(message: string, title?: string, config?: any): NotificationTracker<T> {\n    this.config.showError = true;\n    this.config.errorMsg = message;\n    this.config.errorTitle = title;\n    this.config.errorConfiguration = config;\n    this.emit('error');\n    return this;\n  }\n\n  warn(message: string, title?: string, config?: any): NotificationTracker<T> {\n    this.config.showWarn = true;\n    this.config.warnMsg = message;\n    this.config.warnTitle = title;\n    this.config.warnConfiguration = config;\n    this.emit('warn');\n    return this;\n  }\n\n  info(message: string, title?: string, config?: any): NotificationTracker<T> {\n    this.config.showInfo = true;\n    this.config.infoMsg = message;\n    this.config.infoTitle = title;\n    this.config.infoConfiguration = config;\n    this.emit('info');\n    return this;\n  }\n\n  finally(onDone: (value: T | undefined | null | PromiseLike<T>) => void): NotificationTracker<T> {\n    this.onDone = onDone;\n    this.emit('finally');\n    return this;\n  }\n\n  on(eventType: NotifyEventType, callback: (e?: any) => void) {\n    this.eventWatchers.push({ eventType, callback });\n  }\n\n  protected emit(eventType: NotifyEventType, event?: any) {\n    this.eventWatchers\n      .filter(watcher => watcher.eventType === eventType)\n      .forEach(watcher => watcher.callback(event));\n  }\n\n  protected done(response?: any) {\n    if (this.waitResponse) {\n      this.notify.clear(this.waitResponse.notifyId, this.waitResponse.containerId);\n    }\n\n    if (this.onDone) {\n      this.onDone(response);\n    }\n  }\n\n  protected onSuccess(response: any): void {\n    if (this.config.showSuccess) {\n      this.notify.success(this.config.successMsg, this.config.successTitle, this.config.successConfiguration);\n    }\n\n    if (this.config.showInfo) {\n      this.notify.info(this.config.infoMsg, this.config.infoTitle, this.config.infoConfiguration);\n    }\n\n    this.done(response);\n  }\n\n  protected onFail(error: any): void {\n    const responseError = (error.error || error) || error;\n    const msg: string = errorMsg(this.config.errorMsg, responseError);\n\n    if (this.log && this.config.logErrors) {\n      this.log.error(msg);\n    }\n\n    if (this.config.showError) {\n      this.notify.error(msg, this.config.errorTitle, responseError, this.config.errorConfiguration);\n    }\n\n    if (this.config.showWarn) {\n      this.notify.warn(msg, this.config.infoTitle, this.config.warnConfiguration);\n    }\n\n    this.done();\n  }\n}\n","import { NotifyService } from './notify.service';\nimport { Logger } from '../logging/logger.service';\nimport { BaseNotificationTracker } from './base-notification-tracker';\nimport { NotificationConfig } from './notification-config';\n\n\nexport class NotificationPromiseTracker<T> extends BaseNotificationTracker<T> {\n  constructor(public source: Promise<T>, notify: NotifyService, log?: Logger, config: NotificationConfig = {}) {\n    super(notify, log, config);\n  }\n\n  wait(message: string, title?: string): NotificationPromiseTracker<T> {\n    super.wait(message, title);\n    this.source = this.source\n      .then((result: T) => {\n        this.onSuccess(result);\n        return result;\n      })\n      .catch((error: any) => {\n        this.onFail(error);\n        throw error;\n      });\n    return this;\n  }\n\n  waitIf(predicate: boolean | (() => boolean), message: string, title?: string): NotificationPromiseTracker<T> {\n    return super.waitIf(predicate, message, title) as NotificationPromiseTracker<T>;\n  }\n\n  success(message: string, title?: string): NotificationPromiseTracker<T> {\n    return super.success(message, title) as NotificationPromiseTracker<T>;\n  }\n\n  error(message: string, title?: string): NotificationPromiseTracker<T> {\n    return super.error(message, title) as NotificationPromiseTracker<T>;\n  }\n\n  warn(message: string, title?: string): NotificationPromiseTracker<T> {\n    return super.warn(message, title) as NotificationPromiseTracker<T>;\n  }\n\n  info(message: string, title?: string): NotificationPromiseTracker<T> {\n    return super.info(message, title) as NotificationPromiseTracker<T>;\n  }\n\n  finally(onDone: (value: T | undefined | null | PromiseLike<T>) => void): NotificationPromiseTracker<T> {\n    return super.finally(onDone) as NotificationPromiseTracker<T>;\n  }\n\n  then(onfulfilled?: ((value: T) => T | PromiseLike<T>) | undefined | null): Promise<T> {\n    return this.source.then(onfulfilled);\n  }\n\n  catch(onrejected?: ((reason: any) => T | PromiseLike<T>) | undefined | null): Promise<T> {\n    return this.source.catch(onrejected);\n  }\n}\n","import { Observable, Subscription } from 'rxjs';\nimport { tap, publishReplay } from 'rxjs/operators';\n\nimport { NotifyService } from './notify.service';\nimport { Logger } from '../logging/logger.service';\nimport { BaseNotificationTracker } from './base-notification-tracker';\nimport { NotificationConfig } from './notification-config';\n\n\nexport class NotificationSubscriptionTracker<T> extends BaseNotificationTracker<T> {\n  constructor(public source: Observable<T>, notify: NotifyService, log?: Logger, config: NotificationConfig = {}) {\n    super(notify, log, config);\n\n    // We need to do a timeout here so that the chained events coming in after this method will be fired\n    // before this subscription is added - this is necessary for any synchronous/immediate observables.\n    this.source = this.source.pipe(\n      tap((x: T) => {\n        setTimeout(() => this.onSuccess(x));\n      }, (error: any) => {\n        setTimeout(() => this.onFail(error));\n      })\n    );\n\n    if (this.config.useSingletonSubscriptionEmission) {\n      this.source = this.source.pipe(publishReplay());\n    }\n  }\n\n  wait(message: string, title?: string, config?: any): NotificationSubscriptionTracker<T> {\n    return super.wait(message, title, config) as NotificationSubscriptionTracker<T>;\n  }\n\n  waitIf(predicate: boolean | (() => boolean), message: string, title?: string, config?: any): NotificationSubscriptionTracker<T> {\n    return super.waitIf(predicate, message, title, config) as NotificationSubscriptionTracker<T>;\n  }\n\n  success(message: string, title?: string, config?: any): NotificationSubscriptionTracker<T> {\n    return super.success(message, title, config) as NotificationSubscriptionTracker<T>;\n  }\n\n  error(message: string, title?: string, config?: any): NotificationSubscriptionTracker<T> {\n    return super.error(message, title, config) as NotificationSubscriptionTracker<T>;\n  }\n\n  warn(message: string, title?: string, config?: any): NotificationSubscriptionTracker<T> {\n    return super.warn(message, title, config) as NotificationSubscriptionTracker<T>;\n  }\n\n  info(message: string, title?: string, config?: any): NotificationSubscriptionTracker<T> {\n    return super.info(message, title, config) as NotificationSubscriptionTracker<T>;\n  }\n\n  finally(onDone: (value: T | undefined | null | PromiseLike<T>) => void): NotificationSubscriptionTracker<T> {\n    return super.finally(onDone) as NotificationSubscriptionTracker<T>;\n  }\n\n  subscribe(next?: (value: T) => void, error?: (error: any) => void, complete?: () => void): Subscription {\n    return this.source.subscribe(next, error, complete);\n  }\n}\n","export enum NotifyType {\n  Wait = 0,\n  Success = 1,\n  Info = 2,\n  Warn = 3,\n  Error = 4,\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// 3rd party.\nimport { Observable } from 'rxjs';\n\n// TSS.\nimport { CoreConfig } from '../core.config';\nimport { NotifyType } from './notify-type';\nimport { Notify } from './notify';\nimport { Logger } from '../logging/logger.service';\nimport { NotificationSubscriptionTracker } from './notification-subscription-tracker';\nimport { NotificationPromiseTracker } from './notification-promise-tracker';\nimport { NotifyResponse } from './notify-response';\nimport { format } from '../formatting/format.function';\n\n\n/**\n * Notification service.\n */\n@Injectable({ providedIn: 'root' })\nexport class NotifyService implements Notify {\n  constructor(protected config: CoreConfig, protected log: Logger) {\n  }\n\n  notify(type: NotifyType, message: string, title: string, config?: any): NotifyResponse {\n    // Add actual notification implementation here.\n    return {};\n  }\n\n  clear(notifyId?: string, containerId?: string): void {\n  }\n\n  with<T>(source: Observable<T>): NotificationSubscriptionTracker<T> {\n    return new NotificationSubscriptionTracker<T>(source, this, this.log);\n  }\n\n  promise<T>(source: Promise<T>): NotificationPromiseTracker<T> {\n    return new NotificationPromiseTracker<T>(source, this, this.log);\n  }\n\n  wait(message: string, title = this.config.defaultNotifyWaitMsg, config?: any): NotifyResponse {\n    return this.notify(NotifyType.Wait, message, title, config);\n  }\n\n  success(message: string, title = this.config.defaultNotifySuccessMsg, config?: any): NotifyResponse {\n    return this.notify(NotifyType.Success, message, title, config);\n  }\n\n  error(message: string, title = this.config.defaultNotifyErrorMsg, error: any = null, config?: any): NotifyResponse {\n    return this.notify(NotifyType.Error, format(message, { error }), title, config);\n  }\n\n  warn(message: string, title = this.config.defaultNotifyWarnMsg, error: any = null, config?: any): NotifyResponse {\n    return this.notify(NotifyType.Warn, format(message, { error }), title, config);\n  }\n\n  info(message: string, title = this.config.defaultNotifyInfoMsg, config?: any): NotifyResponse {\n    return this.notify(NotifyType.Info, message, title, config);\n  }\n}\n","import { isValue } from '../type-check/is-value.function';\n\n\n/**\n * Assigns values from one object to another, but only for values that are valid (not null, undefined, or empty string).\n * Restriction properties can be passed in to specificy explicitly which properties to assign (if valid).\n */\nexport function assignValidValues<T>(targetItem: T, sourceItem: any, ...restrictionProperties: string[]): T {\n  if (restrictionProperties.length === 0) {\n    restrictionProperties = Object.keys(sourceItem);\n  }\n\n  restrictionProperties\n    .filter(property => isValue(sourceItem[property]))\n    .forEach(property => targetItem[property] = sourceItem[property]);\n\n  return targetItem;\n}\n","// TODO: Refactor this method and give it proper names.\n// This was a copy/paste from online - RG.\nexport function getValue(obj: any, path: string): any {\n  const arr = path.split('.');\n  while (arr.length && obj) {\n    obj = obj[arr.shift()];\n  }\n\n  return obj;\n}\n","/**\n * Returns a random integer between min (inclusive) and max (inclusive)\n * Using Math.round() will give you a non-uniform distribution!\n */\nexport function getRandomInteger(min: number = 0, max: number = 1000) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","/**\n * Returns a random number between min (inclusive) and max (exclusive)\n */\nexport function getRandomNumber(min: number = 0, max: number = 10) {\n  return Math.random() * (max - min) + min;\n}\n","import { isNumber } from '../type-check/is-number.function';\n\n\nexport function round(numberToRound: number, decimalPlaces = 3): number {\n  return isNumber(numberToRound)\n    ? Number(numberToRound.toFixed(decimalPlaces))\n    : numberToRound;\n}\n","import { Orderable } from './orderable';\nimport { isNumber } from '../type-check/is-number.function';\n\n\nexport function sortByOrder<T extends Orderable>(list: T[]) {\n  let compareResult = -1;\n  list\n    .sort((compare1: T, compare2: T) => {\n      if (!isNumber(compare2.order) || compare1.order < compare2.order) {\n        compareResult = -1;\n      } else if (!isNumber(compare1.order) || compare1.order > compare2.order) {\n        compareResult = 1;\n      } else if (compare1.order === compare2.order) {\n        compareResult = 0;\n      }\n\n      return compareResult;\n    });\n}\n","import { sortByOrder } from './sort-by-order.function';\nimport { Orderable } from './orderable';\n\n\nexport function sortAndReorder<T extends Orderable>(list: T[]) {\n  sortByOrder(list);\n  list\n    .forEach((item, index) => item.order = index + 1);\n}\n","export enum SortDirection {\n  Ascending,\n  Descending,\n}\n","import { SortDirection } from './sort-direction';\nimport { SortPropertyGetter } from './sort-property-getter';\nimport { isFunction } from '../type-check/is-function.function';\nimport { isString } from '../type-check/is-string.function';\n\n\nexport function sortAscending<T>(list: T[], ...sortProperties: SortPropertyGetter<T>[]): T[] {\n  return sort(list, SortDirection.Ascending, ...sortProperties);\n}\n\nexport function sortDescending<T>(list: T[], ...sortProperties: SortPropertyGetter<T>[]): T[] {\n  return sort(list, SortDirection.Descending, ...sortProperties);\n}\n\nexport function sort<T>(list: T[], direction: SortDirection = SortDirection.Ascending, ...sortProperties: SortPropertyGetter<T>[]): T[] {\n  list.sort((item1: T, item2: T) => {\n    let sortResponse = 0;\n\n    if (sortProperties && sortProperties.length) {\n      sortProperties.forEach(property => {\n        if (sortResponse === 0) {\n          const value1 = getPropertyValue(item1, property);\n          const value2 = getPropertyValue(item2, property);\n          sortResponse = getSortResultForString(value1, value2, direction);\n        }\n      });\n    } else {\n      sortResponse = getSortResultForString(item1, item2, direction);\n    }\n\n    return sortResponse;\n  });\n\n  return list;\n}\n\nfunction getPropertyValue<T>(item: T, property: SortPropertyGetter<T>): any {\n  return isFunction(property)\n    ? (property as (item: T) => string)(item)\n    : item[property as string];\n}\n\nfunction getSortResultForString(value1: any, value2: any, direction: SortDirection): number {\n  return direction === SortDirection.Ascending\n    ? getSortResultForStringAscending(value1, value2)\n    : getSortResultForStringDescending(value1, value2);\n}\n\nfunction ensureValue(value: any): any {\n  return value === null || value === undefined ? '' : value;\n}\n\nfunction getSortResultForStringAscending(value1: any, value2: any): number {\n  value1 = ensureValue(value1);\n  value2 = ensureValue(value2);\n  const compare1 = isString(value1) ? value1.toUpperCase() : value1;\n  const compare2 = isString(value2) ? value2.toUpperCase() : value2;\n  let compareResult = 0;\n\n  if (compare1 < compare2) {\n    compareResult = -1;\n  } else if (compare1 > compare2) {\n    compareResult = 1;\n  }\n\n  // NOTE: 0 = equals, 1 = greater, -1 less than.\n  return compareResult;\n}\n\nfunction getSortResultForStringDescending(value1: string, value2: string): number {\n  const compare1 = isString(value1) ? value1.toUpperCase() : value1;\n  const compare2 = isString(value2) ? value2.toUpperCase() : value2;\n  let compareResult = 0;\n\n  if (compare1 > compare2) {\n    compareResult = -1;\n  } else if (compare1 < compare2) {\n    compareResult = 1;\n  }\n\n  // NOTE: 0 = equals, 1 = greater, -1 less than.\n  return compareResult;\n}\n","import { isNumber } from '../type-check/is-number.function';\n\n\nexport function average(list: number[]): number {\n  list = list.filter(value => isNumber(value));\n  const total = list.reduce((current, accumulating) => current + accumulating, 0);\n\n  return total / list.length;\n}\n","export function calculateCrossProduct(x1: number, y1: number, x2: number, y2: number, testX: number, testY: number): number {\n  return (testX - x1) * (y2 - y1) - (testY - y1) * (x2 - x1);\n}\n","export function calculatePercentComplete(partialValue: number, totalValue: number): number {\n  return (100 * partialValue) / totalValue;\n}\n","export function calculateRemainingSeconds(totalProcessed: number, ellapsedSeconds: number, remainingCount: number): number {\n  let estimatedSecondsRemaining = -1;\n  if (totalProcessed > 0) {\n    estimatedSecondsRemaining = ellapsedSeconds / totalProcessed * remainingCount;\n  }\n\n  return estimatedSecondsRemaining;\n}\n","export function isNumberBetweenOrEqual(testNumber: number, rangeStart: number, rangeEnd: number): boolean {\n  const minRange = Math.min(rangeStart, rangeEnd);\n  const maxRange = Math.max(rangeStart, rangeEnd);\n\n  return testNumber >= minRange && testNumber <= maxRange;\n}\n","export function isNumberBetween(testNumber: number, rangeStart: number, rangeEnd: number): boolean {\n  const minRange = Math.min(rangeStart, rangeEnd);\n  const maxRange = Math.max(rangeStart, rangeEnd);\n\n  return testNumber > minRange && testNumber < maxRange;\n}\n","import { isNumber } from '../type-check/is-number.function';\n\n\nexport function sum<T>(list: T[], predicate: (item: T) => number): number {\n  return list\n    .reduce((a, b) => {\n      let value = predicate(b);\n      value = isNumber(value) ? value : 0;\n\n      return a + value;\n    }, 0);\n}\n","import { Progressable } from './progressable';\nimport { sum } from './sum.function';\n\n\nexport class StatsTracker {\n  progressables: Progressable[];\n\n  constructor(...progressables: Progressable[]) {\n    this.progressables = progressables || [];\n  }\n\n  add(progressable: Progressable): this {\n    this.progressables.push(progressable);\n    return this;\n  }\n\n  getPercentComplete(): number {\n    const totalPercentComplete = sum(this.progressables, p => p.percentComplete);\n    const overallComplete = totalPercentComplete / this.progressables.length;\n\n    return Math.round(overallComplete);\n  }\n}\n","import { sum } from './sum.function';\n\n\nexport function sumProperty<T>(list: T[], property: string): number {\n  return sum(list, (value: T) => value[property]);\n}\n","import { sum } from './sum.function';\n\n\nexport function sumValues(list: number[]): number {\n  return sum(list, value => value);\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\nimport { BaseStorage } from './base-storage.service';\n\n\n@Injectable({ providedIn: 'root' })\nexport class InMemoryStorage extends BaseStorage {\n  cache = new Map<string, string>();\n\n  get length(): number {\n    return this.cache.size;\n  }\n\n  get(key: string): string {\n    return this.cache.get(this.formatKey(key));\n  }\n\n  set(key: string, value: string): void {\n    this.cache.set(this.formatKey(key), value);\n  }\n\n  remove(key: string): void {\n    this.cache.delete(this.formatKey(key));\n  }\n\n  clear(): void {\n    this.cache.clear();\n  }\n}\n","import { standardizeTokens } from './standardize-tokens.function';\nimport { TOKEN_EXPRESSION } from './tokens.constants';\n\n\nexport function extractTokens(template: string): string[] {\n  template = standardizeTokens(template);\n  return template.match(new RegExp(TOKEN_EXPRESSION));\n}\n","import { extractTokens } from './extract-tokens.function';\nimport { stripTokenBraces } from './strip-token-braces.function';\n\n\nexport function extractTokenExpressions(template: string): string[] {\n  return extractTokens(template)\n    .map(tokenDefinition => stripTokenBraces(tokenDefinition));\n}\n","import { isType } from './is-type.function';\n\n\nexport function isBoolean(val: any): boolean {\n  return isType(val, 'boolean');\n}\n","import { isArray } from './is-array.function';\n\n\nexport function isNotArray(val: any): boolean {\n  return !isArray(val);\n}\n","import { isBoolean } from './is-boolean.function';\n\n\nexport function isNotBoolean(val: any): boolean {\n  return !isBoolean(val);\n}\n","import { isDate } from './is-date.function';\n\n\nexport function isNotDate(val: any): boolean {\n  return !isDate(val);\n}\n","import { isDefined } from './is-defined.function';\n\n\nexport function isNotDefined(val: any): boolean {\n  return !isDefined(val);\n}\n","import { isFunction } from './is-function.function';\n\n\nexport function isNotFunction(val: any): boolean {\n  return !isFunction(val);\n}\n","import { isNumber } from './is-number.function';\n\n\nexport function isNotNumber(val: any): boolean {\n  return !isNumber(val);\n}\n","import { isObject } from './is-object.function';\n\n\nexport function isNotObject(val: any): boolean {\n  return !isObject(val);\n}\n","import { isNotFunction } from './is-not-function.function';\nimport { isNotArray } from './is-not-array.function';\n\n\nexport function isPrimitive(val: any): boolean {\n  return isNotFunction(val) && this.isNotObject(val) && isNotArray(val);\n}\n","import { isPrimitive } from './is-primitive.function';\n\n\nexport function isNotPrimitive(val: any): boolean {\n  return !isPrimitive(val);\n}\n","import { isString } from './is-string.function';\n\n\nexport function isNotString(val: any): boolean {\n  return !isString(val);\n}\n","import { isType } from './is-type.function';\n\n\nexport function isNotType(val: any, expectedType: string): boolean {\n  return !isType(val, expectedType);\n}\n","export enum AreaUnit {\n  Acres = 'acres',\n  Hectares = 'hectares',\n  SquareFeet = 'square-feet',\n  SquareMeters = 'square-meters',\n  SquareMiles = 'square-miles',\n}\n","import { AreaUnit } from './area-unit';\n\n\nexport function convertAreaUnits(fromUnit: AreaUnit, toUnit: AreaUnit): number {\n  throw new Error(`'convertAreaUnits' is not implemented yet`);\n}\n","export enum LengthUnit {\n  Foot = 'foot',\n  Degree = 'degree',\n  Radian = 'radian',\n  Mile = 'mile',\n  Meter = 'meter',\n  Kilometer = 'kilometer',\n}\n","import { LengthUnit } from './length-unit';\nimport { MeterToUnitConversionFactor } from './meter-to-unit-conversion-factor';\n\n\nfunction getMeterConversionFactors(): MeterToUnitConversionFactor {\n  const factors: MeterToUnitConversionFactor = {};\n  factors[LengthUnit.Foot] = 0.3048;\n  factors[LengthUnit.Kilometer] = 1000;\n  factors[LengthUnit.Meter] = 1;\n  factors[LengthUnit.Mile] = 1609.34;\n\n  return factors;\n}\n\nexport const LENGTH_UNIT_METER_CONVERSION_FACTOR = getMeterConversionFactors();\n\n","import { LengthUnit } from './length-unit';\nimport { LENGTH_UNIT_METER_CONVERSION_FACTOR } from './unit-conversion.constants';\nimport { isNotNumber } from '../type-check/is-not-number.function';\n\n\nexport function toMeters(value: number, fromUnit: LengthUnit): number {\n  const conversionFactor = LENGTH_UNIT_METER_CONVERSION_FACTOR[fromUnit];\n  if (isNotNumber(conversionFactor)) {\n    throw new Error(`Can not convert unsupported unit: '${fromUnit}'`);\n  }\n\n  return value * conversionFactor;\n}\n","import { LengthUnit } from './length-unit';\nimport { LENGTH_UNIT_METER_CONVERSION_FACTOR } from './unit-conversion.constants';\nimport { isNumber } from '../type-check/is-number.function';\n\n\nexport function fromMeters(value: number, toUnit: LengthUnit): number {\n  const conversionFactor = LENGTH_UNIT_METER_CONVERSION_FACTOR[toUnit];\n  if (!isNumber(conversionFactor)) {\n    throw new Error(`Can not convert unsupported unit: '${toUnit}'`);\n  }\n\n  return value / conversionFactor;\n}\n","import { LengthUnit } from './length-unit';\nimport { toMeters } from './to-meters.function';\nimport { fromMeters } from './from-meters.function';\n\n\nexport function convertLengthUnits(fromValue: number, fromUnit: LengthUnit, toUnit: LengthUnit): number {\n  const fromValueInMeters = toMeters(fromValue, fromUnit);\n\n  return fromMeters(fromValueInMeters, toUnit);\n}\n","export function metersPerSecondToKilometersPerHour(metersPerSecond: number) {\n  return metersPerSecond * 3.6;\n}\n","export function metersPerSecondToMilesPerHour(metersPerSecond: number) {\n  return metersPerSecond * 2.237;\n}\n","import { hasWindow } from '../environment/has-window.function';\n\n\nexport function ensureProtocol(url: string): string {\n  if (hasWindow() && String(url).startsWith('//')) {\n    url = `${window.location.protocol}${url}`;\n  }\n\n  return url;\n}\n","import { clean } from './clean.function';\n\n\nexport function getBaseUrl(url: string): string {\n  let [someUrl] = clean(url).split('#');\n  [someUrl] = someUrl.split('?');\n  return someUrl;\n}\n","import { join } from './join.function';\nimport { format } from '../formatting/format.function';\n\n\nexport function joinAndFomat(tokens: any, ...parts) {\n  const url = join(...parts);\n  return format(url, tokens);\n}\n","import { isValue } from '../type-check/is-value.function';\nimport { isObject } from '../type-check/is-object.function';\n\n\nexport function parametersToString(queryParameters: {}) {\n  return Object\n    .keys(queryParameters)\n    .filter(key => isValue(queryParameters[key]))\n    .map(key => {\n      const value = isObject(queryParameters[key])\n        ? JSON.stringify(queryParameters[key])\n        : queryParameters[key];\n\n      return `${key}=${value}`;\n    })\n    .join('&');\n}\n","export const EMPTY_PARAMS_REGEX = /(&?\\w+=((?=$)|(?=&)))/g;\n","import { EMPTY_PARAMS_REGEX } from './url.constants';\n\n\nexport function removeEmptyParams(url: string): string {\n  return url.replace(EMPTY_PARAMS_REGEX, '');\n}\n","import { trimEnd } from '../formatting/trim-end.function';\n\n\nexport function stripTrailingSlash(url: string): string {\n  return trimEnd(url, '/');\n}\n","import { Disposable } from './disposable';\n\n\n/**\n * Provides a syntax that ensures the correct use of Disposable objects.\n */\nexport async function using<T extends Disposable>(resource: T, func: (resource: T) => Promise<void> | void) {\n  try {\n    await func(resource);\n  } finally {\n    await resource.dispose();\n  }\n}\n","export const INVALID_GUID_ERROR_MSG = 'Invalid GUID value provided';\n","export function uuidValueReplacer(replaceValue: string): string {\n  // tslint:disable-next-line\n  const randomValue = Math.random() * 16 | 0;\n  // tslint:disable-next-line\n  const value = replaceValue === 'x' ? randomValue : (randomValue & 0x3 | 0x8);\n\n  return value.toString(16);\n}\n","import { uuidValueReplacer } from './uuid-value-replacer.function';\n\n\nexport function uuid(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'\n    .replace(new RegExp('[xy]', 'g'), uuidValueReplacer);\n}\n","import { uuid } from './uuid.function';\nimport { INVALID_GUID_ERROR_MSG } from './guid.constants';\n\n\n/**\n * Represents a Global Unique Identifier (GUID). GUID creation ported from:\n * https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n */\nexport class Guid {\n  public static readonly empty = '00000000-0000-0000-0000-000000000000';\n\n  readonly value: string;\n\n  get isEmpty(): boolean {\n    return this.value === Guid.empty;\n  }\n\n  public static newGuid(): Guid {\n    return new Guid(uuid());\n  }\n\n  public static isValid(str: string): boolean {\n    const validRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n    return validRegex.test(str);\n  }\n\n  constructor(value?: string) {\n    this.value = value || Guid.empty;\n\n    if (!Guid.isValid(value)) {\n      throw new Error(INVALID_GUID_ERROR_MSG);\n    }\n  }\n\n  equals(guid: Guid): boolean {\n    return guid.toString() === this.toString();\n  }\n\n  toString(): string {\n    return this.value;\n  }\n\n  toJSON(): string {\n    return this.value;\n  }\n}\n","export class ValidationResult {\n  private validationSkipped: boolean;\n\n  passed: boolean;\n  warned: boolean;\n  ran: boolean;\n  violaters: any[] = [];\n\n  get failed(): boolean {\n    return this.ran && !this.passed;\n  }\n\n  get skipped(): boolean {\n    return this.validationSkipped;\n  }\n\n  set skipped(value: boolean) {\n    this.validationSkipped = value;\n    this.ran = true;\n  }\n\n  add(inner: ValidationResult): ValidationResult {\n    if (inner.failed) {\n      this.passed = false;\n    }\n\n    if (inner.warned) {\n      this.warned = true;\n    }\n\n    return this;\n  }\n}\n","import { ValidationResult } from './validation-results';\n\n\nlet BASE_ID = 1;\n\nexport class ValidationCheck<T> {\n  id: number;\n  description: string;\n\n  private subChecks: ValidationCheck<T>[] = [];\n  private passCheck?: (value: T) => boolean;\n  private failCheck?: (value: T) => boolean;\n  private warnCheck?: (value: T) => boolean;\n  private onlyIfCheck?: (value: T) => boolean;\n\n  constructor(description: string, passCheck?: (value: any) => boolean) {\n    this.description = description;\n    this.passCheck = passCheck;\n    this.id = BASE_ID++;\n  }\n\n  hasId(id: number): ValidationCheck<T> {\n    this.id = id;\n    return this;\n  }\n\n  message(description: string): ValidationCheck<T> {\n    this.description = description;\n    return this;\n  }\n\n  pass(passCheck?: (value: T) => boolean): ValidationCheck<T> {\n    this.passCheck = passCheck;\n    return this;\n  }\n\n  fail(failCheck?: (value: T) => boolean): ValidationCheck<T> {\n    this.failCheck = failCheck;\n    return this;\n  }\n\n  warn(warnCheck?: (value: T) => boolean): ValidationCheck<T> {\n    this.warnCheck = warnCheck;\n    return this;\n  }\n\n  onlyIf(onlyIfCheck?: (value: T) => boolean): ValidationCheck<T> {\n    this.onlyIfCheck = onlyIfCheck;\n    return this;\n  }\n\n  add(...innerChecks: ValidationCheck<T>[]): ValidationCheck<T> {\n    innerChecks.forEach(inner => this.subChecks.push(inner));\n    return this;\n  }\n\n  check(target: T): ValidationResult {\n    const result = new ValidationResult();\n\n    if (this.onlyIfCheck && !this.onlyIfCheck(target)) {\n      result.skipped = true;\n      return result;\n    }\n\n    if (this.passCheck) {\n      result.passed = this.passCheck(target);\n    }\n\n    if (this.failCheck) {\n      result.passed = !this.failCheck(target);\n    }\n\n    if (this.warnCheck) {\n      result.warned = !this.warnCheck(target);\n    }\n\n    if (this.subChecks) {\n      this.subChecks.forEach(c => {\n        const innerResult = c.check(target);\n        result.add(innerResult);\n      });\n    }\n\n    return result;\n  }\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// TSS.\nimport { AutoConfig } from '../core/auto-config.decorator';\n\n\n/**\n * Configuration class for storing csv-related settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('CsvConfig')\nexport class CsvConfig {\n}\n","export const CSV_NEW_LINE = '\\r';\nexport const CSV_SEPARATOR = ',';\n","// Angular.\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n// TSS.\nimport { TssCoreModule } from '../core/core.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    TssCoreModule,\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssCsvModule { }\n","// TSS.\nimport { CSV_NEW_LINE, CSV_SEPARATOR } from './csv.constants';\nimport { clone } from '../core/clone/clone.function';\nimport { isDefined } from '../core/type-check/is-defined.function';\n\n\nexport function toCsv(data: any[], ...properties: string[]): string {\n  const [firstItem] = data;\n  let csv = '';\n\n  if (firstItem) {\n    // NOTE: We need to clone the object here because we can't trust on Object.keys working\n    // on every object type. For example, a true \"coordinate\", object.keys doesn't work - RG.\n    properties = properties && properties.length\n      ? properties\n      : Object.keys(clone(firstItem));\n\n    const header = `${properties.join(CSV_SEPARATOR)}`;\n    const csvLines = data.map(point => {\n      const fields = properties.map(property => {\n        const value = point[property];\n        const hasPropertyValue = isDefined(value);\n        return hasPropertyValue ? value : '';\n      });\n\n      return fields.join(CSV_SEPARATOR);\n    });\n\n    csv = `${header}${CSV_NEW_LINE}${csvLines.join(CSV_NEW_LINE)}`;\n  }\n\n  return csv;\n}\n","import { Geometry } from 'geojson';\n\n\nexport function isLine(geometry: Geometry): boolean {\n  return Boolean(\n    geometry\n    && geometry.type\n    && String(geometry.type)\n      .toLowerCase()\n      .includes('linestring')\n  );\n}\n","import { isArray } from '../../core/type-check/is-array.function';\n\n\nexport function isMultiPartLine(line: number[][] | number[][][]): boolean {\n  return Boolean(\n    line\n    && line.length\n    && isArray(line[0])\n    && isArray(line[0][0])\n  );\n}\n","// 3rd Party.\nimport { MultiLineString, LineString } from 'geojson';\n\n// TSS.\nimport { isArray } from '../../core/type-check/is-array.function';\nimport { LineGeometry } from './line-geometry';\nimport { isMultiPartLine } from './is-multi-part.function';\n\n\nexport function toMultiPartPaths(line: LineGeometry): number[][][] {\n  if (isArray(line)) {\n    const lineAsArray = (line as any[]);\n    return isMultiPartLine(lineAsArray)\n      ? lineAsArray\n      : [lineAsArray];\n  } else {\n    const lineGeometry = line as LineString | MultiLineString;\n    return lineGeometry.type === 'LineString'\n      ? [lineGeometry.coordinates]\n      : lineGeometry.coordinates;\n  }\n}\n\n","// 3rd party.\nimport { Position } from 'geojson';\n\n// TSS.\nimport { LineGeometry } from './line-geometry';\nimport { toMultiPartPaths } from './to-multi-part-paths.function';\n\n\nexport function flattenLine(line: LineGeometry): Position[] {\n  const flattenedPoints: Position[] = [];\n  const multipParts: number[][][] = toMultiPartPaths(line);\n  multipParts.forEach((part: number[][]) => {\n    part.forEach((position: Position) => {\n      flattenedPoints.push(position);\n    });\n  });\n\n  return flattenedPoints;\n}\n","import { Geometry } from 'geojson';\n\n\nexport function isPoint(geometry: Geometry): boolean {\n  return geometry && geometry.type\n    ? geometry.type === 'Point' || geometry.type === 'MultiPoint'\n    : false;\n}\n","// 3rd Party.\nimport { Point, MultiPoint } from 'geojson';\n\n// TSS.\nimport { AnyPoint } from './any-point';\nimport { isArray } from '../../core/type-check/is-array.function';\n\n\nexport function isMultiPartPoint(point: AnyPoint): boolean {\n  const coordinates = isArray(point)\n    ? (point as number[])\n    : (point as Point | MultiPoint).coordinates;\n\n  return Boolean(\n    coordinates\n    && coordinates.length\n    && isArray(coordinates[0])\n  );\n}\n","// 3rd Party.\nimport { MultiPoint, Point } from 'geojson';\n\n// TSS.\nimport { AnyPoint } from './any-point';\nimport { isArray } from '../../core/type-check/is-array.function';\nimport { isMultiPartPoint } from './is-multi-part-point.function';\n\n\nexport function toMultiPartPoint(point: AnyPoint): number[][] {\n  const coordinates: number[] | number[][] = isArray(point)\n    ? (point as number[])\n    : (point as Point | MultiPoint).coordinates;\n\n  return isMultiPartPoint(coordinates)\n    ? coordinates as number[][]\n    : [coordinates as number[]];\n}\n","import { Geometry } from 'geojson';\n\n\nexport function isPolygon(geometry: Geometry): boolean {\n  return geometry && geometry.type\n    ? geometry.type === 'Polygon' || geometry.type === 'MultiPolygon'\n    : false;\n}\n","// 3rd party.\nimport { Geometry, Position, Point, Polygon, LineString } from 'geojson';\n\n// TSS.\nimport { toCsv } from './to-csv.function';\nimport { isLine } from '../geometry/geometry/is-line.function';\nimport { flattenLine } from '../geometry/line/flatten-line.function';\nimport { isPoint } from '../geometry/geometry/is-point.function';\nimport { toMultiPartPoint } from '../geometry/point/to-multi-part-point.function';\nimport { isPolygon } from '../geometry/geometry/is-polygon.function';\n\n\nexport function geometryToCsv(geometry: Geometry, ...verticeeOrdinalNames: string[]): string {\n  const pointInfos = [];\n  let verticees: Position[] = [];\n\n  if (isLine(geometry)) {\n    verticees = flattenLine(geometry as LineString);\n  } else if (isPoint(geometry)) {\n    verticees = toMultiPartPoint(geometry as Point);\n  } else if (isPolygon(geometry)) {\n    const polygon = geometry as Polygon;\n    verticees = flattenLine(polygon.coordinates);\n  } else {\n    throw new Error('Unknown or unsupported geometry type provided');\n  }\n\n  verticees.map(verticee => {\n    const info = {};\n    pointInfos.push(info);\n\n    if (!verticeeOrdinalNames || !verticeeOrdinalNames.length) {\n      verticeeOrdinalNames = ['x', 'y'];\n\n      if (verticee.length > 2) {\n        verticeeOrdinalNames.push('z');\n      }\n\n      if (verticee.length > 3) {\n        verticeeOrdinalNames.push('m');\n      }\n    }\n\n    verticeeOrdinalNames.forEach((name: string, index: number) => {\n      info[name] = verticee[index];\n    });\n  });\n\n  return toCsv(pointInfos);\n}\n","export const APPLY_EDITS_SEED_POD_FILE_EXTENSION = '.tssedits';\n","import { Injectable } from '@angular/core';\nimport { ResourceConfig } from '../core/resource.config';\nimport { AutoConfig } from '../core/auto-config.decorator';\n\n\n/**\n * Configuration class for storing global ESRI-related settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('DataSourceConfig')\nexport class DataSourceConfig extends ResourceConfig {\n  dataSourcesEndpoint = 'api/data/sources/{id}';\n  tablesEndpoint = 'api/data/sources/{id}/tables';\n  columnsEndpoint = 'api/data/sources/{id}/tables/{table}/columns/{column}/{action}';\n  tableActionEndpoint = 'api/data/sources/{id}/tables/{table}/{action}/{subaction}';\n  editDataEndpoint = 'api/data/sources/{id}/tables/{table}/edit';\n  applyEditsEndpoint = 'api/data/sources/{id}/applyedits';\n  attachmentsEndpoint = 'api/attachments/{id}/{action}';\n  skipColumnQuotes = false;\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\n\n// 3rd Party.\nimport { Feature } from 'geojson';\nimport { Observable } from 'rxjs';\n\n// TSS.\nimport { ApplyEditsSeed } from './apply-edits-seed';\nimport { DataSourceConfig } from '../data-source-config';\nimport { ApplyEditsResult } from './apply-edits-result';\nimport { ApplyEditsPod } from './apply-edits-pod';\nimport { BaseEmptyResourceService } from '../../core/resource/base-empty-resource.service';\nimport { EMPTY_PARAM_VALUE } from '../../core/resource/resource.constants';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DataSourceEditService extends BaseEmptyResourceService<ApplyEditsSeed> {\n  constructor(protected http: HttpClient, private dsConfig: DataSourceConfig) {\n    super(http, {\n      url: dsConfig.serviceUrl\n    });\n  }\n\n  applyEdits(data: ApplyEditsPod, params?: HttpParams): Observable<ApplyEditsResult> {\n    if (!data) {\n      throw new Error('Missing or invalid apply edits seed data provided');\n    } else if (!data.dataSourceId) {\n      throw new Error(`Missing 'dataSourceId' from the apply edits seed data`);\n    }\n\n    const url = this.getUrlWithId(data.dataSourceId, this.dsConfig.applyEditsEndpoint, {});\n    return this.http.post<ApplyEditsResult>(url, data, { params });\n  }\n\n  createRecord(\n    dataSourceId: string,\n    table: string,\n    feature: Feature,\n    version?: string,\n    params?: HttpParams\n  ): Observable<ApplyEditsResult> {\n    const url = this.getUrlWithId(dataSourceId, this.dsConfig.editDataEndpoint, { table });\n    params = (params || new HttpParams())\n      .set('version', version || EMPTY_PARAM_VALUE);\n\n    return this.http.post<ApplyEditsResult>(url, feature, { params });\n  }\n}\n","export enum AttachmentType {\n  Video = 'video',\n  Image = 'image',\n  Audio = 'audio',\n  Text = 'text',\n}\n","import { isArray } from '../core/type-check/is-array.function';\nimport { isObject } from '../core/type-check/is-object.function';\nimport { isNotValue } from '../core/type-check/is-not-value.function';\nimport { isValue } from '../core/type-check/is-value.function';\n\n\nexport function toFormDataString(value: {}, encodeData = true): string {\n  let stringValue;\n  if (isNotValue(value)) {\n    stringValue = '';\n  } else if (isObject(value) || isArray(value)) {\n    stringValue = JSON.stringify(value);\n  } else {\n    stringValue = value.toString();\n  }\n\n  return isValue(stringValue) && encodeData ?\n    encodeURIComponent(stringValue)\n    : stringValue;\n}\n","export const ATTACHMENT_FILE_FORM_KEY = 'file';\nexport const ATTACHMENT_DATA_FORM_KEY = 'attachment';\n","// Angular.\nimport { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\n\n// 3rd Party.\nimport { Observable } from 'rxjs';\n\n// TSS.\nimport { Attachment } from './attachment';\nimport { DataSourceConfig } from '../data-source-config';\nimport { toFormDataString } from '../../http/to-form-data-string.function';\nimport { AttachmentType } from './attachment-type';\nimport { base64toBlob } from '../../core/media/base64-to-blob.function';\nimport { ATTACHMENT_FILE_FORM_KEY, ATTACHMENT_DATA_FORM_KEY } from './attachments.constants';\nimport { BaseResourceService } from '../../core/resource/base-resource.service';\nimport { isString } from '../../core/type-check/is-string.function';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AttachmentService extends BaseResourceService<Attachment> {\n  constructor(protected http: HttpClient, dsConfig: DataSourceConfig) {\n    super(http, {\n      url: dsConfig.serviceUrl,\n      queryEndpoint: dsConfig.attachmentsEndpoint,\n      getEndpoint: dsConfig.attachmentsEndpoint,\n      updateEndpoint: dsConfig.attachmentsEndpoint,\n      deleteEndpoint: dsConfig.attachmentsEndpoint,\n      createEndpoint: dsConfig.attachmentsEndpoint,\n    });\n  }\n\n  create(attachment: Attachment, routeTokens?: any, params?: HttpParams): Observable<Attachment> {\n    const url = this.getUrl(this.config.createEndpoint, routeTokens);\n    const formData: FormData = new FormData();\n    let fileData: string | Blob;\n\n    if (attachment.type === AttachmentType.Image && isString(attachment.data)) {\n      fileData = base64toBlob(attachment.data as string);\n    } else if (attachment.type === AttachmentType.Text) {\n      fileData = new Blob([attachment.data]);\n    } else {\n      fileData = attachment.data as Blob;\n    }\n\n    delete attachment.data;\n    formData.append(ATTACHMENT_FILE_FORM_KEY, fileData);\n    formData.append(ATTACHMENT_DATA_FORM_KEY, toFormDataString(attachment));\n\n    return this.http.post<Attachment>(url, formData, { params, reportProgress: true });\n  }\n\n  download(attachmentId: string, routeTokens?: any, params?: HttpParams) {\n    // TODO: Complete - RG.\n    // const url = this.getUrl(this.config.getEndpoint, Object.assign({ action: 'download' }, routeTokens));\n    throw new Error('Not implemented yet');\n  }\n}\n","export enum DataSourceProviderType {\n  SqlServer = 'System.Data.SqlClient',\n  SqlLite = 'System.Data.SQLite',\n  SqlCompactEdition = 'System.Data.SqlServerCe.4.0',\n  Oracle = 'Oracle.ManagedDataAccess.Client',\n  OracleDevArt = 'Devart.Data.Oracle',\n}\n","import { DataSourceProviderType } from './data-source-provider-type';\nimport { DataSourceProvider } from './data-source-provider';\n\n\nexport const SELECT_ALL_WHERE_CLAUSE = '1=1';\nexport const DATA_SOURCE_PROVIDERS: DataSourceProvider[] = [\n  { alias: 'SQL Server', provider: DataSourceProviderType.SqlServer, canUseEF: true, schedulingCompatible: true },\n  { alias: 'SQLite', provider: DataSourceProviderType.SqlLite, canUseEF: false, schedulingCompatible: true },\n  {\n    alias: 'SQL Server Compact Edition',\n    provider: DataSourceProviderType.SqlCompactEdition,\n    canUseEF: true,\n    schedulingCompatible: false\n  },\n  { alias: 'Oracle', provider: DataSourceProviderType.Oracle, canUseEF: false, schedulingCompatible: false },\n  { alias: 'Oracle', provider: DataSourceProviderType.OracleDevArt, canUseEF: true, efOnly: true, schedulingCompatible: false }\n];\n\nexport const DATA_SOURCE_EXAMPLES: { name: string, providerName: DataSourceProviderType, connectionString: string }[] = [\n  {\n    name: 'SQL Server Connection',\n    providerName: DataSourceProviderType.SqlServer,\n    connectionString: 'data source=YOUR_HOST, 1433;initial catalog=YOUR_DB;persist security info=True;'\n      + 'user id=YOUR_USER;password=YOUR_PASSWORD;MultipleActiveResultSets=true;'\n  },\n  {\n    name: 'SQL Server Compact (SQL CE) Connection',\n    providerName: DataSourceProviderType.SqlCompactEdition,\n    connectionString: 'Data Source=|DataDirectory|\\\\YOUR_DB_NAME.sdf;Max Database Size=4091'\n  },\n  {\n    name: 'SQLite',\n    providerName: DataSourceProviderType.SqlLite,\n    connectionString: 'Data Source=|DataDirectory|\\\\YOUR_DB_NAME.sqlite;Version=3'\n  },\n  {\n    name: 'Oracle Connection (without TNS names entry)',\n    providerName: DataSourceProviderType.Oracle,\n    connectionString: 'Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)'\n      + '(HOST=YOUR_HOST)(PORT=1522)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=YOUR_SERVICE)));'\n      + 'User Id=YOUR_USER;Password=YOUR_PASSWORD;'\n  },\n  {\n    name: 'Oracle Connection (with TNS names entry)',\n    providerName: DataSourceProviderType.Oracle,\n    connectionString: 'Data Source=YOUR_SOURCE;User Id=YOUR_USER;Password=YOUR_PASSWORD;'\n  },\n  {\n    name: 'Oracle Connection (without TNS names entry)',\n    providerName: DataSourceProviderType.OracleDevArt,\n    connectionString: 'Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)'\n      + '(HOST=YOUR_HOST)(PORT=1522)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=YOUR_SERVICE)));'\n      + 'User Id=YOUR_USER;Password=YOUR_PASSWORD;'\n  },\n  {\n    name: 'Oracle Connection (with TNS names entry)',\n    providerName: DataSourceProviderType.OracleDevArt,\n    connectionString: 'Data Source=YOUR_SOURCE;User Id=YOUR_USER;Password=YOUR_PASSWORD;'\n  }\n];\n","// Angular.\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n// 3rd Party.\nimport { FeatureCollection } from 'geojson';\nimport { Observable } from 'rxjs';\n\n// TSS.\nimport { DataSourceConfig } from './data-source-config';\nimport { DataSource } from './data-source';\nimport { DataTableInfo } from './data-table-info';\nimport { DataColumn } from './data-column';\nimport { DataTable } from './data-table';\nimport { DataSourceSpatialExportFormat } from './data-source-spatial-export-format';\nimport { BaseResourceService } from '../core/resource/base-resource.service';\nimport { EMPTY_PARAM_VALUE } from '../core/resource/resource.constants';\nimport { isValue } from '../core/type-check/is-value.function';\nimport { SELECT_ALL_WHERE_CLAUSE } from './data-source.constants';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DataSourceService extends BaseResourceService<DataSource> {\n  constructor(protected http: HttpClient, private dsConfig: DataSourceConfig) {\n    super(http, {\n      url: dsConfig.serviceUrl,\n      queryEndpoint: dsConfig.dataSourcesEndpoint,\n      getEndpoint: dsConfig.dataSourcesEndpoint,\n      updateEndpoint: dsConfig.dataSourcesEndpoint,\n      deleteEndpoint: dsConfig.dataSourcesEndpoint,\n      createEndpoint: dsConfig.dataSourcesEndpoint,\n    });\n  }\n\n  testConnection(entity: DataSource, useEntityFramework: boolean, params?: HttpParams): Observable<DataTable> {\n    throw new Error('Not implemented yet');\n  }\n\n  testExistingConnection(id: string, params?: HttpParams): Observable<DataTable> {\n    throw new Error('Not implemented yet');\n  }\n\n  // 'http:' + this.appConfig.serviceUrl + '/api/data/sources/:id/tables'\n  getTables(dataSourceId: string, params?: HttpParams): Observable<DataTableInfo[]> {\n    const url = this.getUrlWithId(dataSourceId, this.dsConfig.tablesEndpoint, {});\n    return this.http.get<DataTableInfo[]>(url, { params });\n  }\n\n  // 'http:' + this.appConfig.serviceUrl + '/api/data/sources/:id/tables/details'\n  getTableDetails(dataSourceId: string, params?: HttpParams): Observable<DataTable> {\n    const url = this.getUrlWithId(dataSourceId, this.dsConfig.tableActionEndpoint, {\n      action: 'details'\n    });\n\n    return this.http.get<DataTable>(url, { params });\n  }\n\n  // 'http:' + this.appConfig.serviceUrl + '/api/data/sources/:id/tables/:table/columns/:column/:action',\n  getColumns(dataSourceId: string, table: string, params?: HttpParams): Observable<DataColumn[]> {\n    const url = this.getUrlWithId(dataSourceId, this.dsConfig.columnsEndpoint, { table });\n\n    return this.http.get<DataColumn[]>(url, { params });\n  }\n\n  // api/data/sources/test_1051_sql/tables/RH.DIVIDED_ROADS/columns/SurveyDirection/values?unique=false\n  getColumnValues<T>(dataSourceId: string, table: string, column: string, unique: boolean = false, params?: HttpParams): Observable<T[]> {\n    const url = this.getUrlWithId(dataSourceId, this.dsConfig.columnsEndpoint, {\n      table,\n      column,\n      action: 'values'\n    });\n    params = (params || new HttpParams()).set('unique', String(unique));\n\n    return this.http.get<T[]>(url, { params });\n  }\n\n  // api/data/sources/test_1051_sql/tables/RH.DIVIDED_ROADS/columns/SurveyDirection/values?unique=true\n  getUniqueColumnValues<T>(dataSourceId: string, table: string, column: string, params?: HttpParams): Observable<T[]> {\n    return this.getColumnValues<T>(dataSourceId, table, column, true, params);\n  }\n\n  // 'http:' + this.appConfig.serviceUrl + '/api/data/sources/:id/tables/:count'\n  getRecordCount(\n    dataSourceId: string,\n    table: string,\n    whereClause: string = SELECT_ALL_WHERE_CLAUSE,\n    version?: string,\n    params?: HttpParams\n  ): Observable<number> {\n    const url = this.getUrlWithId(dataSourceId, this.dsConfig.tableActionEndpoint, {\n      table,\n      action: 'count'\n    });\n\n    params = (params || new HttpParams())\n      .set('where', whereClause)\n      .set('version', version || EMPTY_PARAM_VALUE);\n\n    return this.http.get<number>(url, { params });\n  }\n\n  // api/data/sources/test_1051_sql/tables/RH.DIVIDED_ROADS/query/details?page=1&pageSize=25&where=1%3D1\n  queryData(\n    dataSourceId: string,\n    table: string,\n    whereClause: string,\n    version?: string,\n    page?: number,\n    pageSize?: number,\n    includeGeometry?: boolean,\n    shapeField?: string,\n    params?: HttpParams\n  ): Observable<DataTable> {\n    return this.querySpatialData<DataTable>(\n      dataSourceId,\n      table,\n      whereClause,\n      version,\n      page,\n      pageSize,\n      includeGeometry,\n      shapeField,\n      'json',\n      params,\n    );\n  }\n\n  queryGeoJsonData(\n    dataSourceId: string,\n    table: string,\n    whereClause: string,\n    version?: string,\n    page?: number,\n    pageSize?: number,\n    includeGeometry?: boolean,\n    shapeField?: string,\n    params?: HttpParams\n  ): Observable<FeatureCollection> {\n    return this.querySpatialData<FeatureCollection>(\n      dataSourceId,\n      table,\n      whereClause,\n      version,\n      page,\n      pageSize,\n      includeGeometry,\n      shapeField,\n      'geojson',\n      params,\n    );\n  }\n\n  querySpatialData<T extends DataTable | FeatureCollection>(\n    dataSourceId: string,\n    table: string,\n    whereClause: string,\n    version?: string,\n    page?: number,\n    pageSize?: number,\n    includeGeometry?: boolean,\n    shapeField?: string,\n    format?: DataSourceSpatialExportFormat,\n    params?: HttpParams\n  ): Observable<T> {\n    const url = this.getUrlWithId(dataSourceId, this.dsConfig.tableActionEndpoint, {\n      table,\n      action: 'query/details'\n    });\n\n    params = (params || new HttpParams())\n      .set('where', whereClause || EMPTY_PARAM_VALUE)\n      .set('version', version || EMPTY_PARAM_VALUE)\n      .set('page', isValue(page) ? String(page) : EMPTY_PARAM_VALUE)\n      .set('pageSize', isValue(pageSize) ? String(pageSize) : EMPTY_PARAM_VALUE)\n      .set('includeGeometry', isValue(includeGeometry) ? String(includeGeometry) : EMPTY_PARAM_VALUE)\n      .set('shapeField', shapeField || EMPTY_PARAM_VALUE)\n      .set('format', format || EMPTY_PARAM_VALUE);\n\n    return this.http.get<T>(url, { params });\n  }\n}\n","import { DataColumn } from './data-column';\n\n\nexport function stripTableName(tableName: string): string {\n  return (tableName || '').split('.').slice(-1)[0];\n}\n\n\nexport interface DataTable {\n  columns: DataColumn[];\n  dataSourceId: string;\n  page: number;\n  pageSize: number;\n  primaryKeys: string[];\n  records: any[];\n  table: string;\n}\n","import { DataSource } from './data-source';\nimport { isString } from '../core/type-check/is-string.function';\n\n\nexport function getDataSourceId(dataSource: string | DataSource): string {\n  let dataSourceId;\n  if (isString(dataSource)) {\n    dataSourceId = dataSource as string;\n  } else {\n    const src = dataSource as DataSource;\n    if (src) {\n      dataSourceId = src.id;\n    }\n  }\n\n  return dataSourceId;\n}\n","import { DataSourceProviderType } from './data-source-provider-type';\n\n\nexport function isOracleProvider(providerType: DataSourceProviderType) {\n  return providerType === DataSourceProviderType.Oracle || providerType === DataSourceProviderType.OracleDevArt;\n}\n","import { STANDARDIZED_QUERY_DATE_FORMAT, ORACLE_DATE_FORMAT, DEFAULT_DATE_FORMAT } from '../core/date-time/date-time.constants';\nimport { isOracleProvider } from './is-oracle-provider.function';\nimport { DataSourceProviderType } from './data-source-provider-type';\n\n\nexport function getDateFormatForProvider(providerType: DataSourceProviderType): string {\n  if (!providerType) {\n    return STANDARDIZED_QUERY_DATE_FORMAT;\n  } else if (isOracleProvider(providerType)) {\n    return ORACLE_DATE_FORMAT;\n  } else {\n    return DEFAULT_DATE_FORMAT;\n  }\n}\n","import { DataSourceProviderType } from './data-source-provider-type';\n\n\nexport function isEnterpriseProvider(providerType: DataSourceProviderType) {\n  return providerType === DataSourceProviderType.SqlServer\n    || providerType === DataSourceProviderType.Oracle\n    || providerType === DataSourceProviderType.OracleDevArt;\n}\n","export const SEED_POD_FILE_EXTENSION = '.tss';\n","import { hasTokens } from '../../core/tokens/has-tokens.function';\nimport { isString } from '../../core/type-check/is-string.function';\nimport { canNotBeNumber } from '../../core/type-check/can-not-be-number.function';\nimport { Orderable } from '../../core/sort/orderable';\n\n\nexport type DomainType = 'codedValue';\nexport type MergePolicyType = 'esriMPTDefaultValue' | 'esriMPTAreaWeighted' | 'esriMPTSumValues';\nexport type SplitPolicyType = 'esriSPTDefaultValue' | 'esriSPTDuplicate' | 'esriSPTGeometryRatio';\n\nexport type FieldType = 'id' | 'esriFieldTypeOID' | 'id-string'\n  | 'string' | 'esriFieldTypeString'\n  | 'number' | 'esriFieldTypeNumber'\n  | 'double' | 'esriFieldTypeDouble'\n  | 'int' | 'esriFieldTypeSmallInteger'\n  | 'date' | 'esriFieldTypeDate'\n  | 'geometry' | 'esriFieldTypeGeometry'\n  | 'xml' | 'esriFieldTypeXML'\n  | 'blob' | 'esriFieldTypeBlob'\n  | 'guid' | 'esriFieldTypeGUID'\n  | 'globalId' | 'esriFieldTypeGlobalID'\n  | 'integer' | 'esriFieldTypeInteger'\n  | 'raster' | 'esriFieldTypeRaster'\n  | 'single' | 'esriFieldTypeSingle';\n\nexport type FieldRole = 'identity'\n  | 'latitude'\n  | 'longitude'\n  | 'x'\n  | 'y'\n  | 'accuracy'\n  | 'altitude'\n  | 'altitude-accuracy'\n  | 'heading'\n  | 'speed'\n  | 'username'\n  | 'user-email'\n  | 'user-firstname'\n  | 'user-lastname'\n  | 'date-now'\n  | 'measure'\n  | 'from-measure'\n  | 'to-measure';\n\nexport type LayerFieldCodedValueCode = string | number;\n\nexport const FIELD_TYPE_OID: FieldType = 'id';\nexport const FIELD_TYPE_OID_STRING: FieldType = 'id-string';\nexport const FIELD_TYPE_STRING: FieldType = 'string';\nexport const FIELD_TYPE_NUMBER: FieldType = 'number';\nexport const FIELD_TYPE_XML: FieldType = 'xml';\nexport const FIELD_TYPE_BLOB: FieldType = 'blob';\nexport const FIELD_TYPE_DATE: FieldType = 'date';\nexport const FIELD_TYPE_DOUBLE: FieldType = 'double';\nexport const FIELD_TYPE_GUID: FieldType = 'guid';\nexport const FIELD_TYPE_GEOMETRY: FieldType = 'geometry';\nexport const FIELD_TYPE_GLOBALID: FieldType = 'globalId';\nexport const FIELD_TYPE_INTEGER: FieldType = 'integer';\nexport const FIELD_TYPE_RASTER: FieldType = 'raster';\nexport const FIELD_TYPE_SINGLE: FieldType = 'single';\nexport const FIELD_TYPE_SMALL_INTEGER: FieldType = 'int';\n\nexport const ESRI_FIELD_TYPE_OID: FieldType = 'esriFieldTypeOID';\nexport const ESRI_FIELD_TYPE_STRING: FieldType = 'esriFieldTypeString';\nexport const ESRI_FIELD_TYPE_NUMBER: FieldType = 'esriFieldTypeNumber';\nexport const ESRI_FIELD_TYPE_XML: FieldType = 'esriFieldTypeXML';\nexport const ESRI_FIELD_TYPE_BLOB: FieldType = 'esriFieldTypeBlob';\nexport const ESRI_FIELD_TYPE_DATE: FieldType = 'esriFieldTypeDate';\nexport const ESRI_FIELD_TYPE_DOUBLE: FieldType = 'esriFieldTypeDouble';\nexport const ESRI_FIELD_TYPE_GUID: FieldType = 'esriFieldTypeGUID';\nexport const ESRI_FIELD_TYPE_GEOMETRY: FieldType = 'esriFieldTypeGeometry';\nexport const ESRI_FIELD_TYPE_GLOBALID: FieldType = 'esriFieldTypeGlobalID';\nexport const ESRI_FIELD_TYPE_INTEGER: FieldType = 'esriFieldTypeInteger';\nexport const ESRI_FIELD_TYPE_RASTER: FieldType = 'esriFieldTypeRaster';\nexport const ESRI_FIELD_TYPE_SINGLE: FieldType = 'esriFieldTypeSingle';\nexport const ESRI_FIELD_TYPE_SMALL_INTEGER: FieldType = 'esriFieldTypeSmallInteger';\n\nexport const FIELD_METADATA: FieldMetadata[] = [\n  { alias: 'ID', isNumeric: true, types: [FIELD_TYPE_OID, ESRI_FIELD_TYPE_OID] },\n  { alias: 'ID', isNumeric: false, types: [FIELD_TYPE_OID_STRING] },\n  { alias: 'string', isNumeric: false, types: [FIELD_TYPE_STRING, ESRI_FIELD_TYPE_STRING] },\n  { alias: 'number', isNumeric: true, types: [FIELD_TYPE_NUMBER, ESRI_FIELD_TYPE_NUMBER] },\n  { alias: 'double', isNumeric: true, types: [FIELD_TYPE_DOUBLE, ESRI_FIELD_TYPE_DOUBLE] },\n  { alias: 'int', isNumeric: true, types: [FIELD_TYPE_INTEGER, ESRI_FIELD_TYPE_INTEGER, ESRI_FIELD_TYPE_SMALL_INTEGER] },\n  { alias: 'date', isNumeric: false, types: [FIELD_TYPE_DATE, ESRI_FIELD_TYPE_DATE] },\n  { alias: 'geometry', isNumeric: false, types: [FIELD_TYPE_GEOMETRY, ESRI_FIELD_TYPE_GEOMETRY] },\n  { alias: 'xml', isNumeric: false, types: [FIELD_TYPE_XML, ESRI_FIELD_TYPE_XML] },\n  { alias: 'blob', isNumeric: false, types: [FIELD_TYPE_BLOB, ESRI_FIELD_TYPE_BLOB] },\n  { alias: 'guid', isNumeric: false, types: [FIELD_TYPE_GUID, ESRI_FIELD_TYPE_GUID] },\n  { alias: 'globalId', isNumeric: false, types: [FIELD_TYPE_GLOBALID, ESRI_FIELD_TYPE_GLOBALID] },\n  { alias: 'integer', isNumeric: true, types: [FIELD_TYPE_INTEGER, ESRI_FIELD_TYPE_INTEGER] },\n  { alias: 'raster', isNumeric: false, types: [FIELD_TYPE_RASTER, ESRI_FIELD_TYPE_RASTER] },\n  { alias: 'single', isNumeric: false, types: [FIELD_TYPE_SINGLE, ESRI_FIELD_TYPE_SINGLE] },\n];\n\nexport interface FieldMetadata {\n  alias: string;\n  isNumeric: boolean;\n  types: FieldType[];\n}\n\nexport function isFieldGeometryType(fieldType: FieldType): boolean {\n  return fieldType === 'esriFieldTypeGeometry' || fieldType === 'geometry';\n}\n\nexport function isObjectIdType(fieldType: FieldType): boolean {\n  return fieldType === 'esriFieldTypeOID' || fieldType === 'id';\n}\n\nexport function getGeometryField(fields: LayerField[]): LayerField {\n  return (fields || []).find(f => isFieldGeometryType(f.type));\n}\n\nexport function getGeometryFieldName(fields: LayerField[]): string {\n  const field = getGeometryField(fields);\n  return field ? field.name : null;\n}\n\nexport function getIdField(fields: LayerField[]): LayerField {\n  return (fields || []).find(f => isObjectIdType(f.type));\n}\n\nexport function getIdFieldFieldName(fields: LayerField[]): string {\n  const field = getIdField(fields);\n  return field ? field.name : null;\n}\n\nexport function isFieldExpression(fieldNameOrExpression: string): boolean {\n  return hasTokens(fieldNameOrExpression);\n}\n\nexport function toFieldType(field: FieldType | LayerField): FieldType {\n  return isString(field)\n    ? field as FieldType\n    : (field as LayerField).type;\n}\n\nexport function toFieldName(field: string | LayerField): string {\n  return isString(field) ? field as string : (field as LayerField).name;\n}\n\nexport function getField(fieldName: string, fields: LayerField[]): LayerField | null {\n  return fields.find(f => f.name === fieldName) || null;\n}\n\nexport function getFieldAlias(fieldName: string, fields: LayerField[]): string | null {\n  let fieldAlias = null;\n  const field = getField(fieldName, fields);\n  if (field && field.alias) {\n    fieldAlias = field.alias;\n  }\n\n  return fieldAlias;\n}\n\nexport function isFieldNumeric(field: FieldType | LayerField): boolean {\n  const fieldType = toFieldType(field);\n  const match = FIELD_METADATA\n    .filter(f => f.isNumeric)\n    .find(f => f.types.indexOf(fieldType) > -1);\n\n  return Boolean(match);\n}\n\nexport function isFieldValueNumeric(field: FieldType | LayerField, value: any): boolean {\n  const fieldType = toFieldType(field);\n  if (isObjectIdType(fieldType) && canNotBeNumber(value)) {\n    return false;\n  }\n\n  return isFieldNumeric(field);\n}\n\nexport interface LayerFieldCodedValue {\n  name: string;\n  code: LayerFieldCodedValueCode;\n  order?: number;\n}\n\nexport interface LayerFieldDomain {\n  type: DomainType;\n  name: string;\n  codedValues: LayerFieldCodedValue[];\n  mergePolicy: MergePolicyType;\n  splitPolicy: SplitPolicyType;\n}\n\nexport interface LayerField extends Orderable {\n  name: string;\n  type: FieldType;\n  alias?: string;\n  length?: number;\n  editable?: boolean;\n  nullable?: boolean;\n  defaultValue?: any;\n  domain?: LayerFieldDomain;\n  domainName?: string;\n  hidden?: boolean;\n  order?: number;\n  role?: FieldRole;\n  placeholder?: string;\n  min?: number;\n  max?: number;\n}\n","import { LayerField, isFieldValueNumeric } from './fields/layer-field';\n\n\nexport const FIELD_QUOTE = '\"';\nexport enum CriteriaOperator {\n  Equals = '=',\n  DoesNotEqual = '<>',\n  // In = 'IN',\n  // OneOf, NotOneOf, Between, NotBetween, Contains...\n  GreaterThan = '>',\n  LessThan = '<',\n  GreaterOrEqualTo = '>=',\n  LessThanOrEqualTo = '<=',\n}\n\nexport enum TargetOperator {\n  Is = 'IS',\n  Not = 'NOT',\n  In = 'IN',\n  Like = 'LIKE',\n  Between = 'BETWEEN',\n}\n\nexport enum ValueOperator {\n  Wildcard = '%',\n  Null = 'NULL',\n}\n\nexport enum GroupingOperator {\n  OpenParenthesis = '(',\n  ClosedParenthesis = ')',\n  Parenthesis = '()',\n}\n\nexport enum CombiningOperator {\n  And = 'AND',\n  Or = 'OR',\n}\n\nexport interface WhereClauseBuilderOptions {\n  quoteFields?: boolean;\n}\n\nexport const DefaultWhereClauseBuilderOptions = {\n  quoteFields: true\n};\n\nexport class WhereClauseBuilder {\n  private readonly statements: string[] = [];\n  private readonly options: WhereClauseBuilderOptions;\n\n  constructor(options?: WhereClauseBuilderOptions) {\n    this.options = Object.assign({}, DefaultWhereClauseBuilderOptions, options);\n  }\n\n  get criteriaCount(): number {\n    return this.statements.length;\n  }\n\n  add(statement: string): this {\n    this.statements.push(statement);\n    return this;\n  }\n\n  whereEqual(field: LayerField, value: any): this {\n    return value === null\n      ? this.whereIsNull(field.name)\n      : this.where(field.name, CriteriaOperator.Equals, value, isFieldValueNumeric(field, value));\n  }\n\n  whereLike(field: string, value: any): this {\n    return this.add(`${this.formatField(field)} ${TargetOperator.Like} '%${value}%'`);\n  }\n\n  whereStartsWith(field: string, value: any): this {\n    return this.add(`${this.formatField(field)} ${TargetOperator.Like} '${value}%'`);\n  }\n\n  whereEndsWith(field: string, value: any): this {\n    return this.add(`${this.formatField(field)} ${TargetOperator.Like} '%${value}'`);\n  }\n\n  whereNotEqual(field: LayerField, value: any): this {\n    return value === null\n      ? this.whereIsNotNull(field.name)\n      : this.where(field.name, CriteriaOperator.DoesNotEqual, value, isFieldValueNumeric(field, value));\n  }\n\n  whereIsNull(field: string): this {\n    return this.add(`${this.formatField(field)} ${TargetOperator.Is} ${ValueOperator.Null}`);\n  }\n\n  whereIsNotNull(field: string): this {\n    return this.add(`${this.formatField(field)} ${TargetOperator.Is} ${TargetOperator.Not} ${ValueOperator.Null}`);\n  }\n\n  where(field: string, operator: CriteriaOperator | TargetOperator, value: any, isNumeric = false): this {\n    value = isNumeric ? value : `'${value}'`;\n    this.add(`${this.formatField(field)}${operator}${value}`);\n    return this;\n  }\n\n  whereNumeric(field: string, value: any): this {\n    this.where(field, value, true);\n    return this;\n  }\n\n  toWhereClause(): string {\n    return this.statements.join(` ${CombiningOperator.And} `);\n  }\n\n  toString(): string {\n    return this.toWhereClause();\n  }\n\n  clear() {\n    this.statements.length = 0;\n  }\n\n  protected formatField(field: string) {\n    field = field || '';\n    const addQuotes = this.options.quoteFields;\n\n    if (addQuotes) {\n      if (!field.startsWith(FIELD_QUOTE)) {\n        field = `${FIELD_QUOTE}${field}`;\n      }\n\n      if (!field.endsWith(FIELD_QUOTE)) {\n        field = `${field}${FIELD_QUOTE}`;\n      }\n    } else {\n      const quoteRegex = new RegExp(FIELD_QUOTE, 'i');\n      return field.replace(quoteRegex, '');\n    }\n\n    return field;\n  }\n}\n","import { WhereClauseBuilder, CriteriaOperator, WhereClauseBuilderOptions } from '../maps/where-clause-builder';\nimport { LrsReferenceLayer, TemporalLayer } from './lrs-layer';\nimport { NetworkLayer } from './networks/network-layer';\nimport { EventLayer } from './events/event-layer';\nimport { DataSource } from '../data-source/data-source';\nimport { toUtcDate } from '../core/date-time/conversion/to-utc-date.function';\nimport { setDateToBeginningOfDay } from '../core/date-time/set-date-to-beginning-of-date.function';\nimport { DataSourceProviderType } from '../data-source/data-source-provider-type';\nimport { getDateFormatForProvider } from '../data-source/get-date-format-for-provider.function';\nimport { format } from '../core/formatting/format.function';\nimport { formatDateForQuery } from '../core/date-time/format/format-date-for-query.function';\n\n\nexport const NO_TEMPORAL_LAYER_SUPPLIED_ERROR_MSG = 'No LRS temporal layers supplied';\nexport const NO_REFERENCE_LAYER_SUPPLIED_ERROR_MSG = 'No LRS reference layer supplied';\nexport const LRS_DATE_WHERE_CLAUSE_TEMPLATE = '(({fromDateFieldName} IS NULL OR {fromDateFieldName} <= {dateEndOfDay})'\n  + ' AND ({toDateFieldName} IS NULL OR {toDateFieldName} > {date}))';\nexport const LRS_POINT_EVENT_WHERE_CLAUSE_TEMPLATE = `({fromMeasureFieldName} between {fromMeasure} and {toMeasure})`;\nexport const LRS_LINEAR_EVENT_WHERE_CLAUSE_TEMPLATE = `(({fromMeasureFieldName} between {fromMeasure} AND {toMeasure})`\n  + ` OR ({toMeasureFieldName} between {fromMeasure} AND {toMeasure}) OR ({fromMeasureFieldName} < {fromMeasure}`\n  + ` AND {toMeasureFieldName} > {toMeasure})) AND NOT (({fromMeasureFieldName} < {fromMeasure}`\n  + ` AND {toMeasureFieldName} <= {fromMeasure}) OR ({toMeasureFieldName} > {toMeasure} AND {fromMeasureFieldName} >= {toMeasure}))`;\n\n\nexport function getLrsViewDateWhereStatement(\n  fromDateFieldName: string,\n  toDateFieldName: string,\n  dbType?: DataSourceProviderType,\n  viewDate?: Date\n): string {\n  viewDate = toUtcDate(viewDate || new Date());\n  setDateToBeginningOfDay(viewDate);\n\n  // TODO: Look into whether we need to actually use end of day or not\n  // Currently we are just setting it to same as 'date' - RG.\n  const dateFormat = getDateFormatForProvider(dbType);\n\n  return format(LRS_DATE_WHERE_CLAUSE_TEMPLATE, {\n    fromDateFieldName,\n    toDateFieldName,\n    date: formatDateForQuery(viewDate, dateFormat),\n    dateEndOfDay: formatDateForQuery(viewDate, dateFormat),\n  });\n}\n\nexport class LrsWhereClauseBuilder extends WhereClauseBuilder {\n  // private networkLayer: NetworkLayer;\n  // private eventLayer: EventLayer;\n  private temporalLayer: TemporalLayer;\n  private referenceLayer: LrsReferenceLayer;\n  private sourceDbType: DataSourceProviderType;\n\n  constructor(options?: WhereClauseBuilderOptions) {\n    super(options);\n  }\n\n  withDataSource(sourceData: DataSource): this {\n    return this.withDataProvider(sourceData.providerName);\n  }\n\n  withDataProvider(sourceDbType: DataSourceProviderType): this {\n    this.sourceDbType = sourceDbType;\n    return this;\n  }\n\n  withEventLayer(eventLayer: EventLayer): this {\n    return this\n      .withTemporalLayer(eventLayer)\n      .withReferenceLayer(eventLayer);\n  }\n\n  withReferenceLayer(referenceLayer: LrsReferenceLayer): this {\n    this.referenceLayer = referenceLayer;\n    return this;\n  }\n\n  withNetworkLayer(networkLayer: NetworkLayer): this {\n    return this.withTemporalLayer(networkLayer);\n  }\n\n  withTemporalLayer(temporalLayer: TemporalLayer): this {\n    this.temporalLayer = temporalLayer;\n    return this;\n  }\n\n  withRouteId(routeId: string | number, routeIdFieldName?: string): this {\n    return this.where(routeIdFieldName || this.referenceLayer.routeIdFieldName, CriteriaOperator.Equals, routeId);\n  }\n\n  withViewDate(viewDate?: Date, fromDateFieldName?: string, toDateFieldName?: string): this {\n    if (this.temporalLayer) {\n      fromDateFieldName = fromDateFieldName || this.temporalLayer.fromDateFieldName;\n      toDateFieldName = toDateFieldName || this.temporalLayer.toDateFieldName;\n    }\n\n    const hasDateFieldInfo = Boolean(this.temporalLayer || fromDateFieldName && toDateFieldName);\n    if (!hasDateFieldInfo) {\n      throw new Error(NO_TEMPORAL_LAYER_SUPPLIED_ERROR_MSG);\n    }\n\n    if (fromDateFieldName && toDateFieldName) {\n      const dateClause = getLrsViewDateWhereStatement(\n        this.formatField(fromDateFieldName),\n        this.formatField(toDateFieldName),\n        this.sourceDbType,\n        viewDate\n      );\n\n      this.add(dateClause);\n    }\n\n    return this;\n  }\n\n  betweenMeasures(fromMeasure: number, toMeasure: number, fromMeasureFieldName?: string, toMeasureFieldName?: string): this {\n    if (this.referenceLayer) {\n      fromMeasureFieldName = fromMeasureFieldName || this.referenceLayer.fromMeasureFieldName;\n      toMeasureFieldName = toMeasureFieldName || this.referenceLayer.toMeasureFieldName;\n    }\n\n    const hasMeasureFieldInfo = Boolean(this.referenceLayer || fromMeasureFieldName);\n    if (!hasMeasureFieldInfo) {\n      throw new Error(NO_REFERENCE_LAYER_SUPPLIED_ERROR_MSG);\n    }\n\n    const whereTemplate = toMeasureFieldName\n      ? LRS_LINEAR_EVENT_WHERE_CLAUSE_TEMPLATE\n      : LRS_POINT_EVENT_WHERE_CLAUSE_TEMPLATE;\n\n    const measureClause = format(whereTemplate, {\n      fromMeasureFieldName: this.formatField(fromMeasureFieldName),\n      toMeasureFieldName: this.formatField(toMeasureFieldName),\n      fromMeasure,\n      toMeasure,\n    });\n\n    return this.add(measureClause);\n  }\n}\n","// Angular.\nimport { HttpClient } from '@angular/common/http';\n\n// TSS.\nimport { Logger } from '../core/logging/logger.service';\nimport { LrsWhereClauseBuilder } from '../lrs/lrs-where-clause-builder';\nimport { EsriConfig } from './esri-config';\nimport { EsriMapServiceErrorResponse } from './esri-map-server-error-response';\nimport { DataSourceConfig } from '../data-source/data-source-config';\n\n\nexport abstract class BaseEsriService {\n  constructor(protected http: HttpClient, protected config: EsriConfig, protected dataConfig: DataSourceConfig, protected log: Logger) {\n  }\n\n  protected shouldUsePostMethod(payload: string | {}): boolean {\n    return this.config.arcgisQueryMethodStrategy === 'force-post'\n      || JSON.stringify(payload || '').length > this.config.arcgisMaxWhereLengthGetThreshold;\n  }\n\n  protected handleEsriResponseError<T>(response: T | EsriMapServiceErrorResponse, url: string) {\n    const error = response as EsriMapServiceErrorResponse;\n    if (error && error.error) {\n      const returnError = new Error(`Failed to query map service: ${error.error.message}`);\n      this.log.error(`Failed to execute map service request: ${url}`, returnError);\n      throw returnError;\n    }\n  }\n\n  protected getWhereBuilder(): LrsWhereClauseBuilder {\n    return new LrsWhereClauseBuilder({ quoteFields: !this.dataConfig.skipColumnQuotes });\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","import { Injectable } from '@angular/core';\nimport { AutoConfig } from '../core/auto-config.decorator';\n\n\nexport type ArcgisQueryMethodStrategy = 'prefer-get' | 'force-get' | 'force-post';\n\n\n/**\n * Configuration class for storing global ESRI-related settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('EsriConfig')\nexport class EsriConfig {\n  arcgis: { geometryUrl?: string } = {};\n  arcgisQueryMethodStrategy: ArcgisQueryMethodStrategy = 'prefer-get';\n  arcgisMaxWhereLengthGetThreshold = 3500;\n  arcgisPortalUrl: string;\n  arcgisPortalClientId: string;\n\n  get hasGeometryUrl(): boolean {\n    return Boolean(this.arcgis && this.arcgis.geometryUrl);\n  }\n\n  get arcGisGeometryUrl(): string {\n    return this.hasGeometryUrl ? this.arcgis.geometryUrl : null;\n  }\n}\n","export const SORTED_BY_MEASURE_PROPERTY_FLAG = '$$$sorted';\nexport const EARTH_RADIUS_IN_KILOMETERS = 6371;\nexport const EARTH_RADIUS_IN_METERS = 6371008.8;\nexport const WGS_84_SRID = 4326;\n","// 3rd Party.\nimport { Point } from 'geojson';\n\n// TSS.\nimport { SinglePoint } from './single-point';\nimport { isArray } from '../../core/type-check/is-array.function';\n\n\nexport function toSinglePartPointArray(point: SinglePoint): number[] {\n  return isArray(point)\n    ? (point as number[])\n    : (point as Point).coordinates;\n}\n","import { toSinglePartPointArray } from './to-single-part-point.function';\nimport { SinglePoint } from './single-point';\nimport { getLastItem } from '../../core/array/get-last-item.function';\nimport { AnyPoint } from './any-point';\nimport { SORTED_BY_MEASURE_PROPERTY_FLAG } from '../geometry.constants';\nimport { toMultiPartPoint } from './to-multi-part-point.function';\n\n\nexport function getSortResultForPoints(firstPoint: SinglePoint, secondPoint: SinglePoint): number {\n  const first: number[] = toSinglePartPointArray(firstPoint);\n  const second: number[] = toSinglePartPointArray(secondPoint);\n  const firstCoordinateMeasure: number = getLastItem(first);\n  const secondCoordinateMeasure: number = getLastItem(second);\n\n  return firstCoordinateMeasure - secondCoordinateMeasure;\n}\n\nexport function sortPointsByMeasure(points: AnyPoint, cacheSort = false): void {\n  if (points[SORTED_BY_MEASURE_PROPERTY_FLAG]) {\n    return;\n  }\n\n  const coordinates: number[][] = toMultiPartPoint(points);\n  const coordinatesHaveMeasureValue = Boolean(\n    coordinates.length\n    && coordinates[0].length > 2\n  );\n\n  if (coordinatesHaveMeasureValue) {\n    coordinates.sort(getSortResultForPoints);\n    if (cacheSort) {\n      points[SORTED_BY_MEASURE_PROPERTY_FLAG] = true;\n    }\n  }\n}\n","import { isArray } from '../../core/type-check/is-array.function';\nimport { SingleLine } from './line-geometry';\nimport { LineString } from 'geojson';\n\n\nexport function singleLineToCoordinates(line: SingleLine): number[][] {\n  return isArray(line)\n    ? line as number[][]\n    : (line as LineString).coordinates;\n}\n","import { isArray } from '../../core/type-check/is-array.function';\nimport { MultiLine } from './line-geometry';\nimport { MultiLineString } from 'geojson';\n\n\nexport function multiLineToCoordinates(line: MultiLine): number[][][] {\n  return isArray(line)\n    ? line as number[][][]\n    : (line as MultiLineString).coordinates;\n}\n","import { LineGeometry, SingleLine, MultiLine } from './line-geometry';\nimport { toMultiPartPaths } from './to-multi-part-paths.function';\nimport { singleLineToCoordinates } from './single-line-to-coordinates';\nimport { multiLineToCoordinates } from './multi-line-to-coordinates';\n\n\nexport function hasMeasureValues(line: LineGeometry): boolean {\n  const paths: number[][][] = toMultiPartPaths(line);\n  return multiLineHasMeasureValues(paths);\n}\n\nexport function singleLineHasMeasureValues(line: SingleLine): boolean {\n  const coordinates = singleLineToCoordinates(line);\n  return Boolean(\n    coordinates\n    && coordinates.length\n    && coordinates[0].length > 2\n  );\n}\n\nexport function multiLineHasMeasureValues(line: MultiLine): boolean {\n  const coordinates = multiLineToCoordinates(line);\n  return Boolean(\n    coordinates.length\n    && singleLineHasMeasureValues(coordinates[0])\n  );\n}\n","import { toMultiPartPaths } from './to-multi-part-paths.function';\nimport { LineGeometry } from './line-geometry';\nimport { SORTED_BY_MEASURE_PROPERTY_FLAG } from '../geometry.constants';\nimport { sortPointsByMeasure, getSortResultForPoints } from '../point/sort-points.function';\nimport { multiLineHasMeasureValues } from './has-measure-values.function';\n\n\nexport function sortLineByMeasure(line: LineGeometry): void {\n  if (line[SORTED_BY_MEASURE_PROPERTY_FLAG]) {\n    // There's no need to waste time sorting this geometry if it's already been done.\n    return;\n  }\n\n  const paths: number[][][] = toMultiPartPaths(line);\n  if (!multiLineHasMeasureValues(paths)) {\n    // We can not continue sorting if the coordinates do not have measure values in them.\n    return;\n  }\n\n  // We need to sort all of the inner coordinates first, and then the outer paths\n  // because we don't know the min/max of the inner coordinates until this is done.\n  paths.forEach((coordinates: number[][]) => sortPointsByMeasure(coordinates));\n\n  paths.sort((firstCoordinate: number[][], secondCoordinate: number[][]) => {\n    const firstCoordinateFirstPoint = firstCoordinate[0];\n    const secondCoordinateFirstPoint = secondCoordinate[0];\n\n    return getSortResultForPoints(firstCoordinateFirstPoint, secondCoordinateFirstPoint);\n  });\n\n  line[SORTED_BY_MEASURE_PROPERTY_FLAG] = true;\n}\n","import { SinglePoint } from './single-point';\nimport { toSinglePartPointArray } from './to-single-part-point.function';\nimport { getLastItem } from '../../core/array/get-last-item.function';\n\n\nexport function getMeasureFromPoint(point: SinglePoint): number | null {\n  const coordinate: number[] = toSinglePartPointArray(point);\n  const hasMeasureValues = Boolean(\n    coordinate\n    && coordinate.length\n    && coordinate.length > 2\n  );\n\n  return hasMeasureValues\n    ? getLastItem(coordinate)\n    : null;\n}\n","import { LineGeometry } from './line-geometry';\nimport { MeasureExtent } from './measure-extent';\nimport { toMultiPartPaths } from './to-multi-part-paths.function';\nimport { sortLineByMeasure } from './sort-line-by-measure.function';\nimport { getMeasureFromPoint } from '../point/get-measure-from-point.function';\nimport { getLastItem } from '../../core/array/get-last-item.function';\n\n\nexport function getMeasureExtentFromLine(line: LineGeometry): MeasureExtent {\n  const paths = toMultiPartPaths(line);\n  let min: number;\n  let max: number;\n  if (paths.length) {\n    sortLineByMeasure(line);\n    const firstPath: number[][] = paths[0];\n    const lastPath: number[][] = getLastItem(paths);\n    const firstCoordinate: number[] = firstPath[0];\n    const lastCoordinate: number[] = getLastItem(lastPath);\n\n    min = getMeasureFromPoint(firstCoordinate);\n    max = getMeasureFromPoint(lastCoordinate);\n  }\n\n  return {\n    min,\n    max\n  };\n}\n\n","import { getLastItem } from '../../core/array/get-last-item.function';\nimport { toMultiPartPoint } from './to-multi-part-point.function';\nimport { AnyPoint } from './any-point';\nimport { MeasureExtent } from '../line/measure-extent';\nimport { sortPointsByMeasure } from './sort-points.function';\nimport { getMeasureFromPoint } from './get-measure-from-point.function';\n\n\nexport function getMeasureExtentFromPoint(point: AnyPoint): MeasureExtent {\n  const points: number[][] = toMultiPartPoint(point);\n  const firstPoint = points[0];\n  const lastPoint = getLastItem(points);\n  let min;\n  let max;\n\n  sortPointsByMeasure(points);\n\n  min = getMeasureFromPoint(firstPoint);\n  max = getMeasureFromPoint(lastPoint);\n\n  return { min, max };\n}\n","// 3rd Party.\nimport { Geometry, MultiLineString, LineString, MultiPoint, Point } from 'geojson';\n\n// TSS.\nimport { MeasureExtent } from '../line/measure-extent';\nimport { getMeasureExtentFromLine } from '../line/get-measure-extent-from-line.function';\nimport { isLine } from './is-line.function';\nimport { getMeasureExtentFromPoint } from '../point/get-measure-extent-from-point.function';\n\n\nexport function getMeasureExtent(geometry: Geometry): MeasureExtent {\n  let extent: MeasureExtent;\n  if (isLine(geometry)) {\n    const lineGeometry = geometry as LineString | MultiLineString;\n    extent = getMeasureExtentFromLine(lineGeometry);\n  } else {\n    const point = geometry as Point | MultiPoint;\n    extent = getMeasureExtentFromPoint(point);\n  }\n\n  return extent;\n}\n","import { LayerField, LayerFieldCodedValue, LayerFieldCodedValueCode } from './layer-field';\n\n\nexport function getCodedValue(field: LayerField, value: LayerFieldCodedValueCode): LayerFieldCodedValue {\n  return field.domain\n    ? field.domain.codedValues.find(codedValue => codedValue.code === value)\n    : undefined;\n}\n","import { LayerField, LayerFieldCodedValueCode } from './layer-field';\nimport { getCodedValue } from './get-coded-value-domain.function';\n\n\nexport function getCodedValueName(field: LayerField, value: LayerFieldCodedValueCode): string {\n  const codedValue = getCodedValue(field, value);\n  return codedValue\n    ? codedValue.name\n    : undefined;\n}\n","import { LayerField, LayerFieldCodedValueCode } from './layer-field';\nimport { getCodedValueName } from './get-coded-value-name.function';\nimport { isValue } from '../../core/type-check/is-value.function';\n\n\nexport function getCodedValueNameOrDefault(field: LayerField, value: LayerFieldCodedValueCode): string {\n  const name = getCodedValueName(field, value);\n\n  return isValue(name)\n    ? name\n    : String(value);\n}\n","export const DYNAMIC_DATA_REGEX = new RegExp('^layer_(\\\\d+)_field_(\\\\w+|\\\\*):?(\\\\w+)?', 'i');\n\nexport function isDynamicDataExpression(expression: string): boolean {\n  return DYNAMIC_DATA_REGEX.test(expression);\n}\n","// 3rd Party.\nimport { Feature } from 'geojson';\n\n// TSS.\nimport { MapFeature } from '../../maps/map-feature';\n\n\nexport const ALL_FIELD_CRITERIA = '*';\n\nexport function extractFeatureDataByLayer<T>(layerId: number, field: string = '*', ...features: MapFeature[]): T[] {\n  return extractFeatureData<T>(field, ...features.filter(feature => feature.layerId === layerId));\n}\n\nexport function extractFeatureData<T>(field: string = ALL_FIELD_CRITERIA, ...features: Feature[]): T[] {\n  return features.map(feature => field === ALL_FIELD_CRITERIA\n    ? feature.properties\n    : feature.properties[field]);\n}\n","import { isDynamicDataExpression, DYNAMIC_DATA_REGEX } from './is-dynamic-data-expression.function';\nimport { extractFeatureDataByLayer } from './extract-feature-data.function';\nimport { isNumber } from 'util';\nimport { MapFeature } from '../../maps/map-feature';\nimport { sumValues } from '../../core/stats/sum-values.function';\nimport { average } from '../../core/stats/average.function';\nimport { isObject } from '../../core/type-check/is-object.function';\nimport { extractTokenExpressions } from '../../core/tokens/extract-token-expressions.function';\nimport { replaceToken } from '../../core/tokens/replace-token.function';\nimport { format } from '../../core/formatting/format.function';\n\nexport type DynamicDataSubsetKeyword = 'first' | 'last' | 'sum' | 'add' | 'avg' | 'average' | 'concat';\n\nfunction dataValuesToNumbers(dataValues: any[]): number[] {\n  return dataValues\n    .filter(value => isNumber(value))\n    .map(value => Number(value));\n}\n\nfunction evaluateSingleDynamicDataExpression(expression: string, ...features: MapFeature[]): string | '' {\n  const parsedValue = expression.match(DYNAMIC_DATA_REGEX);\n  let expressionValue: {};\n\n  if (parsedValue && parsedValue.length > 2) {\n    const layerId = Number(parsedValue[1]);\n    const field = parsedValue[2];\n    const subsetKeyword: DynamicDataSubsetKeyword = (parsedValue[3] || 'first').toLocaleLowerCase() as DynamicDataSubsetKeyword;\n    const dataValues = extractFeatureDataByLayer(layerId, field, ...features);\n\n    if (subsetKeyword === 'first') {\n      expressionValue = dataValues[0];\n    } else if (subsetKeyword === 'last') {\n      expressionValue = dataValues[dataValues.length - 1];\n    } else if (subsetKeyword === 'sum' || subsetKeyword === 'add') {\n      const numberValues = dataValuesToNumbers(dataValues);\n      expressionValue = sumValues(numberValues);\n    } else if (subsetKeyword === 'avg' || subsetKeyword === 'average') {\n      const numberValues = dataValuesToNumbers(dataValues);\n      expressionValue = average(numberValues);\n    } else if (subsetKeyword === 'concat') {\n      expressionValue = dataValues.join(', ');\n    } else if (subsetKeyword === 'min') {\n      const numberValues = dataValuesToNumbers(dataValues);\n      expressionValue = Math.min(...numberValues);\n    } else if (subsetKeyword === 'max') {\n      const numberValues = dataValuesToNumbers(dataValues);\n      expressionValue = Math.max(...numberValues);\n    } else {\n      throw new Error(`Unsupported dynamic data expression subset keyword '${subsetKeyword}'`);\n    }\n\n    return isObject(expressionValue)\n      ? JSON.stringify(expressionValue)\n      : String(expressionValue);\n  }\n}\n\nfunction evaluateDynamicDataExpression(expression: string, ...features: MapFeature[]): string | '' {\n  const tokenExpressions = extractTokenExpressions(expression);\n  let evaluationResult = expression;\n\n  tokenExpressions\n    .filter(tokenExpression => isDynamicDataExpression(tokenExpression))\n    .forEach(tokenExpression => {\n      const value = evaluateSingleDynamicDataExpression(tokenExpression, ...features);\n      evaluationResult = replaceToken(evaluationResult, tokenExpression, value);\n    });\n\n  return evaluationResult;\n}\n\nexport function evaluteFeatureDataExpression(expression: string, ...features: MapFeature[]): string {\n  const evaluationResult = evaluateDynamicDataExpression(expression, ...features);\n  const firstFeatureProperties = features && features.length\n    ? features[0].properties\n    : {};\n\n  const replaceTokens = Object.assign({}, firstFeatureProperties, {\n    RecordCount: features.length,\n  });\n\n  return format(evaluationResult, replaceTokens);\n}\n","// 3rd Party.\nimport { Feature, Geometry, GeoJsonProperties, BBox } from 'geojson';\n\n// TSS.\nimport { getMeasureExtent } from '../geometry/geometry/get-measure-extent.function';\nimport { isLine } from '../geometry/geometry/is-line.function';\nimport { getIdFieldFieldName, isFieldExpression } from './fields/layer-field';\nimport { getCodedValueNameOrDefault } from './fields/get-coded-value-name-or-default.function';\nimport { evaluteFeatureDataExpression } from '../lrs/data/evaluate-feature-data-expression.function';\nimport { FeatureClassLayer } from './feature-class-layer';\nimport { isPoint } from '../geometry/geometry/is-point.function';\nimport { isPolygon } from '../geometry/geometry/is-polygon.function';\nimport { WGS_84_SRID } from '../geometry/geometry.constants';\nimport { Cloneable } from '../core/clone/cloneable';\nimport { clone } from '../core/clone/clone.function';\n\n\nexport class MapFeature implements Feature, Cloneable<MapFeature> {\n  id?: string | number;\n  geometry: Geometry;\n  properties: GeoJsonProperties;\n  bbox: BBox;\n  type: 'Feature';\n\n  routeId: string;\n  fromMeasure: number;\n  toMeasure: number;\n  layer: FeatureClassLayer;\n  displayValue: any;\n  styleValue: any;\n  isLinear: boolean;\n  isPoint: boolean;\n  isPolygon: boolean;\n  viewDate?: Date;\n  gdbVersion?: string;\n  spatialReferenceId?: number;\n\n  get layerId(): number {\n    return this.layer ? this.layer.id : null;\n  }\n\n  get hasZ(): boolean {\n    return this.layer.hasZ;\n  }\n\n  get hasM(): boolean {\n    return this.layer.hasM;\n  }\n\n  constructor(feature: Feature, layer: FeatureClassLayer, spatialReferenceId = WGS_84_SRID) {\n    this.id = feature.id;\n    this.properties = feature.properties;\n    this.type = feature.type;\n    this.bbox = feature.bbox;\n    this.layer = layer;\n    this.spatialReferenceId = spatialReferenceId;\n\n    const idFieldName = this.getIdFieldName();\n\n    this.id = this.id || this.getValue(idFieldName);\n    this.displayValue = this.getValue(layer.displayField);\n    this.setGeometry(feature.geometry);\n  }\n\n  getIdFieldName(): string {\n    return getIdFieldFieldName(this.layer.fields);\n  }\n\n  getValue(fieldNameOrExpression: string): any {\n    return isFieldExpression(fieldNameOrExpression)\n      ? evaluteFeatureDataExpression(fieldNameOrExpression, this)\n      : this.properties && this.properties[fieldNameOrExpression];\n  }\n\n  getCodedValueNameOrDefault(fieldName: string): any {\n    const value = this.getValue(fieldName);\n    const field = this.layer.getField(fieldName);\n    return getCodedValueNameOrDefault(field, value);\n  }\n\n  setValue(fieldName: string, value: any): this {\n    this.properties[fieldName] = value;\n    return this;\n  }\n\n  setId(id: string | number): this {\n    this.id = id;\n    this.setValue(getIdFieldFieldName(this.layer.fields), id);\n    return this;\n  }\n\n  setGeometry(geometry: Geometry): this {\n    this.geometry = geometry;\n    return this.setGeometryTypeProperties();\n  }\n\n  setMeasureFromGeometry(): this {\n    if (this.geometry) {\n      const extent = getMeasureExtent(this.geometry);\n      this.fromMeasure = extent.min;\n      this.toMeasure = extent.max;\n    }\n    return this;\n  }\n\n  isSpatialReferenceWgs84(): boolean {\n    return this.spatialReferenceId === WGS_84_SRID;\n  }\n\n  clone(): MapFeature {\n    const copyFeature = clone(this.toFeature());\n    return new MapFeature(copyFeature, this.layer);\n  }\n\n  toFeature(): Feature {\n    const feature: Feature = {\n      type: 'Feature',\n      geometry: this.geometry,\n      properties: this.properties,\n      id: this.id,\n      bbox: this.bbox,\n    };\n\n    return feature;\n  }\n\n  toGeoJson(): Feature {\n    return this.toFeature();\n  }\n\n  protected setGeometryTypeProperties(): this {\n    this.isLinear = isLine(this.geometry);\n    this.isPoint = isPoint(this.geometry);\n    this.isPolygon = isPolygon(this.geometry);\n    return this;\n  }\n}\n","// 3rd Party.\nimport { Feature } from 'geojson';\n\n// TSS.\nimport { LrsLayer } from './lrs-layer';\nimport { MapFeature } from '../maps/map-feature';\nimport { isLine } from '../geometry/geometry/is-line.function';\nimport { isPoint } from '../geometry/geometry/is-point.function';\nimport { WGS_84_SRID } from '../geometry/geometry.constants';\nimport { Cloneable } from '../core/clone/cloneable';\nimport { clone } from '../core/clone/clone.function';\n\n\nexport class LrsFeature extends MapFeature implements Cloneable<LrsFeature> {\n  routeId: string;\n  fromMeasure: number;\n  toMeasure: number;\n  layer: LrsLayer;\n  displayValue: any;\n  styleValue: any;\n  viewDate?: Date;\n  gdbVersion?: string;\n\n  get layerId(): number {\n    return this.layer ? this.layer.id : null;\n  }\n\n  get fromDate(): Date {\n    return this.getValue(this.layer.fromDateFieldName);\n  }\n\n  get toDate(): Date {\n    return this.getValue(this.layer.toDateFieldName);\n  }\n\n  get isRetired(): boolean {\n    return Boolean(this.toDate);\n  }\n\n  get isActive(): boolean {\n    return !this.isRetired;\n  }\n\n  constructor(feature: Feature, layer: LrsLayer, spatialReferenceId = WGS_84_SRID) {\n    super(feature, layer, spatialReferenceId);\n\n    if (this.geometry && this.isGeometryTypeInvalid()) {\n      throw new Error(`Unsupported geometry type of ${this.geometry.type} detected.`);\n    }\n  }\n\n  setFromDate(date: Date): this {\n    return this.setValue(this.layer.fromDateFieldName, date);\n  }\n\n  setToDate(date: Date): this {\n    return this.setValue(this.layer.toDateFieldName, date);\n  }\n\n  retire(): this {\n    if (this.layer.toDateFieldName) {\n      this.setValue(this.layer.toDateFieldName, new Date());\n    }\n\n    return this;\n  }\n\n  clone(): LrsFeature {\n    const copyFeature = clone(this.toFeature());\n    return new LrsFeature(copyFeature, this.layer);\n  }\n\n  protected isGeometryTypeValid(): boolean {\n    return isLine(this.geometry) || isPoint(this.geometry);\n  }\n\n  private isGeometryTypeInvalid(): boolean {\n    return !this.isGeometryTypeValid();\n  }\n}\n","// 3rd Party.\nimport { Feature, Geometry, LineString, Point, MultiLineString } from 'geojson';\n\n// TSS.\nimport { LrsFeature } from '../lrs-feature';\nimport { EventLayer } from './event-layer';\nimport { LrsReferenceFeature } from '../lrs-reference-feature';\nimport { toFeature } from '../feature';\nimport { WGS_84_SRID } from '../../geometry/geometry.constants';\nimport { Cloneable } from '../../core/clone/cloneable';\nimport { clone } from '../../core/clone/clone.function';\n\n\nexport class EventFeature extends LrsFeature implements LrsReferenceFeature, Cloneable<EventFeature> {\n  layer: EventLayer;\n\n  constructor(feature: Feature, layer: EventLayer, spatialReferenceId = WGS_84_SRID) {\n    super(feature, layer, spatialReferenceId);\n\n    this.routeId = this.getValue(layer.routeIdFieldName);\n    this.fromMeasure = this.getValue(layer.fromMeasureFieldName);\n    this.toMeasure = this.getValue(layer.toMeasureFieldName);\n  }\n\n  static create(\n    layer: EventLayer,\n    properties: { [name: string]: any; } = {},\n    geometry: Point | LineString | MultiLineString = null\n  ): EventFeature {\n    const feature: Feature = toFeature(properties, geometry as Geometry);\n    return new EventFeature(feature, layer);\n  }\n\n  setRouteId(routeId: string): this {\n    this.routeId = routeId;\n    return this.setValue(routeId, this.layer.routeIdFieldName);\n  }\n\n  setFromMeasure(measure: number): this {\n    this.fromMeasure = measure;\n    return this.setValue(this.layer.fromMeasureFieldName, measure);\n  }\n\n  setToMeasure(measure: number): this {\n    if (!this.isLinear) {\n      throw new Error('Cannot set to measure for a point-based feature');\n    }\n\n    this.toMeasure = measure;\n    return this.setValue(this.layer.toMeasureFieldName, measure);\n  }\n\n  setMeasureExtent(fromMeasure: number, toMeasure: number): this {\n    return this\n      .setFromMeasure(fromMeasure)\n      .setToMeasure(toMeasure);\n  }\n\n  clone(): EventFeature {\n    const copyFeature = clone(this.toFeature());\n    return new EventFeature(copyFeature, this.layer);\n  }\n\n  protected setGeometryTypeProperties(): this {\n    this.isLinear = Boolean(this.layer.toMeasureFieldName);\n    this.isPoint = !this.isLinear;\n    this.isPolygon = false;\n    return this;\n  }\n}\n","// 3rd Party.\nimport { Feature, Geometry } from 'geojson';\n\n// TSS.\nimport { LrsMetadata } from './lrs-metadata';\nimport { LrsFeature } from './lrs-feature';\nimport { NetworkFeature } from './networks/network-feature';\nimport { EventLayer } from './events/event-layer';\nimport { NetworkLayer } from './networks/network-layer';\nimport { EventFeature } from './events/event-feature';\n\n\nexport function toLrsFeature(feature: Feature, layerId: number, lrsMeta: LrsMetadata) {\n  const layerInfo = lrsMeta.getLayerDetail(layerId);\n  let lrsFeature: LrsFeature;\n\n  if (layerInfo.isNetworkLayer) {\n    lrsFeature = new NetworkFeature(feature, layerInfo.layer as NetworkLayer);\n  } else if (layerInfo.isEventLayer) {\n    lrsFeature = new EventFeature(feature, layerInfo.layer as EventLayer);\n  }\n\n  return lrsFeature;\n}\n\n// Feature<G extends GeometryObject | null = Geometry, P = GeoJsonProperties> extends GeoJsonObject\nexport function toFeature(properties: { [name: string]: any; } = {}, geometry: Geometry = null): Feature {\n  return {\n    type: 'Feature',\n    geometry,\n    properties\n  };\n}\n","import { toMultiPartPaths } from './to-multi-part-paths.function';\nimport { LineGeometry } from './line-geometry';\nimport { addRange } from '../../core/array/add-range.function';\nimport { PointComparisonDetails } from '../point/point-comparison-details';\nimport { getMeasureFromPoint } from '../point/get-measure-from-point.function';\n\n\nexport function getPoint(line: LineGeometry, measure: number): number[] {\n  const pointComparisionDetails: PointComparisonDetails[] = [];\n  const paths: number[][][] = toMultiPartPaths(line);\n\n  paths.forEach((coordinates: number[][]) => {\n    const details = comparePathWithMeasure(coordinates, measure);\n    addRange(pointComparisionDetails, details);\n  });\n\n  const minPoint = pointComparisionDetails.reduce((accumulator, value) => minPointCloserToMeasure(accumulator, value, measure));\n  const maxPoint = pointComparisionDetails.reduce((accumulator, value) => maxPointCloserToMeasure(accumulator, value, measure));\n  const measureDeltaPercent = calculateMeasureDelta(minPoint.pointMeasure, maxPoint.pointMeasure, measure);\n  const x = interpolateX(minPoint.pointCoordinate, maxPoint.pointCoordinate, measureDeltaPercent);\n  const y = interpolateY(minPoint.pointCoordinate, maxPoint.pointCoordinate, measureDeltaPercent);\n\n  return [x, y, 0, measure];\n}\n\nfunction interpolateX([minX]: number[], [maxX]: number[], delta: number): number {\n  return minX + delta * (maxX - minX);\n}\n\nfunction interpolateY([, minY]: number[], [, maxY]: number[], delta: number): number {\n  return minY + delta * (maxY - minY);\n}\n\nfunction calculateMeasureDelta(minMeasure: number, maxMeasure: number, measure: number): number {\n  if (maxMeasure === minMeasure) {\n    return 0;\n  }\n\n  return (measure - minMeasure) / (maxMeasure - minMeasure);\n}\n\nfunction comparePathWithMeasure(coordinates: number[][], measureToCompare: number): PointComparisonDetails[] {\n  const pointComparisionDetailsFromPath: PointComparisonDetails[] = coordinates\n    .map(\n      (coordinate: number[], index: number) => compareCoordinateWithMeasure(coordinate, measureToCompare, index)\n    );\n\n  return pointComparisionDetailsFromPath;\n}\n\nfunction compareCoordinateWithMeasure(coordinate: number[], measureToCompare: number, index: number): PointComparisonDetails {\n  const measureFromCoordinate = getMeasureFromPoint(coordinate);\n  const pointDetails: PointComparisonDetails = {\n    pointCoordinate: coordinate,\n    distance: Math.abs(measureFromCoordinate - measureToCompare),\n    pointMeasure: measureFromCoordinate,\n    index\n  };\n\n  return pointDetails;\n}\n\nfunction minPointCloserToMeasure(\n  accumulator: PointComparisonDetails,\n  value: PointComparisonDetails,\n  measureToCompare: number\n): PointComparisonDetails {\n  const isPointCloserToMeasure = value.distance <= accumulator.distance;\n  const isPointLessThanMeasure = value.pointMeasure <= measureToCompare;\n\n  return isPointCloserToMeasure && isPointLessThanMeasure\n    ? value\n    : accumulator;\n}\n\nfunction maxPointCloserToMeasure(\n  point1: PointComparisonDetails,\n  point2: PointComparisonDetails,\n  measureToCompare: number\n): PointComparisonDetails {\n  const isPointCloserToMeasure = point1.distance <= point2.distance;\n  const isPointGreaterThanMeasure = point1.pointMeasure >= measureToCompare;\n\n  return isPointCloserToMeasure && isPointGreaterThanMeasure\n    ? point1\n    : point2;\n}\n","// 3rd Party.\nimport { MultiLineString } from 'geojson';\n\n// TSS.\nimport { LineGeometry } from './line-geometry';\nimport { toMultiPartPaths } from './to-multi-part-paths.function';\n\n\nexport function toMultiLineString(line: LineGeometry): MultiLineString {\n  const coordinates = toMultiPartPaths(line);\n\n  return {\n    bbox: null,\n    type: 'MultiLineString',\n    coordinates\n  };\n}\n","// 3rd Party.\nimport { LineString } from 'geojson';\n\n// TSS.\nimport { SingleLine } from './line-geometry';\nimport { isArray } from '../../core/type-check/is-array.function';\n\n\nexport function toLineString(line: SingleLine): LineString {\n  return isArray(line)\n    ? {\n      bbox: null,\n      type: 'LineString',\n      coordinates: line as number[][]\n    }\n    : line as LineString;\n}\n","// 3rd Party.\nimport { LineString, MultiLineString } from 'geojson';\n\n// TSS.\nimport { LineGeometry } from './line-geometry';\nimport { isArray } from '../../core/type-check/is-array.function';\nimport { isMultiPartLine } from './is-multi-part.function';\nimport { toMultiLineString } from './to-multi-line-string.function';\nimport { toLineString } from './to-line-string.function';\n\n\nexport function toLineOrMultiLineString(line: LineGeometry): LineString | MultiLineString {\n  const isCoordinatesArray = isArray(line);\n  if (!isCoordinatesArray) {\n    return line as (LineString | MultiLineString);\n  }\n\n  const coordinates = line as (number[][] | number[][][]);\n  return isMultiPartLine(coordinates)\n    ? toMultiLineString(coordinates)\n    : toLineString(coordinates as number[][]);\n}\n","export function degreesToRadians(degrees) {\n  return degrees * Math.PI / 180;\n}\n","import { toSinglePartPointArray } from './to-single-part-point.function';\nimport { SinglePoint } from './single-point';\nimport { EARTH_RADIUS_IN_KILOMETERS } from '../geometry.constants';\nimport { degreesToRadians } from '../geometry/degrees-to-radians.function';\nimport { convertLengthUnits } from '../../core/units/convert-length-units.function';\nimport { LengthUnit } from '../../core/units/length-unit';\n\n\nexport function getDistanceBetweenPoints(point1: SinglePoint, point2: SinglePoint): number {\n  const coordinate1: number[] = toSinglePartPointArray(point1);\n  const coordinate2: number[] = toSinglePartPointArray(point2);\n\n  const x1: number = coordinate1[0];\n  const y1: number = coordinate1[1];\n  const x2: number = coordinate2[0];\n  const y2: number = coordinate2[1];\n\n  return getDistanceBetweenPointValues(x1, y1, x2, y2);\n}\n\nexport function getDistanceBetweenPointValues(x1: number, y1: number, x2: number, y2: number): number {\n  // NOTE: This is using the pythagorean theorem (a^2 + b^2 = c^2).\n  const xLength = Math.pow(x2 - x1, 2);\n  const yLength = Math.pow(y2 - y1, 2);\n  const distance = Math.sqrt(xLength + yLength);\n\n  if (isNaN(distance)) {\n    throw new Error(`Unable to calculate distance between points (${x1},${x2} and ${y1},${y2}). Invalid or missing data was provided`);\n  }\n\n  return distance;\n}\n\nexport function getKilometersBetweenLatLng(lat1: number, lng1: number, lat2: number, lng2: number): number {\n  // Modified from: https://stackoverflow.com/questions/365826/calculate-distance-between-2-gps-coordinates - RG.\n  const dLat = degreesToRadians(lat2 - lat1);\n  const dLon = degreesToRadians(lng2 - lng1);\n\n  lat1 = degreesToRadians(lat1);\n  lat2 = degreesToRadians(lat2);\n\n  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);\n\n  const circumference = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n  return EARTH_RADIUS_IN_KILOMETERS * circumference;\n}\n\nexport function getMetersBetweenLatLng(lat1: number, lng1: number, lat2: number, lng2: number): number {\n  return getDistanceBetweenLatLng(lat1, lng1, lat2, lng2, LengthUnit.Meter);\n}\n\nexport function getFeetBetweenLatLng(lat1: number, lng1: number, lat2: number, lng2: number): number {\n  return getDistanceBetweenLatLng(lat1, lng1, lat2, lng2, LengthUnit.Foot);\n}\n\nexport function getMilesBetweenLatLng(lat1: number, lng1: number, lat2: number, lng2: number): number {\n  return getDistanceBetweenLatLng(lat1, lng1, lat2, lng2, LengthUnit.Mile);\n}\n\nexport function getDistanceBetweenLatLng(lat1: number, lon1: number, lat2: number, lon2: number, outputUnit: LengthUnit): number {\n  const distanceInKilometers = getKilometersBetweenLatLng(lat1, lon1, lat2, lon2);\n  return convertLengthUnits(distanceInKilometers, LengthUnit.Kilometer, outputUnit);\n}\n","// 3rd Party.\nimport { Feature, Point, LineString } from 'geojson';\nimport { lineString } from '@turf/helpers';\nimport nearestPointOnLine from '@turf/nearest-point-on-line';\nimport lineSplit from '@turf/line-split';\nimport length from '@turf/length';\n\n// TSS.\nimport { LineGeometry } from './line-geometry';\nimport { SinglePoint } from '../point/single-point';\nimport { getMeasureFromPoint } from '../point/get-measure-from-point.function';\nimport { toSinglePartPointArray } from '../point/to-single-part-point.function';\nimport { isMultiPartLine } from './is-multi-part.function';\nimport { toLineOrMultiLineString } from './to-line-or-multi-line-string.function';\nimport { getDistanceBetweenPoints } from '../point/get-distance-between-points.function';\nimport { GetMeasureOptions } from './get-measure-options';\nimport { getLastItem } from '../../core/array/get-last-item.function';\n\n\nexport function getMeasure(line: LineGeometry, point: SinglePoint, options?: GetMeasureOptions): number {\n  options = Object.assign({\n    lengthUnit: 'miles',\n    coordinateSystem: 'wgs84'\n  }, options);\n\n  const closestPointFeature: Feature<Point> = nearestPointOnLine(line, point);\n  if (!closestPointFeature || !closestPointFeature.geometry) {\n    throw new Error('Unable to get measure for geometry');\n  }\n\n  const foundPointMeasure = getMeasureFromPoint(closestPointFeature.geometry);\n\n  // If the point happens to land on a verticee, then it will already have a measure.\n  if (foundPointMeasure !== null) {\n    return foundPointMeasure;\n  }\n\n  const lineGeometry = toLineOrMultiLineString(line);\n  if (isMultiPartLine(lineGeometry.coordinates)) {\n    throw new Error('MultiLineString is not supported in getMeasure function yet.');\n  }\n\n  return interpolateMeasure(lineGeometry as LineString, closestPointFeature.geometry, options);\n}\n\nfunction interpolateMeasure(line: LineString, pointOnLine: SinglePoint, options: GetMeasureOptions): number {\n  const pointCoordinates = toSinglePartPointArray(pointOnLine);\n  const pointGeometry: Point = { type: 'Point', coordinates: pointCoordinates };\n  const pointFeature: Feature<Point> = { type: 'Feature', geometry: pointGeometry, properties: {} };\n  const lineFeature: Feature<LineString> = {\n    type: 'Feature',\n    geometry: line,\n    properties: {}\n  };\n\n  const splitResult = lineSplit(lineFeature, pointFeature);\n  const firstFeature = splitResult.features[0];\n  const splitVertex = getLastItem(firstFeature.geometry.coordinates);\n  const lastVertexWithMeasureIndex = firstFeature.geometry.coordinates.length - 2;\n  const lastVertexWithMeasure = firstFeature.geometry.coordinates[lastVertexWithMeasureIndex];\n  const newLineSegment = lineString([lastVertexWithMeasure, splitVertex]);\n\n  const measureOffset = options.coordinateSystem === 'flat'\n    ? getDistanceBetweenPoints(lastVertexWithMeasure, splitVertex)\n    : length(newLineSegment, { units: options.lengthUnit as any });\n  const lastVertexMeasure = getMeasureFromPoint(lastVertexWithMeasure);\n\n  return lastVertexMeasure + measureOffset;\n}\n","// 3rd Party.\nimport { Feature, LineString, MultiLineString, Geometry } from 'geojson';\n\n// TSS.\nimport { LrsFeature } from '../lrs-feature';\nimport { NetworkLayer } from './network-layer';\nimport { toFeature } from '../feature';\nimport { SinglePoint } from '../../geometry/point/single-point';\nimport { LineGeometry } from '../../geometry/line/line-geometry';\nimport { getPoint } from '../../geometry/line/get-point.function';\nimport { getMeasure } from '../../geometry/line/get-measure.function';\nimport { WGS_84_SRID } from '../../geometry/geometry.constants';\nimport { Cloneable } from '../../core/clone/cloneable';\nimport { clone } from '../../core/clone/clone.function';\n\n\nexport class NetworkFeature extends LrsFeature implements Cloneable<NetworkFeature> {\n  layer: NetworkLayer;\n\n  constructor(feature: Feature, layer: NetworkLayer, spatialReferenceId = WGS_84_SRID) {\n    super(feature, layer, spatialReferenceId);\n\n    this.routeId = this.getValue(layer.compositeRouteIdFieldName);\n    this.displayValue = this.displayValue || this.routeId;\n    this.setMeasureFromGeometry();\n  }\n\n  static create(\n    layer: NetworkLayer,\n    properties: { [name: string]: any; } = {},\n    geometry: LineString | MultiLineString = null\n  ): NetworkFeature {\n    const feature: Feature = toFeature(properties, geometry as Geometry);\n    return new NetworkFeature(feature, layer);\n  }\n\n  getMeasure(point: SinglePoint): number {\n    return getMeasure(this.geometry as LineGeometry, point);\n  }\n\n  getPoint(measure: number): SinglePoint {\n    return getPoint(this.geometry as LineGeometry, measure);\n  }\n\n  clone(): NetworkFeature {\n    const copyFeature = clone(this.toFeature());\n    return new NetworkFeature(copyFeature, this.layer);\n  }\n}\n","// 3rd Party.\nimport { FeatureCollection, BBox } from 'geojson';\n\n// TSS>\nimport { LrsFeature } from './lrs-feature';\n\n\nexport class LrsFeatureCollection implements FeatureCollection {\n  type: 'FeatureCollection';\n  features: Array<LrsFeature>;\n  bbox?: BBox;\n\n  constructor(collection: FeatureCollection) {\n    this.bbox = collection.bbox;\n    this.type = collection.type;\n  }\n\n  static create(features: LrsFeature[], bbox?: BBox): LrsFeatureCollection {\n    return new LrsFeatureCollection({\n      type: 'FeatureCollection',\n      features,\n      bbox\n    });\n  }\n\n  toGeoJson(): FeatureCollection {\n    return {\n      type: 'FeatureCollection',\n      bbox: this.bbox,\n      features: this.features.map(feature => feature.toGeoJson())\n    };\n  }\n}\n","// 3rd Party.\nimport { FeatureCollection } from 'geojson';\n\n// TSS>\nimport { LrsFeatureCollection } from '../lrs-feature-collection';\nimport { EventFeature } from './event-feature';\nimport { EventLayer } from './event-layer';\nimport { WGS_84_SRID } from '../../geometry/geometry.constants';\n\n\nexport class EventFeatureCollection extends LrsFeatureCollection {\n  type: 'FeatureCollection';\n  features: Array<EventFeature>;\n\n  constructor(collection: FeatureCollection, layer: EventLayer, spatialReferenceId = WGS_84_SRID) {\n    super(collection);\n    this.features = collection.features\n      .map(f => new EventFeature(f, layer, spatialReferenceId));\n  }\n\n  static fromFeatures(layer: EventLayer, ...features: EventFeature[]): EventFeatureCollection {\n    return new EventFeatureCollection({\n      type: 'FeatureCollection',\n      features\n    }, layer);\n  }\n}\n","import { FeatureCollection } from 'geojson';\nimport { NetworkFeature } from './network-feature';\nimport { LrsFeatureCollection } from '../lrs-feature-collection';\nimport { NetworkLayer } from './network-layer';\nimport { WGS_84_SRID } from '../../geometry/geometry.constants';\n\n\nexport class NetworkFeatureCollection extends LrsFeatureCollection {\n  type: 'FeatureCollection';\n  features: Array<NetworkFeature>;\n\n  constructor(collection: FeatureCollection, layer: NetworkLayer, spatialReferenceId = WGS_84_SRID) {\n    super(collection);\n    this.features = collection.features\n      .map(f => new NetworkFeature(f, layer, spatialReferenceId));\n  }\n}\n","import { HttpHeaders, HttpParams } from '@angular/common/http';\nimport { EsriQueryResponseFormat } from './esri-response-format';\nimport { toFormDataString } from '../http/to-form-data-string.function';\nimport { isValue } from '../core/type-check/is-value.function';\n\n\nexport interface AngularHttpOption {\n  headers?: HttpHeaders;\n  observe?: 'body';\n  params?: HttpParams;\n  reportProgress?: boolean;\n  responseType?: 'json';\n  withCredentials?: boolean;\n}\n\nexport function getEsriMapServiceHttOptions(params?: HttpParams, format: EsriQueryResponseFormat = 'json'): AngularHttpOption {\n  const headers = new HttpHeaders();\n  params = params || new HttpParams();\n\n  if (format) {\n    params = params.set('f', format);\n  }\n\n  headers.append('Content-Type', 'application/json');\n  headers.append('Access-Control-Allow-Origin', '*');\n\n  const httpOptions = {\n    withCredentials: true,\n    headers,\n    params,\n  };\n\n  return httpOptions;\n}\n\nexport function addParamsToHttpOptions(httpOption: AngularHttpOption, params: {}): void {\n  Object\n    .keys(params)\n    .filter(key => isValue(params[key]))\n    .forEach(key => {\n      const value = params[key];\n      httpOption.params = httpOption.params.set(key, toFormDataString(value, false));\n    });\n}\n","import { toFormDataString } from './to-form-data-string.function';\n\n\nexport function toFormData(queryParameters: {}): FormData {\n  const formData: FormData = new FormData();\n  Object.keys(queryParameters)\n    .map(key => ({\n      key,\n      value: toFormDataString(queryParameters[key])\n    }))\n    .forEach(keyValue => formData.append(keyValue.key, keyValue.value));\n\n  return formData;\n}\n","import { EsriPortalAuthRedirectOptions } from './portal/esri-portal-auth-redirect-options';\n\n\n// Server identifiers.\nexport const MAP_SERVER_SERVICE_MATCH_IDENTIFIER = /(\\/MapServer$|\\/MapServer\\/)/;\nexport const MAP_SERVER_SERVICE_IDENTIFIER = /(MapServer|MapServer\\/)$/;\nexport const FEATURE_SERVER_SERVICE_IDENTIFIER = /(FeatureServer|FeatureServer\\/)$/;\nexport const IMAGE_SERVER_SERVICE_IDENTIFIER = /(ImageServer|ImageServer\\/)$'/;\n\nexport const FEATURE_SERVER_LAYER_SERVICE_IDENTIFIER = /FeatureServer\\/(\\d+|\\d+\\/)$/;\nexport const MAP_SERVER_LAYER_SERVICE_MATCH_IDENTIFIER = /(\\/MapServer\\/(\\d+|\\d+\\/)|\\/MapServer\\/(\\d+|\\d+\\/)\\/)/;\nexport const MAP_SERVER_LAYER_SERVICE_IDENTIFIER = /MapServer\\/(\\d+|\\d+\\/)$/;\n\nexport const LRS_SERVER_SERVICE_IDENTIFIER = /(MapServer\\/exts\\/LRSServer|MapServer\\/exts\\/LRSServer\\/)$/;\nexport const LRS_SERVER_LAYERS_SERVICE_IDENTIFIER = /(MapServer\\/exts\\/LRSServer\\/layers|MapServer\\/exts\\/LRSServer\\/layers\\/)$/;\n\n// Map endpoints.\nexport const MAP_LAYERS_SERVICE_ENDPOINT = 'layers';\nexport const MAP_LAYER_SERVICE_ENDPOINT = '{layerId}';\nexport const MAP_LAYER_QUERY_SERVICE_ENDPOINT = '{layerId}/query';\nexport const MAP_LAYER_QUERY_RELATED_RECORDS_SERVICE_ENDPOINT = 'layers/{layerId}/queryRelatedRecords';\n\n// LRS endpoints.\nexport const LRS_SERVER_META_ENDPOINT = 'exts/LRSServer';\nexport const LRS_LAYERS_SERVICE_ENDPOINT = 'exts/LRSServer/layers';\nexport const LRS_SERVER_APPLY_EDITS_ENDPOINT = 'exts/LRSServer/applyEdits';\n\n// Network endpoints.\nexport const LRS_GEOMETRY_TO_MEASURE = 'exts/LRSServer/networkLayers/{layerId}/geometryToMeasure';\n\n// Portal.\nexport const PORTAL_SHARING_ENDPOINT = 'sharing';\nexport const PORTAL_OAUTH_AUTHORIZE_ENDPOINT = 'sharing/oauth2/authorize';\nexport const PORTAL_OAUTH_TOKEN_ENDPOINT = 'sharing/rest/oauth2/token';\nexport const PORTAL_GENERATE_TOKEN_ENDPOINT = 'sharing/generateToken';\n\nexport const PORTAL_REDIRECT_URL_PARAMS_BREAK_CHARACTER = '#';\nexport const DEFAULT_PORTAL_OAUTH_REDIRECT_OPTIONS: EsriPortalAuthRedirectOptions = {\n  responseType: 'token',\n  urlParamsBreak: PORTAL_REDIRECT_URL_PARAMS_BREAK_CHARACTER,\n  redirectUrl: window.location.href\n};\n","import { EsriMapServiceGeometryToMeasureOptions } from './esri-geometry-to-measure-options';\n\nexport const DEFAULT_GEOMETRY_TO_MEASURE_OPTIONS: EsriMapServiceGeometryToMeasureOptions = {\n  locations: [],\n  inSR: 4326,\n  outSR: 4326,\n  f: 'json'\n};\n","import { EsriMapServiceGeometryToMeasureOptions } from './esri-geometry-to-measure-options';\nimport { DEFAULT_GEOMETRY_TO_MEASURE_OPTIONS } from './geometry-to-measure.constants';\nimport { isDate } from 'util';\nimport { toUtcEpochDate } from '../../core/date-time/conversion/to-utc-epoch-date.function';\n\n\nexport function getGeometryToMeasureOptions(...options: EsriMapServiceGeometryToMeasureOptions[]) {\n  const mergedOption = Object.assign({}, DEFAULT_GEOMETRY_TO_MEASURE_OPTIONS);\n  (options || [])\n    .forEach(option => Object.assign(mergedOption, option));\n\n  if (isDate(mergedOption.temporalViewDate)) {\n    mergedOption.temporalViewDate = toUtcEpochDate(mergedOption.temporalViewDate as Date);\n  }\n\n  return mergedOption;\n}\n","import { EsriMapServiceQueryOptions } from './esi-map-service-query-options';\nimport { WGS_84_SRID } from '../../geometry/geometry.constants';\n\n\nexport const DEFAULT_MAP_QUERY_OPTIONS: EsriMapServiceQueryOptions = {\n  // mapServiceUrl: '',\n  // layerId: '',\n  where: '1=1',\n  text: '',\n  objectIds: '',\n  time: '',\n  geometry: '',\n  geometryType: 'esriGeometryEnvelope',\n  spatialRel: 'esriSpatialRelIntersects',\n  relationParam: '',\n  outFields: '*',\n  returnGeometry: true,\n  returnTrueCurves: false,\n  maxAllowableOffset: '',\n  geometryPrecision: '',\n  inSR: WGS_84_SRID,\n  outSR: WGS_84_SRID,\n  returnIdsOnly: false,\n  returnCountOnly: false,\n  orderByFields: '',\n  groupByFieldsForStatistics: '',\n  outStatistics: '',\n  returnZ: false,\n  returnM: true,\n  gdbVersion: '',\n  returnDistinctValues: false,\n  resultOffset: '',\n  resultRecordCount: '',\n  queryByDistance: '',\n  returnExtentsOnly: false,\n  datumTransformation: '',\n  parameterValues: '',\n  rangeValues: '',\n  f: 'geojson'\n};\n","import { DEFAULT_MAP_QUERY_OPTIONS } from './esri-query.constants';\nimport { EsriMapServiceQueryOptions } from './esi-map-service-query-options';\n\n\nexport function getMapQueryOptions(...options: EsriMapServiceQueryOptions[]) {\n  const mergedOption = Object.assign({}, DEFAULT_MAP_QUERY_OPTIONS);\n  (options || [])\n    .forEach(option => Object.assign(mergedOption, option));\n\n  return mergedOption;\n}\n","// Angular.\nimport { HttpParams } from '@angular/common/http';\n\n// TSS.\nimport { EsriMapServiceQueryOptions } from './esi-map-service-query-options';\nimport { isValue } from '../../core/type-check/is-value.function';\n\n\nexport function toHttpQueryParams(options: EsriMapServiceQueryOptions, httpParams?: HttpParams) {\n  httpParams = httpParams || new HttpParams();\n  Object.keys(options)\n    .forEach(k => {\n      const value = options[k];\n      if (isValue(value)) {\n        httpParams = httpParams.set(k, value);\n      }\n    });\n\n  return httpParams;\n}\n","import { EsriMapServiceQueryOptions } from './query/esi-map-service-query-options';\nimport { LrsLayer } from '../lrs/lrs-layer';\n\n/**\n * NOTE: There is a bug in ArcGIS Server < v10.5.0 which requies that you do not pass a\n * 'gdbVersion' if that version name is the same version that the layer is published in.\n * We need to strip that GDB version when this occurs.\n */\nexport function tryStripGdbVersion(layer: LrsLayer, options?: EsriMapServiceQueryOptions) {\n  if (layer\n    && options\n    && layer.versionName\n    && options.gdbVersion\n    && layer.versionName.toLowerCase() === options.gdbVersion.toLowerCase()) {\n    options.gdbVersion = undefined;\n  }\n}\n","import { MapLayer } from './map-layer';\nimport { isNumber } from '../core/type-check/is-number.function';\n\n\nexport function toLayerId(layer: MapLayer | number): number {\n  return isNumber(layer) ? layer as number : (layer as MapLayer).id;\n}\n","import { MapLayer } from '../maps/map-layer';\nimport { toLayerId } from '../maps/to-layer-id.function';\nimport { joinAndFomat } from '../core/url/join-and-format.function';\n\n\nexport function joinAndFomatWithLayer(layer: number | MapLayer, tokens: any, ...parts): string {\n  const layerId = toLayerId(layer);\n  return joinAndFomat(Object.assign({}, tokens, {\n    layerId\n  }), ...parts);\n}\n","import { LayerRendererSymbol } from './layer-renderer-symbol';\n\n\nexport function isClassBreakInfoEmpty(info: ClassBreakInfo): boolean {\n  return !info\n    || !info.classMaxValue\n    && !info.label\n    && !info.description\n    && !Object.keys(info.symbol || {}).length;\n}\n\n\nexport interface ClassBreakInfo {\n  symbol: LayerRendererSymbol;\n  label: string;\n  classMaxValue: number;\n  description?: string;\n}\n","import { LayerRendererSymbol } from './layer-renderer-symbol';\n\n\nexport function isUniqueValueInfoEmpty(info: UniqueValueInfo): boolean {\n  return !info\n    || !info.value\n    && !info.label\n    && !info.description\n    && !Object.keys(info.symbol || {}).length;\n}\n\nexport interface UniqueValueInfo {\n  symbol: LayerRendererSymbol;\n  value: string;\n  label: string;\n  description?: string;\n}\n","import { LayerRendererClassificationMethod, LayerRendererType } from './types';\nimport { ClassBreakInfo, isClassBreakInfoEmpty } from './class-break-info';\nimport { UniqueValueInfo, isUniqueValueInfoEmpty } from './unique-value-info';\nimport { LayerRendererSymbol } from './layer-renderer-symbol';\nimport { isArray } from '../../core/type-check/is-array.function';\nimport { rgbToHex } from '../../core/color/rgb-to-hex.function';\nimport { removeWhere } from '../../core/array/remove-where.function';\n\n\nexport const DEFAULT_UNIQUE_VALUE_INFO = null;\nexport const DEFAULT_CLASS_BREAK_VALUE_INFO = null;\nexport const DEFAULT_RENDERER_SYMBOL = {\n  type: 'esriSLS',\n  style: 'esriSLSSolid',\n  color: '#000000',\n  width: 2\n};\n\nexport function isRendererSymbolDefault(symbol: LayerRendererSymbol): boolean {\n  return Object.keys(symbol).length === Object.keys(DEFAULT_RENDERER_SYMBOL).length\n    && symbol.type === DEFAULT_RENDERER_SYMBOL.type\n    && symbol.style === DEFAULT_RENDERER_SYMBOL.style\n    && symbol.color === DEFAULT_RENDERER_SYMBOL.color\n    && symbol.width === DEFAULT_RENDERER_SYMBOL.width;\n}\n\nexport class LayerDrawingInfoRenderer {\n  type: LayerRendererType;\n  field1?: string;\n  field2?: string;\n  field3?: string;\n  fieldDelimiter?: string;\n  valueExpression?: string;\n  classificationMethod?: LayerRendererClassificationMethod;\n  minValue?: number;\n  classBreakInfos?: ClassBreakInfo[];\n  uniqueValueInfos?: UniqueValueInfo[];\n  label?: string;\n  defaultLabel?: string;\n  description?: string;\n  defaultSymbol?: LayerRendererSymbol;\n  symbol?: LayerRendererSymbol;\n\n  get isSimple(): boolean {\n    return this.type === 'simple';\n  }\n\n  get isUniqueValue(): boolean {\n    return this.type === 'uniqueValue';\n  }\n\n  get isClassBreak(): boolean {\n    return this.type === 'classBreaks';\n  }\n\n  get isEmpty(): boolean {\n    return !this.minValue\n      && !this.classBreakInfos.length\n      && !this.uniqueValueInfos.length\n      && isRendererSymbolDefault(this.symbol);\n  }\n\n  get field(): string {\n    return this.field1;\n  }\n\n  set field(value: string) {\n    this.field1 = value;\n  }\n\n  constructor(base?: LayerDrawingInfoRenderer) {\n    Object.assign(this, base);\n    this.type = this.type || 'simple';\n    this.minValue = this.minValue || 0;\n    this.classBreakInfos = this.classBreakInfos || [];\n    this.uniqueValueInfos = this.uniqueValueInfos || [];\n    this.symbol = Object.assign({}, DEFAULT_RENDERER_SYMBOL, this.symbol);\n    this.label = this.label || '';\n    this.description = this.description || '';\n\n    this.standardizeRenderSymbols();\n  }\n\n  getSymbol(value: string | number): LayerRendererSymbol | null {\n    let symbol = this.symbol || this.defaultSymbol;\n\n    if (this.isUniqueValue) {\n      const uniqueValueInfo = this.getUniqueValueInfoOrDefault(value);\n      symbol = isUniqueValueInfoEmpty(uniqueValueInfo) ? null : uniqueValueInfo.symbol;\n    } else if (this.isClassBreak) {\n      const classBreakInfo = this.getClassBreakInfoOrDefault(value);\n      symbol = isClassBreakInfoEmpty(classBreakInfo) ? null : classBreakInfo.symbol;\n    }\n\n    return symbol || this.defaultSymbol || null;\n  }\n\n  getUniqueValueInfo(value: string | number): UniqueValueInfo {\n    if (!this.uniqueValueInfos || !this.uniqueValueInfos.length) {\n      return null;\n    }\n\n    return this.uniqueValueInfos.find(info =>\n      info.value === value || String(info.value) === String(value)\n    );\n  }\n\n  getUniqueValueInfoOrDefault(value: string | number): UniqueValueInfo {\n    return this.getUniqueValueInfo(value) || DEFAULT_UNIQUE_VALUE_INFO;\n  }\n\n  getClassBreakInfo(classValue: string | number): ClassBreakInfo {\n    if (!this.classBreakInfos || !this.classBreakInfos.length) {\n      return null;\n    }\n\n    return this.classBreakInfos.find((value, index) => this.isValueInClassBreakRange(value, classValue, index));\n  }\n\n  getClassBreakInfoOrDefault(value: string | number): ClassBreakInfo {\n    return this.getClassBreakInfo(value) || DEFAULT_CLASS_BREAK_VALUE_INFO;\n  }\n\n  isValueInClassBreakRange(classBreakInfo: ClassBreakInfo, value: string | number, index: number): boolean {\n    const rangeMin = index === 0 ? this.minValue : this.classBreakInfos[index - 1].classMaxValue;\n    const rangeMax = classBreakInfo.classMaxValue;\n    return rangeMin < value && rangeMax > value;\n  }\n\n  clearEmptyInfos(): void {\n    removeWhere(this.uniqueValueInfos, info => isUniqueValueInfoEmpty(info));\n    removeWhere(this.classBreakInfos, info => isClassBreakInfoEmpty(info));\n  }\n\n  getBestRepresentativeColor(value?: string | number): string {\n    let symbol = this.defaultSymbol || this.symbol;\n    if (this.isUniqueValue && this.uniqueValueInfos.length) {\n      const foundInfo = this.getUniqueValueInfo(value);\n      symbol = foundInfo ? foundInfo.symbol : this.uniqueValueInfos[0].symbol;\n    } else if (this.isClassBreak && this.classBreakInfos.length) {\n      const foundInfo = this.getClassBreakInfo(value);\n      symbol = foundInfo ? foundInfo.symbol : this.classBreakInfos[0].symbol;\n    }\n\n    return symbol.color as string;\n  }\n\n  standardizeRenderSymbols(): void {\n    standardizeRenderSymbol(this.defaultSymbol);\n    standardizeRenderSymbol(this.symbol);\n    this.uniqueValueInfos.forEach(info => standardizeRenderSymbol(info.symbol));\n    this.classBreakInfos.forEach(info => standardizeRenderSymbol(info.symbol));\n  }\n}\n\nfunction standardizeRenderSymbol(symbol: LayerRendererSymbol): void {\n  if (!symbol) {\n    return;\n  }\n\n  if (isArray(symbol.color)) {\n    symbol.color = rgbToHex(symbol.color as [number, number, number]);\n  }\n\n  if (symbol.outline && isArray(symbol.outline.color)) {\n    symbol.outline.color = rgbToHex(symbol.outline.color as [number, number, number]);\n  }\n}\n","import { LayerDrawingInfoRenderer } from './layer-drawing-info-renderer';\nimport { LayerRendererSymbol } from './layer-renderer-symbol';\nimport { transparencyToOpacity } from '../../core/color/transparency-to-opacity.function';\n\nexport interface DrawingInfoProperties {\n  renderer?: LayerDrawingInfoRenderer;\n  transparency?: number;\n  positionRenderer?: LayerDrawingInfoRenderer;\n  labelingInfo?: any; // TODO: Add type for labeling info - RG.\n}\n\nexport class LayerDrawingInfo implements DrawingInfoProperties {\n  renderer: LayerDrawingInfoRenderer;\n  transparency: number;\n  zIndex: number | null;\n  positionRenderer: LayerDrawingInfoRenderer;\n  labelingInfo: any;\n\n  get isEmpty(): boolean {\n    return !this.transparency\n      && !this.zIndex\n      && this.renderer.isEmpty\n      && this.positionRenderer.isEmpty\n      && !Object.keys(this.labelingInfo || {}).length;\n  }\n\n  get opacity(): number {\n    return transparencyToOpacity(this.transparency);\n  }\n\n  constructor(...baseDrawingInfos: (LayerDrawingInfo | DrawingInfoProperties)[]) {\n    this.merge(...baseDrawingInfos);\n    this.transparency = this.transparency || 0;\n    this.zIndex = this.zIndex || null;\n    this.renderer = new LayerDrawingInfoRenderer(this.renderer);\n    this.positionRenderer = new LayerDrawingInfoRenderer(this.positionRenderer);\n    this.labelingInfo = this.labelingInfo || null;\n  }\n\n  merge(...targetDrawingInfos: (LayerDrawingInfo | DrawingInfoProperties)[]): this {\n    const properties = targetDrawingInfos.map(info =>\n      info && (info as LayerDrawingInfo).toProperties\n        ? (info as LayerDrawingInfo).toProperties()\n        : info\n    );\n\n    Object.assign(this, ...properties);\n    return this;\n  }\n\n  getRendererSymbol(value?: string | number): LayerRendererSymbol {\n    return this.renderer.getSymbol(value);\n  }\n\n  getPositionRendererSymbol(value?: string | number): LayerRendererSymbol {\n    return this.positionRenderer.getSymbol(value);\n  }\n\n  getBestRepresentativeColor(value?: string | number): string {\n    return this.renderer.getBestRepresentativeColor(value);\n  }\n\n  toProperties(): DrawingInfoProperties {\n    const infoProperties: DrawingInfoProperties = {};\n    if (this.labelingInfo) {\n      infoProperties.labelingInfo = this.labelingInfo;\n    }\n\n    if (this.positionRenderer && !this.positionRenderer.isEmpty) {\n      infoProperties.positionRenderer = this.positionRenderer;\n    }\n\n    if (this.renderer && !this.renderer.isEmpty) {\n      infoProperties.renderer = this.renderer;\n    }\n\n    if (this.transparency) {\n      infoProperties.transparency = this.transparency;\n    }\n\n    return infoProperties;\n  }\n}\n","import { MapLayerType, QueryType, MapLayer } from './map-layer';\nimport { LayerRelationship } from './layer-relationship';\nimport { LayerField, getFieldAlias, getField, LayerFieldDomain } from './fields/layer-field';\nimport { LayerIndex } from './layer-index';\nimport { GeometryExtent } from './geometry-extent';\nimport { LayerDrawingInfo } from './drawing/layer-drawing-info';\nimport { StyleableLayer } from './drawing/styleable-layer';\nimport { Cloneable } from '../core/clone/cloneable';\nimport { clone } from '../core/clone/clone.function';\n\n\nexport type GeometryType = 'point' | 'esriGeometryPoint'\n  | 'line' | 'esriGeometryPolyline'\n  | 'polygon' | 'esriGeometryPolygon';\n\nexport const POINT_GEOMETRY_TYPES: GeometryType[] = ['point', 'esriGeometryPoint'];\nexport const LINEAR_GEOMETRY_TYPES: GeometryType[] = ['line', 'esriGeometryPolyline'];\nexport const POLYGON_GEOMETRY_TYPES: GeometryType[] = ['polygon', 'esriGeometryPolygon'];\n\nexport function isPointGeometryType(geometryType: GeometryType) {\n  return POINT_GEOMETRY_TYPES.indexOf(geometryType) > -1;\n}\n\nexport function isLinearGeometryType(geometryType: GeometryType) {\n  return LINEAR_GEOMETRY_TYPES.indexOf(geometryType) > -1;\n}\n\nexport function isPolygonGeometryType(geometryType: GeometryType) {\n  return POLYGON_GEOMETRY_TYPES.indexOf(geometryType) > -1;\n}\n\nexport class FeatureClassLayer implements MapLayer, StyleableLayer, Cloneable<FeatureClassLayer> {\n  id: number;\n  name?: string;\n  type?: MapLayerType;\n  parentLayer?: number;\n  subLayers?: { id: string, name: string }[];\n  description?: string;\n  hasAttachments?: boolean;\n  currentVersion?: number;\n  geometryType?: GeometryType;\n  sourceSpatialReference?: { wkid: number, latestWkid?: number };\n  minScale?: number;\n  maxScale?: number;\n  extent?: GeometryExtent;\n  displayField?: string;\n  typeIdField?: string;\n  fields?: LayerField[];\n  indexes?: LayerIndex[];\n  relationships?: LayerRelationship[];\n  maxRecordCount?: number;\n  supportsStatistics?: boolean;\n  supportsAdvancedQueries?: boolean;\n  hasZ?: boolean;\n  hasM?: boolean;\n  supportedQueryFormats?: QueryType[];\n  supportsDatumTransformation?: boolean;\n  isDataVersioned?: boolean;\n  drawingInfo?: LayerDrawingInfo;\n  order?: number;\n\n  get isPoint(): boolean {\n    return isPointGeometryType(this.geometryType);\n  }\n\n  get isLinear(): boolean {\n    return isLinearGeometryType(this.geometryType);\n  }\n\n  get isPolygon(): boolean {\n    return isPolygonGeometryType(this.geometryType);\n  }\n\n  get displayFieldAlias(): string {\n    return this.getFieldAlias(this.displayField);\n  }\n\n  constructor(...sources: MapLayer[]) {\n    Object.assign(this, ...sources);\n\n    this.subLayers = this.subLayers || [];\n    this.fields = this.fields || [];\n    this.indexes = this.indexes || [];\n    this.relationships = this.relationships || [];\n    this.supportedQueryFormats = this.supportedQueryFormats || [];\n    this.drawingInfo = new LayerDrawingInfo(this.drawingInfo);\n  }\n\n  getField(fieldName: string): LayerField | null {\n    return getField(fieldName, this.fields);\n  }\n\n  getFieldAlias(fieldName: string): string | null {\n    return getFieldAlias(fieldName, this.fields);\n  }\n\n  applyFieldDomains(domains: LayerFieldDomain[]): this {\n    if (domains.length) {\n      this.fields\n        .filter(f => f.domainName)\n        .forEach(field =>\n          field.domain = domains.find(domain => domain.name === field.domainName) || field.domain\n        );\n    }\n\n    return this;\n  }\n\n  clone(): FeatureClassLayer {\n    const copy = clone(this);\n    return new FeatureClassLayer(copy);\n  }\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n// 3rd Party.\nimport { Observable } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\n\n// TSS.\nimport { Logger } from '../core/logging/logger.service';\n\nimport { NetworkFeature } from '../lrs/networks/network-feature';\nimport { NetworkLayer } from '../lrs/networks/network-layer';\nimport { EventLayer } from '../lrs/events/event-layer';\nimport { LrsMetadata } from '../lrs/lrs-metadata';\nimport { EventFeature } from '../lrs/events/event-feature';\nimport { EventFeatureCollection } from '../lrs/events/event-feature-collection';\nimport { NetworkFeatureCollection } from '../lrs/networks/network-feature-collection';\n\nimport { MapServerMetadata } from '../maps/map-server-metadata';\nimport { CriteriaOperator } from '../maps/where-clause-builder';\n\nimport { EsriMapServiceQueryOptions } from './query/esi-map-service-query-options';\nimport { EsriConfig } from './esri-config';\nimport { getEsriMapServiceHttOptions, AngularHttpOption, addParamsToHttpOptions } from './esri-map-service-request';\nimport { EsriMapServiceErrorResponse } from './esri-map-server-error-response';\nimport { FeatureCollection } from 'geojson';\n\nimport { MapLayer } from '../maps/map-layer';\nimport { LayerField, toFieldName } from '../maps/fields/layer-field';\nimport { DataSourceConfig } from '../data-source/data-source-config';\nimport { GeodatbaseVersion } from '../maps/geodatabase-version';\nimport { LrsInfo } from '../lrs/lrs-info';\nimport { EsriApplyEditsResponse } from './lrs-server/esri-apply-edits-response';\nimport { EsriEventEdits } from './lrs-server/esri-event-edits';\nimport { toFormData } from '../http/to-form-data.function';\nimport {\n  MAP_LAYERS_SERVICE_ENDPOINT,\n  LRS_LAYERS_SERVICE_ENDPOINT,\n  MAP_LAYER_QUERY_SERVICE_ENDPOINT,\n  LRS_SERVER_META_ENDPOINT,\n  LRS_SERVER_APPLY_EDITS_ENDPOINT,\n  LRS_GEOMETRY_TO_MEASURE,\n  MAP_LAYER_SERVICE_ENDPOINT\n} from './esri.constants';\nimport { EsriMapServiceGeometryToMeasureOptions } from './geometry-to-measure/esri-geometry-to-measure-options';\nimport { getGeometryToMeasureOptions } from './geometry-to-measure/get-geometry-to-measure-options.function';\nimport { EsriGeometryToMeasureResult } from './geometry-to-measure/esri-geometry-to-measure-result';\nimport { getMapQueryOptions } from './query/get-map-query-options.function';\nimport { toHttpQueryParams } from './query/to-http-query-params.function';\nimport { tryStripGdbVersion } from './try-strip-gdb-version.function';\nimport { toLayerId } from '../maps/to-layer-id.function';\nimport { BaseEsriService } from './base-esri.service';\nimport { joinAndFomatWithLayer } from './join-and-format-with-layer.function';\nimport { join } from '../core/url/join.function';\nimport { format } from '../core/formatting/format.function';\nimport { FeatureClassLayer } from '../maps/feature-class-layer';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EsriMapServerService extends BaseEsriService {\n  constructor(http: HttpClient, config: EsriConfig, dataConfig: DataSourceConfig, log: Logger) {\n    super(http, config, dataConfig, log);\n  }\n\n  /**\n   * Retrieves the map service metadata for all layers.\n   */\n  getMapLayers(serviceUrl: string): Observable<MapServerMetadata> {\n    const url = join(serviceUrl, MAP_LAYERS_SERVICE_ENDPOINT);\n    return this.http\n      .get<MapServerMetadata>(url, getEsriMapServiceHttOptions())\n      .pipe(\n        tap((response: any) => this.handleEsriResponseError(response, serviceUrl))\n      );\n  }\n\n  /**\n   * Retrieves the map service metadata for a given layer (by it's ID).\n   */\n  getMapLayer(serviceUrl: string, layerId: number): Observable<FeatureClassLayer> {\n    const url = joinAndFomatWithLayer(layerId, {}, serviceUrl, MAP_LAYER_SERVICE_ENDPOINT);\n    return this.http\n      .get<FeatureClassLayer>(url, getEsriMapServiceHttOptions())\n      .pipe(\n        tap((response: any) => this.handleEsriResponseError(response, serviceUrl)),\n        map(mapLayerMetadata => new FeatureClassLayer(mapLayerMetadata))\n      );\n  }\n\n  /**\n   * Retrieves the LRS Layers Metadata information from the map service\n   */\n  getLrsLayers(serviceUrl: string): Observable<LrsMetadata> {\n    const url = join(serviceUrl, LRS_LAYERS_SERVICE_ENDPOINT);\n    return this.http\n      .get<LrsMetadata>(url, getEsriMapServiceHttOptions())\n      .pipe(\n        tap((response: any) => this.handleEsriResponseError(response, serviceUrl))\n      );\n  }\n\n  /**\n   * Retrieves the LRS Server Metadata information from the map service\n   */\n  getLrsServer(serviceUrl: string): Observable<LrsMetadata> {\n    const url = join(serviceUrl, LRS_SERVER_META_ENDPOINT);\n    return this.http\n      .get<LrsMetadata>(url, getEsriMapServiceHttOptions())\n      .pipe(\n        tap((response: any) => this.handleEsriResponseError(response, serviceUrl))\n      );\n  }\n\n  getVersions(serviceUrl: string, lrsId?: string): Observable<GeodatbaseVersion[]> {\n    return this.getLrsServer(serviceUrl)\n      .pipe(\n        map((metadata: LrsMetadata) => {\n          let lrs: LrsInfo = metadata ? metadata.lrs[0] : null;\n          if (!lrs) {\n            throw new Error(`No LRS infos found`);\n          }\n\n          if (lrsId) {\n            lrs = metadata.lrs.find(lrsInfo => lrsInfo.id === lrsId);\n            if (!lrs) {\n              throw new Error(`No LRS info found with ID '${lrsId}'`);\n            }\n          }\n\n          return lrs.versions;\n        })\n      );\n  }\n\n  singleGeometryToMeasure(\n    serviceUrl: string,\n    networkLayerId: number,\n    routeId: string,\n    x: number,\n    y: number,\n    viewDate?: Date,\n    inSpatialReferenceId = 4326,\n    outputSpatialReferenceId = 4326\n  ): Observable<{ m: number, x: number, y: number, z?: number }> {\n    const locations = [\n      { routeId, geometry: { x, y } }\n    ];\n\n    return this.geometryToMeasure(serviceUrl, networkLayerId, {\n      locations,\n      temporalViewDate: viewDate,\n      inSR: inSpatialReferenceId,\n      outSR: outputSpatialReferenceId,\n    })\n      .pipe(\n        map(result => {\n          const match = { m: null, x: null, y: null, z: null };\n          if (result.locations.length && result.locations[0].results.length) {\n            const [found] = result.locations[0].results;\n            match.m = found.measure;\n            match.x = found.geometry.x;\n            match.y = found.geometry.y;\n          }\n\n          return match;\n        })\n      );\n  }\n\n  geometryToMeasure(\n    serviceUrl: string,\n    networkLayerId: number,\n    options: EsriMapServiceGeometryToMeasureOptions\n  ): Observable<EsriGeometryToMeasureResult> {\n    const endpoint = format(LRS_GEOMETRY_TO_MEASURE, { layerId: networkLayerId });\n    const url = join(serviceUrl, endpoint);\n    const httpOption: AngularHttpOption = getEsriMapServiceHttOptions();\n    const serviceOptions = getGeometryToMeasureOptions(options);\n    const useGetMethod = !this.shouldUsePostMethod(serviceOptions);\n\n    if (useGetMethod) {\n      addParamsToHttpOptions(httpOption, serviceOptions);\n    }\n\n    return (\n      useGetMethod\n        ? this.http.get<EsriGeometryToMeasureResult>(url, httpOption)\n        : this.http.post<EsriGeometryToMeasureResult>(url, toFormData(serviceOptions), httpOption)\n    )\n      .pipe(\n        tap(response => this.handleEsriResponseError(response, serviceUrl)),\n      );\n  }\n\n  applyEdits(serviceUrl: string, edits: EsriEventEdits[], gdbVersion?: string): Observable<EsriApplyEditsResponse> {\n    const url = join(serviceUrl, LRS_SERVER_APPLY_EDITS_ENDPOINT);\n    const options = getEsriMapServiceHttOptions();\n    const useGetMethod = !this.shouldUsePostMethod(edits);\n\n    if (useGetMethod) {\n      options.params = options.params\n        .set('edits', JSON.stringify(edits))\n        .set('gdbVersion', gdbVersion);\n    }\n\n    return (\n      useGetMethod\n        ? this.http.get<EsriApplyEditsResponse>(url, options)\n        : this.http.post<EsriApplyEditsResponse>(url, toFormData({ edits, gdbVersion }), options)\n    )\n      .pipe(\n        tap(response => this.handleEsriResponseError(response, serviceUrl)),\n      );\n  }\n\n  getUniqueValues<T>(\n    serviceUrl: string,\n    layer: MapLayer | number,\n    field: string | LayerField,\n    options?: EsriMapServiceQueryOptions\n  ): Observable<T[]> {\n    const fieldName = toFieldName(field);\n    const queryOptions: EsriMapServiceQueryOptions = getMapQueryOptions({\n      outFields: fieldName,\n      returnDistinctValues: true,\n      returnGeometry: false,\n    }, options);\n\n    return this.query(serviceUrl, toLayerId(layer), queryOptions)\n      .pipe(\n        map(collection => {\n          return collection.features.map(f => f.properties[fieldName]);\n        })\n      );\n  }\n\n  getQueryCount(\n    serviceUrl: string,\n    layer: MapLayer | number,\n    whereClause: string,\n    options?: EsriMapServiceQueryOptions\n  ): Observable<number> {\n    const queryOptions: EsriMapServiceQueryOptions = getMapQueryOptions({\n      returnCountOnly: true,\n      returnGeometry: false,\n      where: whereClause,\n    }, options);\n\n    return this.query(serviceUrl, toLayerId(layer), queryOptions)\n      .pipe(\n        map((result: any) => {\n          return (result || { count: 0 }).count;\n        })\n      );\n  }\n\n  getEvent(\n    serviceUrl: string,\n    layer: EventLayer,\n    eventId: string | number,\n    options?: EsriMapServiceQueryOptions\n  ): Observable<EventFeature> {\n    tryStripGdbVersion(layer, options);\n    throw new Error('Not implemented yet');\n  }\n\n  queryEvents(\n    serviceUrl: string,\n    layer: EventLayer,\n    routeId: string | number,\n    fromMeasure: number,\n    toMeasure: number,\n    viewDate?: Date,\n    options?: EsriMapServiceQueryOptions\n  ): Observable<EventFeatureCollection> {\n    tryStripGdbVersion(layer, options);\n    const where = this.getWhereBuilder()\n      .withEventLayer(layer)\n      .withRouteId(routeId)\n      .withViewDate(viewDate)\n      .betweenMeasures(fromMeasure, toMeasure)\n      .toWhereClause();\n\n    const queryOptions: EsriMapServiceQueryOptions = getMapQueryOptions({ where, returnGeometry: false }, options);\n\n    return this\n      .query(serviceUrl, layer.id, queryOptions)\n      .pipe(\n        map(featureCollection => new EventFeatureCollection(featureCollection, layer))\n      );\n  }\n\n  searchEventsByText(\n    serviceUrl: string,\n    layer: EventLayer,\n    searchText: string,\n    options?: EsriMapServiceQueryOptions\n  ): Observable<EventFeatureCollection> {\n    return this.searchByText(serviceUrl, layer.id, searchText, options)\n      .pipe(\n        tap(response => this.handleEsriResponseError(response, serviceUrl)),\n        map(featureCollection => new EventFeatureCollection(featureCollection, layer))\n      );\n  }\n\n  getRoute(\n    serviceUrl: string,\n    routeId: string | number,\n    layer: NetworkLayer,\n    viewDate?: Date,\n    options?: EsriMapServiceQueryOptions\n  ): Observable<NetworkFeature> {\n    tryStripGdbVersion(layer, options);\n    const where = this.getWhereBuilder()\n      .withNetworkLayer(layer)\n      .where(layer.compositeRouteIdFieldName, CriteriaOperator.Equals, routeId)\n      .withViewDate(viewDate)\n      .toWhereClause();\n\n    const queryOptions: EsriMapServiceQueryOptions = getMapQueryOptions({\n      where\n    }, options);\n\n    return this\n      .query(serviceUrl, layer.id, queryOptions)\n      .pipe(\n        map(x => {\n          return x && x.features && x.features.length\n            ? new NetworkFeature(x.features[0], layer)\n            : null;\n        })\n      );\n  }\n\n  queryRoutes(\n    serviceUrl: string,\n    layer: NetworkLayer,\n    whereClause: string,\n    options?: EsriMapServiceQueryOptions\n  ): Observable<NetworkFeatureCollection> {\n    const queryOptions: EsriMapServiceQueryOptions = getMapQueryOptions({\n      where: whereClause\n    }, options);\n\n    return this.query(serviceUrl, layer.id, queryOptions)\n      .pipe(\n        map(featureCollection => new NetworkFeatureCollection(featureCollection, layer, options.outSR))\n      );\n  }\n\n  searchRoutesByText(\n    serviceUrl: string,\n    layer: NetworkLayer,\n    searchText: string,\n    options?: EsriMapServiceQueryOptions\n  ): Observable<NetworkFeatureCollection> {\n    return this.searchByText(serviceUrl, layer.id, searchText, options)\n      .pipe(\n        map(featureCollection => new NetworkFeatureCollection(featureCollection, layer))\n      );\n  }\n\n  searchByText(\n    serviceUrl: string,\n    layerId: number | MapLayer,\n    searchText: string,\n    options?: EsriMapServiceQueryOptions\n  ): Observable<FeatureCollection> {\n    const queryOptions: EsriMapServiceQueryOptions = getMapQueryOptions({\n      text: searchText\n    }, options);\n\n    // The where clause must be deleted because if a where clause is specified it will override the search text.\n    delete queryOptions.where;\n\n    return this.query(serviceUrl, layerId, queryOptions);\n  }\n\n  query(serviceUrl: string, layerId: number | MapLayer, options: EsriMapServiceQueryOptions): Observable<FeatureCollection> {\n    const url = joinAndFomatWithLayer(layerId, options, serviceUrl, MAP_LAYER_QUERY_SERVICE_ENDPOINT);\n    const httpOption = getEsriMapServiceHttOptions();\n    const usePostMethod = this.shouldUsePostMethod(options.where);\n\n    if (!usePostMethod) {\n      httpOption.params = toHttpQueryParams(options, httpOption.params);\n    }\n\n    const source = usePostMethod\n      ? this.http.post<FeatureCollection>(url, options, httpOption)\n      : this.http.get<FeatureCollection>(url, httpOption);\n\n    return source.pipe(\n      map((response: FeatureCollection | EsriMapServiceErrorResponse) => {\n        this.handleEsriResponseError(response, url);\n        return response as FeatureCollection;\n      })\n    );\n  }\n}\n","import { FEATURE_SERVER_LAYER_SERVICE_IDENTIFIER } from '../esri.constants';\n\n\nexport function isFeatureServerLayerUrl(url: string): boolean {\n  return FEATURE_SERVER_LAYER_SERVICE_IDENTIFIER.test(url);\n}\n","import { FEATURE_SERVER_SERVICE_IDENTIFIER } from '../esri.constants';\n\n\nexport function isFeatureServerServiceUrl(url: string): boolean {\n  return FEATURE_SERVER_SERVICE_IDENTIFIER.test(url);\n}\n","import { MAP_SERVER_SERVICE_IDENTIFIER } from '../esri.constants';\n\n\nexport function isMapServerServiceUrl(url: string): boolean {\n  return MAP_SERVER_SERVICE_IDENTIFIER.test(url);\n}\n","import { LRS_SERVER_SERVICE_IDENTIFIER } from '../esri.constants';\n\n\nexport function isLrsServerServiceUrl(url: string): boolean {\n  return LRS_SERVER_SERVICE_IDENTIFIER.test(url);\n}\n","import { LRS_SERVER_LAYERS_SERVICE_IDENTIFIER } from '../esri.constants';\n\n\nexport function isLrsServerLayersServiceUrl(url: string): boolean {\n  return LRS_SERVER_LAYERS_SERVICE_IDENTIFIER.test(url);\n}\n","import { isMapServerServiceUrl } from './map-server/is-map-server-service-url';\nimport { isFeatureServerServiceUrl } from './feature-server/is-feature-server-service-url';\nimport { isLrsServerServiceUrl } from './lrs-server/is-lrs-server-service-url.function';\nimport { isLrsServerLayersServiceUrl } from './lrs-server/is-lrs-server-layers-service-url.function';\n\n\nexport function isCacheableEsriServiceRoute(urlPattern: string, testUrl: string): boolean {\n  [testUrl] = (testUrl || '').split('?');\n  return Boolean(urlPattern\n    && testUrl\n    && new RegExp(urlPattern, 'gi').test(testUrl)\n    && isMapServerServiceUrl(testUrl)\n    || isFeatureServerServiceUrl(testUrl)\n    || isLrsServerServiceUrl(testUrl)\n    || isLrsServerLayersServiceUrl(testUrl)\n  );\n}\n","import { MAP_SERVER_LAYER_SERVICE_MATCH_IDENTIFIER } from '../esri.constants';\n\n\n/**\n * Extracts the layer ID from an ESRI map service URL.\n * @example\n * extractMapServerLayerId('http://my-service/ags/MapServer/123') // --> 123\n */\nexport function extractMapServerLayerId(serviceUrl: string): number | null {\n  let layerId: number = null;\n  let [, , layerIdPart] = (serviceUrl || '').split(MAP_SERVER_LAYER_SERVICE_MATCH_IDENTIFIER);\n\n  if (layerIdPart) {\n    layerIdPart = layerIdPart.replace('/', '');\n    layerId = Number(layerIdPart);\n  }\n\n  return layerId;\n}\n","import { MAP_SERVER_SERVICE_MATCH_IDENTIFIER } from '../esri.constants';\nimport { join } from '../../core/url/join.function';\n\n\n/**\n * Extracts the service ID from an ESRI map layer service URL.\n * @example\n * extractMapServerUrl('http://my-service/ags/MapServer/123') // --> 'http://my-service/ags/MapServer'\n */\nexport function extractMapServerUrl(serviceUrl: string): string {\n  const [base] = (serviceUrl || '').split(MAP_SERVER_SERVICE_MATCH_IDENTIFIER);\n  return base === serviceUrl\n    ? null\n    : join(base, 'MapServer');\n}\n","import { MAP_SERVER_LAYER_SERVICE_IDENTIFIER } from '../esri.constants';\n\n\nexport function isMapServerLayerUrl(url: string): boolean {\n  return MAP_SERVER_LAYER_SERVICE_IDENTIFIER.test(url);\n}\n","export function doesPathIncludePortalAccessCode(urlPath: string): boolean {\n  return urlPath.includes('code=');\n}\n","export function doesPathIncludePortalAccessToken(urlPath: string): boolean {\n  return urlPath.includes('access_token=') && urlPath.includes('expires_in=');\n}\n","import { PORTAL_SHARING_ENDPOINT } from '../esri.constants';\nimport { stripTrailingSlash } from '../../core/url/strip-trailing-slash.function';\n\n\nexport function getPortalUrl(portalUrlComponent: string): string {\n  const [basePortalUrl] = (portalUrlComponent || '').split(PORTAL_SHARING_ENDPOINT);\n  return basePortalUrl.endsWith('/')\n    ? stripTrailingSlash(basePortalUrl)\n    : basePortalUrl;\n}\n","import { EsriPortalAccessToken } from './esri-portal-access-token';\nimport { getPortalUrl } from './get-portal-url.function';\nimport { addSeconds } from '../../core/date-time/add/add-seconds.function';\n\n\nexport function toEsriPortalAccessToken(token: any, portalUrl?: string): EsriPortalAccessToken {\n  const portalToken: EsriPortalAccessToken = {\n    accessToken: token.access_token || token.accessToken || token.token || null,\n    refreshToken: token.refresh_token || token.refreshToken || null,\n    expiresIn: token.expires_in || token.expiresIn || 0,\n    isSecure: token.ssl || token.isSecure || false,\n    server: token.server || portalUrl || null,\n    username: token.username || null,\n    expires: token.expires || null\n  };\n\n  if (portalToken.expires) {\n    portalToken.expires = new Date(portalToken.expires);\n  }\n\n  if (portalToken.server) {\n    getPortalUrl(portalToken.server);\n  }\n\n  if (!portalToken.expires) {\n    portalToken.expires = addSeconds(portalToken.expiresIn, new Date());\n  }\n\n  return portalToken;\n}\n","import { EsriServerToken } from './esri-server-token';\n\n\nexport function toEsriServerToken(token: any): EsriServerToken {\n  const serverToken: EsriServerToken = {\n    token: token.token || null,\n    isSecure: token.ssl || token.isSecure || false,\n    expires: token.expires || 0\n  };\n\n  if (serverToken.expires) {\n    serverToken.expires = new Date(serverToken.expires);\n  }\n\n  return serverToken;\n}\n","import { PORTAL_REDIRECT_URL_PARAMS_BREAK_CHARACTER } from '../esri.constants';\n\n\nexport function removePortalAccessTokenFromHash(urlHash: string = window.location.hash): string {\n  const portalParamsStartIndex = urlHash.lastIndexOf(PORTAL_REDIRECT_URL_PARAMS_BREAK_CHARACTER);\n  const portaAaccessTokenHash = urlHash.substr(portalParamsStartIndex);\n\n  return urlHash.replace(portaAaccessTokenHash, '');\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\n\n// 3rd Party.\nimport { Observable } from 'rxjs';\nimport { tap, map } from 'rxjs/operators';\n\n// TSS.\nimport { getPortalUrl } from './get-portal-url.function';\nimport { getEsriMapServiceHttOptions, AngularHttpOption, addParamsToHttpOptions } from '../esri-map-service-request';\nimport { EsriServerToken } from '../esri-server-token';\nimport { EsriConfig } from '../esri-config';\nimport { DataSourceConfig } from '../../data-source/data-source-config';\nimport { BaseEsriService } from '../base-esri.service';\nimport { Logger } from '../../core/logging/logger.service';\nimport { EsriPortalAccessToken } from './esri-portal-access-token';\nimport { toFormData } from '../../http/to-form-data.function';\nimport { toEsriPortalAccessToken } from './to-esri-portal-access-token.function';\nimport { toEsriServerToken } from '../to-esri-server-token.function';\nimport {\n  PORTAL_GENERATE_TOKEN_ENDPOINT,\n  PORTAL_OAUTH_TOKEN_ENDPOINT\n} from '../esri.constants';\nimport { removePortalAccessTokenFromHash } from './remove-portal-access-token-from-hash.function';\nimport { join } from '../../core/url/join.function';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EsriPortalService extends BaseEsriService {\n  constructor(http: HttpClient, config: EsriConfig, dataConfig: DataSourceConfig, log: Logger) {\n    super(http, config, dataConfig, log);\n  }\n\n  getTokenByCode(portalUrl: string, clientId: string, code: string, bodyData?: {}, params?: HttpParams): Observable<EsriPortalAccessToken> {\n    const data = Object.assign({\n      client_id: clientId,\n      code,\n      redirect_uri: removePortalAccessTokenFromHash(window.location.href),\n      grant_type: 'authorization_code'\n    }, bodyData);\n    const formData = toFormData(data);\n\n    return this.doPost(portalUrl, PORTAL_OAUTH_TOKEN_ENDPOINT, formData, params)\n      .pipe(\n        map(rawToken => toEsriPortalAccessToken(rawToken, portalUrl))\n      );\n  }\n\n  refreshToken(\n    portalUrl: string,\n    clientId: string,\n    refreshToken: string,\n    bodyData?: {},\n    params?: HttpParams\n  ): Observable<EsriPortalAccessToken> {\n    const data = Object.assign({\n      client_id: clientId,\n      refresh_token: refreshToken,\n      grant_type: 'refresh_token'\n    }, bodyData);\n    const formData = toFormData(data);\n\n    return this.doPost(portalUrl, PORTAL_OAUTH_TOKEN_ENDPOINT, formData, params)\n      .pipe(\n        map(rawToken => toEsriPortalAccessToken(rawToken, portalUrl))\n      );\n  }\n\n  getServerToken(portalUrl: string, portalAccessToken: string, serverUrl: string, params?: HttpParams): Observable<EsriServerToken> {\n    const additionalParams = {\n      request: 'getToken',\n      serverUrl,\n      token: portalAccessToken,\n      referer: window.location.host\n    };\n\n    return this.doGet(portalUrl, PORTAL_GENERATE_TOKEN_ENDPOINT, additionalParams, params)\n      .pipe(\n        map(token => toEsriServerToken(token))\n      );\n  }\n\n  protected doGet<T>(portalUrl: string, endpoint: string, queryParams: {}, params?: HttpParams): Observable<T> {\n    const basePortalUrl = getPortalUrl(portalUrl);\n    const url = join(basePortalUrl, endpoint);\n    const httpOption: AngularHttpOption = getEsriMapServiceHttOptions(params);\n\n    addParamsToHttpOptions(httpOption, queryParams);\n    return this.http\n      .get<T>(url, httpOption)\n      .pipe(\n        tap((response: T) => this.handleEsriResponseError(response, url))\n      );\n  }\n\n  protected doPost<T>(portalUrl: string, endpoint: string, formData: FormData, params?: HttpParams): Observable<T> {\n    const basePortalUrl = getPortalUrl(portalUrl);\n    const url = join(basePortalUrl, endpoint);\n    const httpOption: AngularHttpOption = getEsriMapServiceHttOptions(params);\n\n    return this.http\n      .post<T>(url, formData, httpOption)\n      .pipe(\n        tap((response: T) => this.handleEsriResponseError(response, url))\n      );\n  }\n}\n","import { EsriPortalAccessToken } from './esri-portal-access-token';\nimport { PORTAL_REDIRECT_URL_PARAMS_BREAK_CHARACTER } from '../esri.constants';\nimport { toEsriPortalAccessToken } from './to-esri-portal-access-token.function';\nimport { trimStart } from '../../core/formatting/trip-start.function';\nimport { getQueryParams } from '../../core/url/get-query-params.function';\n\n\nexport function extractPortalAccessToken(urlHash: string = window.location.hash): EsriPortalAccessToken {\n  const portalParamsStartIndex = urlHash.lastIndexOf(PORTAL_REDIRECT_URL_PARAMS_BREAK_CHARACTER);\n  const portalParamsHash = trimStart(\n    urlHash.substr(portalParamsStartIndex)\n  );\n\n  const portalParams = getQueryParams(portalParamsHash);\n  const accessToken = portalParams.access_token;\n  const username = portalParams.username;\n  const expiresIn = Number(portalParams.expires_in);\n  const isSecure = Boolean(portalParams.ssl);\n\n  return toEsriPortalAccessToken({\n    accessToken,\n    username,\n    expiresIn,\n    isSecure\n  });\n}\n","import { EsriPortalAuthRedirectOptions } from './esri-portal-auth-redirect-options';\nimport { PORTAL_OAUTH_AUTHORIZE_ENDPOINT, DEFAULT_PORTAL_OAUTH_REDIRECT_OPTIONS } from '../esri.constants';\nimport { getPortalUrl } from './get-portal-url.function';\nimport { join } from '../../core/url/join.function';\n\n\nexport function getPortalOAuthRedirectUrl(portalUrl: string, clientId: string, options: EsriPortalAuthRedirectOptions = {}): string {\n  options = Object.assign({}, DEFAULT_PORTAL_OAUTH_REDIRECT_OPTIONS, options);\n  portalUrl = getPortalUrl(portalUrl);\n\n  const redirectUrl = encodeURIComponent(`${options.redirectUrl}${options.urlParamsBreak}`);\n  const url = join(portalUrl, PORTAL_OAUTH_AUTHORIZE_ENDPOINT);\n\n  return `${url}?client_id=${clientId}&redirect_uri=${redirectUrl}&response_type=${options.responseType}`;\n}\n","import { PORTAL_SHARING_ENDPOINT } from '../esri.constants';\nimport { getPortalUrl } from './get-portal-url.function';\nimport { join } from '../../core/url/join.function';\n\n\nexport function getPortalSharingUrl(portalUrl: string): string {\n  const basePortalUrl = getPortalUrl(portalUrl);\n  return join(basePortalUrl, PORTAL_SHARING_ENDPOINT);\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// TSS.\nimport { AutoConfig } from '../core/auto-config.decorator';\n\n\n/**\n * Configuration class for storing export-related settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('ExportConfig')\nexport class ExportConfig {\n}\n","export const DEFAULT_EXPORT_GEOJSON_FILE_NAME = 'export.geojson';\n","// Angular.\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n// TSS.\nimport { TssCoreModule } from '../core/core.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    TssCoreModule,\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssExportModule { }\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// 3rd party.\nimport { FeatureCollection, Feature } from 'geojson';\n\n\n// TSS.\nimport { JSON_MIME_TYPE, TEXT_MIME_TYPE } from '../core/media/media.constants';\nimport { base64MimeType } from '../core/media/base64-mime-type.function';\nimport { base64toBlob } from '../core/media/base64-to-blob.function';\nimport { DEFAULT_EXPORT_GEOJSON_FILE_NAME } from './export.constants';\nimport { format } from '../core/formatting/format.function';\nimport { isString } from '../core/type-check/is-string.function';\nimport { formatDate } from '../core/date-time/format/format-date.function';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ExportService {\n  constructor() {\n  }\n\n  replaceTokens(fileNameTemplate: string, tokens: any = {}, removeEmptyTokens?: boolean): string {\n    return format(fileNameTemplate, Object.assign(\n      this.getReplaceTokens(),\n      tokens\n    ), removeEmptyTokens);\n  }\n\n  exportFeatureCollection(fileNameTemplate = DEFAULT_EXPORT_GEOJSON_FILE_NAME, ...features: Feature[]): this {\n    const fileName = this.replaceTokens(fileNameTemplate, {\n      featureLength: features.length,\n    });\n\n    const featureCollection: FeatureCollection = {\n      type: 'FeatureCollection',\n      features\n    };\n\n    return this.exportFile(this.stringify(featureCollection), fileName, JSON_MIME_TYPE);\n  }\n\n  exportFeature(fileNameTemplate = DEFAULT_EXPORT_GEOJSON_FILE_NAME, feature: Feature): this {\n    return this.exportFile(this.stringify(feature), fileNameTemplate, JSON_MIME_TYPE);\n  }\n\n  stringify(data: any): string {\n    return JSON.stringify(data, (key, value) => {\n      return key.startsWith('$$') ? undefined : value;\n    }, 2);\n  }\n\n  exportJson(data: any, fileNameTemplate: string): this {\n    const jsonString: string = isString(data)\n      ? data as string\n      : this.stringify(data);\n\n    return this.exportFile(jsonString, fileNameTemplate, JSON_MIME_TYPE);\n  }\n\n  exportBase64(base64Data: string, fileNameTemplate: string, contentType?: string): this {\n    const fileName = this.replaceTokens(fileNameTemplate);\n    contentType = contentType || base64MimeType(base64Data);\n    const blob = base64toBlob(base64Data, contentType);\n\n    return this.exportFromUrl(URL.createObjectURL(blob), fileName);\n  }\n\n  exportFile(data: any, fileNameTemplate: string, contentType = TEXT_MIME_TYPE): this {\n    const blob = new Blob([data], { type: contentType });\n    const fileName = this.replaceTokens(fileNameTemplate);\n\n    return this.exportBlob(blob, fileName);\n  }\n\n  exportBlob(blob: Blob, fileNameTemplate: string): this {\n    const fileName = this.replaceTokens(fileNameTemplate);\n    return this.exportFromUrl(window.URL.createObjectURL(blob), fileName);\n  }\n\n  exportFromUrl(url: string, fileName: string): this {\n    const link = document.createElement('a');\n\n    link.href = url;\n    link.download = fileName;\n    link.click();\n\n    return this;\n  }\n\n  protected getReplaceTokens(): {} {\n    return {\n      date: new Date(),\n      shortDate: formatDate(new Date(), 'yyyy-MM-dd'),\n      year: new Date().getFullYear(),\n    };\n  }\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// TSS.\nimport { AutoConfig } from '../core/auto-config.decorator';\nimport { DEFAULT_POINT_EQUALITY_PRECISION } from '../core/equality/equality.constants';\n\n\n/**\n * Configuration class for storing geolocation-related settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('GeolocationConfig')\nexport class GeolocationConfig {\n  gpsDisplayDecimalPlaces = 3;\n  gpsWarnableAccuracyMeters = 5;\n  gpsRequiredAccuracyMeters = 10;\n  gpsWarnableDilutionOfPrecision = 2;\n  gpsRequiredDilutionOfPrecision = 5;\n  gpsEnableHighAccuracy = true;\n  gpsNoAccuracyReading = '--';\n  allowGpsMocking = true;\n  emitDuplicateGpsPositions = false;\n  gpsPositionDuplicatePrecision = DEFAULT_POINT_EQUALITY_PRECISION;\n  gpsAntennaHeight = 0;\n  adjustForGpsAntennaHeight = true;\n  calculateMissingPositionValues = true;\n  geolocationGeolocatorName = 'Built-in (default)';\n  geolocationGeolocatorDescription = `Uses the device's built-in GPS sensor within the hardware. ` +\n    `Devices without a GPS sensor will defer the location retrieval to the Inernet Service Provider (ISP).`;\n}\n","export const PATH_BUILDER_EMPTY_CALIBRATION_MEASURE_VALUE = null;\nexport const PATH_BUILDER_CALCULATED_M_DEVICE_SOURCE = 'calculated-calibration-point';\nexport const GEOLOCATOR_REGISTRY: { id: string, constructor: any }[] = [];\nexport const GEOLOCATION_GEOLOCATOR_ID = 'built-in';\n","import { GEOLOCATOR_REGISTRY } from '../geolocation.constants';\n\nexport function Geolocatable(id: string): ClassDecorator {\n  return (constructor: any) => {\n    GEOLOCATOR_REGISTRY.push({ id, constructor });\n  };\n}\n","export enum GeolocatorAccuracyUnit {\n  /**\n   * The geolocation accuracy reading is in standard meters (default).\n   */\n  Meter = 'meters',\n\n  /**\n   * The geolocation accuracy reading indicates a Position Dilution of Precision (PDOP) value.\n   */\n  Pdop = 'pdop',\n\n  /**\n   * The geolocation accuracy reading indicates a Horizontal Dilution of Precision (HDOP) value.\n   */\n  Hdop = 'hdop',\n\n  /**\n   * The geolocation accuracy reading indicates a Vertical Dilution of Precision (VDOP) value.\n   */\n  Vdop = 'vdop',\n\n  /**\n   * The geolocation accuracy reading indicates a Time Dilution of Precision (TDOP) value.\n   */\n  Tdop = 'tdop',\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// 3rd Party.\nimport { Observable } from 'rxjs';\nimport { GeolocatorAccuracyUnit } from './geolocator-accuracy-unit';\nimport { GpsPosition } from '../gps-position/gps-position';\nimport { GeolocatorCapability } from './geolocator-capability';\nimport { Logger } from '../../core/logging/logger.service';\nimport { Geolocator } from './geolocator';\n\n\n/**\n * Wrapper for geolocation service. The wrapper primarily exists to abstract the direct interaction with\n * the \"navigator\" object and to allow for injecting other implementations of geolocation functionality.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport abstract class BaseGeolocator implements Geolocator {\n  capabilities: GeolocatorCapability[] = [];\n  accuracyUnit: GeolocatorAccuracyUnit = GeolocatorAccuracyUnit.Meter;\n  abstract get name(): string;\n  abstract get description(): string;\n\n  constructor(protected readonly log: Logger) {\n  }\n\n  /**\n   * Get the device's current position.\n   */\n  abstract getCurrentPosition(options?: PositionOptions): Promise<GpsPosition>;\n\n  /**\n   * Watch the current device's position.  Clear the watch by unsubscribing from\n   * Observable changes.\n   *\n   * ```typescript\n   * const subscription = this.geolocation.watchPosition()\n   *                               .filter(p => Boolean(p.coords)) //Filter Out Errors\n   *                               .subscribe(position =>\n   *   console.log(position.coords.longitude + ' ' + position.coords.latitude)\n   * );\n   *\n   * // To stop notifications\n   * subscription.unsubscribe();\n   * ```\n   */\n  abstract watchPosition(options?: PositionOptions): Observable<GpsPosition>;\n  abstract isAvailable(): Observable<boolean>;\n\n  hasCapability(capability: GeolocatorCapability): boolean {\n    return this.capabilities.indexOf(capability) > -1;\n  }\n}\n","import { GpsPosition } from './gps-position';\n\n\nexport function positionToGpsPosition(position: Position): GpsPosition {\n  const gpsPosition: GpsPosition = {\n    timestamp: position.timestamp,\n    accuracy: position.coords.accuracy,\n    altitude: position.coords.altitude,\n    altitudeAccuracy: position.coords.altitudeAccuracy,\n    latitude: position.coords.latitude,\n    longitude: position.coords.longitude,\n    heading: position.coords.heading,\n    speed: position.coords.speed,\n  };\n\n  return gpsPosition;\n}\n","export enum GeolocatorCapability {\n  Accuracy = 'accuracy',\n  Altitude = 'altitude',\n  AltitudeAccuracy = 'altitude',\n  Heading = 'heading',\n  Speed = 'speed',\n  MagneticVariation = 'magneticVariation',\n  Satellites = 'satellites',\n  PDOP = 'pdop',\n  HDOP = 'hdop',\n  VDOP = 'vdop',\n  TDOP = 'tdop',\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// 3rd Party.\nimport { Observable, Subject, of } from 'rxjs';\nimport { finalize } from 'rxjs/operators';\n\n// TSS.\nimport { Geolocatable } from './geolocatable.decorator';\nimport { BaseGeolocator } from './base-geolocator.service';\nimport { GpsPosition } from '../gps-position/gps-position';\nimport { positionToGpsPosition } from '../gps-position/position-to-gps-position.function';\nimport { GeolocatorCapability } from './geolocator-capability';\nimport { Logger } from '../../core/logging/logger.service';\nimport { GeolocationConfig } from '../geolocation.config';\nimport { GEOLOCATION_GEOLOCATOR_ID } from '../geolocation.constants';\n\n\n/**\n * Wrapper for geolocation service. The wrapper primarily exists to abstract the direct interaction with\n * the \"navigator\" object and to allow for injecting other implementations of geolocation functionality.\n */\n@Injectable({ providedIn: 'root' })\n@Geolocatable(GEOLOCATION_GEOLOCATOR_ID)\nexport class GeolocationGeolocator extends BaseGeolocator {\n  capabilities = [\n    GeolocatorCapability.Accuracy,\n    GeolocatorCapability.Altitude,\n    GeolocatorCapability.AltitudeAccuracy,\n    GeolocatorCapability.Heading,\n    GeolocatorCapability.Speed,\n  ];\n\n  get name(): string {\n    return this.config.geolocationGeolocatorName;\n  }\n\n  get description(): string {\n    return this.config.geolocationGeolocatorDescription;\n  }\n\n  constructor(log: Logger, private readonly config: GeolocationConfig) {\n    super(log);\n  }\n\n  getCurrentPosition(options?: PositionOptions): Promise<GpsPosition> {\n    return new Promise<GpsPosition>((resolve, reject) =>\n      navigator.geolocation\n        .getCurrentPosition((position: Position) => {\n          this.log.trace(`Received current position for ${this.name}`);\n          resolve(\n            positionToGpsPosition(position)\n          );\n        }, reject, options)\n    );\n  }\n\n  watchPosition(options?: PositionOptions): Observable<GpsPosition> {\n    const subject = new Subject<GpsPosition>();\n    const watchId = navigator.geolocation.watchPosition(\n      position => {\n        this.log.trace(`Received watch position for ${this.name}`);\n        subject.next(positionToGpsPosition(position));\n      },\n      error => subject.error(error),\n      options\n    );\n\n    return subject.pipe(\n      finalize(() => navigator.geolocation.clearWatch(watchId))\n    );\n  }\n\n  isAvailable(): Observable<boolean> {\n    return of('geolocation' in navigator);\n  }\n}\n","// Angular.\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n// TSS.\nimport { TssCoreModule } from '../core/core.module';\nimport { GeolocationConfig } from './geolocation.config';\nimport { GeolocationService } from './geolocation.service';\nimport { GeolocationGeolocator } from './geolocator/geolocation-gps-locator.service';\nimport { BaseGeolocator } from './geolocator/base-geolocator.service';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    TssCoreModule,\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n    { provide: BaseGeolocator, useClass: GeolocationGeolocator }\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssGeolocationModule { }\n","export function isPositionAcceptable(position: Coordinates, acceptanceThreshold: number): boolean {\n  return position && position.accuracy <= acceptanceThreshold;\n}\n","import { GpsPosition } from './gps-position';\nimport { isNumber } from '../../core/type-check/is-number.function';\n\nexport function isPositionError(position: GpsPosition | PositionError): boolean {\n  const error = position as PositionError;\n  const isError = !error || isNumber(error.code);\n\n  return isError;\n}\n","import { GpsPosition } from './gps-position';\nimport { isDefined } from '../../core/type-check/is-defined.function';\n\n\nexport function gpsPositionToPoint(position: GpsPosition): number[] {\n  const point = [position.longitude, position.latitude];\n  if (isDefined(position.altitude)) {\n    point[2] = position.altitude;\n  }\n\n  return point;\n}\n","import { isNumberBetweenOrEqual } from '../../core/stats/is-number-between-or-equal.function';\nimport { isNumber } from '../../core/type-check/is-number.function';\n\n\nexport function isValidLatitude(latitide: number): boolean {\n  return isNumber(latitide) && isNumberBetweenOrEqual(latitide, -90, 90);\n}\n","import { isNumberBetweenOrEqual } from '../../core/stats/is-number-between-or-equal.function';\nimport { isNumber } from '../../core/type-check/is-number.function';\n\n\nexport function isValidLongitude(longitude: number): boolean {\n  return isNumber(longitude) && isNumberBetweenOrEqual(longitude, -180, 180);\n}\n","import { isValidLatitude } from './is-valid-latitude.function';\nimport { isValidLongitude } from './is-valid-longitude.function';\n\n\nexport function isValidLocation(location: { latitude: number, longitude: number }): boolean {\n  return isValidLatitude(location.latitude) && isValidLongitude(location.longitude);\n}\n","import { isValidLocation } from './is-valid-location.function';\n\n\nexport function isNotValidLocation(location: { latitude: number, longitude: number }): boolean {\n  return !isValidLocation(location);\n}\n","import { GpsPosition } from './gps-position';\nimport { DEFAULT_POINT_EQUALITY_PRECISION } from '../../core/equality/equality.constants';\nimport { pointsAlmostEqual } from '../../core/equality/points-almost-equal.function';\n\n\nexport function gpsPositionsAlmostEqual(\n  position1: GpsPosition,\n  position2: GpsPosition,\n  precision = DEFAULT_POINT_EQUALITY_PRECISION\n): boolean {\n  return pointsAlmostEqual(position1.longitude, position1.latitude, position2.longitude, position2.latitude, precision);\n}\n\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// 3rd Party.\nimport { Observable, ReplaySubject, Subscription, Subject } from 'rxjs';\nimport distance from '@turf/distance';\nimport bearing from '@turf/bearing';\n\n// App.\nimport { isPositionAcceptable } from './is-position-acceptable.function';\nimport { Logger } from '../core/logging/logger.service';\nimport { NotifyService } from '../core/notify/notify.service';\nimport { GeolocationConfig } from './geolocation.config';\nimport { GeolocatorAccuracyUnit } from './geolocator/geolocator-accuracy-unit';\nimport { GpsPosition } from './gps-position/gps-position';\nimport { GeolocatorCapability } from './geolocator/geolocator-capability';\nimport { isPositionError } from './gps-position/is-position-error.function';\nimport { toReadableTime } from '../core/date-time/readable/to-readable-time.function';\nimport { isNumber } from '../core/type-check/is-number.function';\nimport { isNotNumber } from '../core/type-check/is-not-number.function';\nimport { formatNumber } from '../core/formatting/format-number.function';\nimport { errorMsg } from '../core/error/error-msg.function';\nimport { isNotValue } from '../core/type-check/is-not-value.function';\nimport { gpsPositionToPoint } from './gps-position/gps-position-to-point';\nimport { millisecondsToSeconds } from '../core/date-time/conversion/milliseconds-to-seconds.function';\nimport { convertLengthUnits } from '../core/units/convert-length-units.function';\nimport { LengthUnit } from '../core/units/length-unit';\nimport { Geolocator } from './geolocator/geolocator';\nimport { BaseGeolocator } from './geolocator/base-geolocator.service';\nimport { isNotValidLocation } from './gps-position/is-not-valid-location.function';\nimport { gpsPositionsAlmostEqual } from './gps-position/gps-positions-almost-equal';\n\n\n/**\n * Geolocator service. Provides a single point of GPS interaction.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class GeolocationService {\n  position: GpsPosition;\n  positionRecievedTime: Date;\n  isTrackingPosition = false;\n  /**\n   * Fired when ever a new position is received and the value is different than the previous (unless the Geolocation config\n   * value \"emitDuplicateGpsPositions\" is set to true - in which case duplicates will be published).\n   * This value will alway emit the last recieved position (if you subscribe after it was emitted you will still receive it).\n   */\n  readonly positionChange: Observable<GpsPosition>;\n\n  /**\n   * Fired when ever a new position is received regardless of whether the position has changed since the last position was recieved.\n   */\n  readonly positionRecieved: Observable<GpsPosition>;\n\n  private positionChangeSubject: ReplaySubject<GpsPosition>;\n  private positionRecievedSubject: Subject<GpsPosition>;\n  private gpsLocatorSubscription: Subscription;\n  private geolocator: Geolocator;\n\n  get positionText(): string {\n    return this.position\n      ? `${this.position.longitude.toFixed(this.config.gpsDisplayDecimalPlaces)}\n       , ${this.position.latitude.toFixed(this.config.gpsDisplayDecimalPlaces)}`\n      : '';\n  }\n\n  get positionReceivedEllapsedTime(): string {\n    if (!this.positionRecievedTime) {\n      return '';\n    }\n\n    const differenceMilliseconds = Date.now() - this.positionRecievedTime.getTime();\n    return `${toReadableTime(differenceMilliseconds)} ago`;\n  }\n\n  get isPositionAcceptable(): boolean {\n    const accuracyThreshold = this.geolocator.accuracyUnit === GeolocatorAccuracyUnit.Meter\n      ? this.config.gpsRequiredAccuracyMeters\n      : this.config.gpsRequiredDilutionOfPrecision;\n\n    return isPositionAcceptable(this.position, accuracyThreshold);\n  }\n\n  get isPositionUnacceptable(): boolean {\n    return !this.isPositionAcceptable;\n  }\n\n  get isPositionWarnable(): boolean {\n    const accuracyThreshold = this.geolocator.accuracyUnit === GeolocatorAccuracyUnit.Meter\n      ? this.config.gpsWarnableAccuracyMeters\n      : this.config.gpsWarnableDilutionOfPrecision;\n\n    return !isPositionAcceptable(this.position, accuracyThreshold);\n  }\n\n  get hasAccuracyCapability(): boolean {\n    return this.geolocator.capabilities.indexOf(GeolocatorCapability.Accuracy) > -1;\n  }\n\n  get isPositionAccuracyKnown(): boolean {\n    return this.position && isNumber(this.position.accuracy);\n  }\n\n  get isPositionAccuracyUnknown(): boolean {\n    return !this.isPositionAccuracyKnown;\n  }\n\n  get isPositionAccuracyInMeters(): boolean {\n    return this.geolocator.accuracyUnit === GeolocatorAccuracyUnit.Meter;\n  }\n\n  get isPositionAccuracyInDilutionOfPrecision(): boolean {\n    return this.geolocator.accuracyUnit === GeolocatorAccuracyUnit.Pdop\n      || this.geolocator.accuracyUnit === GeolocatorAccuracyUnit.Hdop\n      || this.geolocator.accuracyUnit === GeolocatorAccuracyUnit.Vdop\n      || this.geolocator.accuracyUnit === GeolocatorAccuracyUnit.Tdop;\n  }\n\n  get geolocatorService(): Geolocator {\n    return this.geolocator;\n  }\n\n  get accuracyStatement(): string {\n    const noPosition = !this.position;\n\n    if (noPosition) {\n      return this.config.gpsNoAccuracyReading;\n    }\n\n    const isPositionAccuracyKnown = this.isPositionAccuracyKnown;\n    let accuracy: number = isPositionAccuracyKnown ? this.position.accuracy : null;\n    let suffix: string;\n\n    if (isPositionAccuracyKnown && this.geolocator.hasCapability(GeolocatorCapability.Accuracy)) {\n      suffix = this.geolocator.accuracyUnit === GeolocatorAccuracyUnit.Meter\n        ? 'm'\n        : String(this.geolocator.accuracyUnit).toUpperCase();\n    } else if (this.geolocator.hasCapability(GeolocatorCapability.PDOP)) {\n      accuracy = this.position.pdop;\n      suffix = String(GeolocatorCapability.PDOP).toUpperCase();\n    } else if (this.geolocator.hasCapability(GeolocatorCapability.HDOP)) {\n      accuracy = this.position.hdop;\n      suffix = String(GeolocatorCapability.HDOP).toUpperCase();\n    } else if (this.geolocator.hasCapability(GeolocatorCapability.VDOP)) {\n      accuracy = this.position.vdop;\n      suffix = String(GeolocatorCapability.VDOP).toUpperCase();\n    } else if (this.geolocator.hasCapability(GeolocatorCapability.TDOP)) {\n      accuracy = this.position.tdop;\n      suffix = String(GeolocatorCapability.TDOP).toUpperCase();\n    }\n\n    if (isNotNumber(accuracy)) {\n      return this.config.gpsNoAccuracyReading;\n    }\n\n    return `${formatNumber(accuracy)} ${suffix}`;\n  }\n\n  constructor(\n    geolocator: BaseGeolocator,\n    private readonly log: Logger,\n    private readonly notify: NotifyService,\n    protected readonly config: GeolocationConfig,\n  ) {\n    this.geolocator = geolocator;\n    this.positionChangeSubject = new ReplaySubject(1);\n    this.positionRecievedSubject = new Subject();\n\n    this.positionChange = this.positionChangeSubject.asObservable();\n    this.positionRecieved = this.positionRecievedSubject.asObservable();\n  }\n\n  enableGpsTracking(): this {\n    const geoOptions = {\n      enableHighAccuracy: this.config.gpsEnableHighAccuracy\n    };\n\n    this.position = null;\n    this.tryUnsubscribe();\n    this.log.debug(\n      `Subscribing to GPS watching for '${this.geolocator.name}' with high accuracy set to '${geoOptions.enableHighAccuracy}'`\n    );\n\n    this.gpsLocatorSubscription = this.geolocator.watchPosition(geoOptions)\n      .subscribe(\n        position => this.onPositionRecieved(position),\n        error => this.onLocationError(error)\n      );\n\n    return this;\n  }\n\n  disableGpsTracking(): this {\n    this.isTrackingPosition = false;\n    this.tryUnsubscribe();\n\n    return this;\n  }\n\n  setGeoLocator(geolocator: Geolocator): this {\n    this.tryUnsubscribe();\n    this.geolocator = geolocator;\n    if (this.isTrackingPosition) {\n      this.enableGpsTracking();\n    }\n\n    return this;\n  }\n\n  setGpsTracking(isTrackingLocation: boolean): this {\n    if (isTrackingLocation) {\n      this.enableGpsTracking();\n    } else {\n      this.disableGpsTracking();\n    }\n\n    return this;\n  }\n\n  toggleGpsTracking(): this {\n    this.setGpsTracking(!this.isTrackingPosition);\n    return this;\n  }\n\n  mockGpsPosition(position: GpsPosition | PositionError): this {\n    if (!this.config.allowGpsMocking) {\n      throw new Error('Permission denied to mock GPS location');\n    }\n\n    return this.onPositionRecieved(position);\n  }\n\n  protected onPositionRecieved(position: GpsPosition | PositionError): this {\n    if (isPositionError(position)) {\n      this.onLocationError(position as PositionError);\n      return this;\n    }\n\n    const gpsPosition = position as GpsPosition;\n    if (isNotValidLocation(gpsPosition)) {\n      return this;\n    }\n\n    const isPreviousPointSameAsNew = this.position\n      && gpsPositionsAlmostEqual(this.position, gpsPosition, this.config.gpsPositionDuplicatePrecision);\n\n    if (isPreviousPointSameAsNew && !this.config.emitDuplicateGpsPositions) {\n      this.positionRecievedSubject.next(gpsPosition);\n      return this;\n    }\n\n    this.log.trace(`Location recieved from '${this.geolocator.name}': ${gpsPosition.latitude}, ${gpsPosition.longitude}`);\n    this.adjustCoordinates(gpsPosition);\n    this.position = gpsPosition;\n    this.isTrackingPosition = true;\n    this.positionRecievedTime = new Date(this.position.timestamp || Date.now());\n    this.positionRecievedSubject.next(this.position);\n    this.positionChangeSubject.next(this.position);\n\n    return this;\n  }\n\n  protected onLocationError(error: PositionError): this {\n    const errorMessage = errorMsg('Failed to retrieve location position. {error}', error);\n    this.positionChangeSubject.error(error);\n    this.log.error(errorMessage);\n    this.notify.error(errorMessage);\n    return this;\n  }\n\n  private adjustCoordinates(position: GpsPosition): this {\n    this.tryAdjustMissingPositionValues(position);\n\n    if (this.config.adjustForGpsAntennaHeight && this.config.gpsAntennaHeight) {\n      let adjustedHeight = position.altitude - this.config.gpsAntennaHeight;\n      adjustedHeight = adjustedHeight < 0 ? 0 : adjustedHeight;\n\n      this.log.trace(`Adjusting coordinate altitude from ${position.altitude} to ${adjustedHeight}`);\n      Object.assign(position, {\n        altitude: adjustedHeight\n      });\n    }\n\n    return this;\n  }\n\n  private tryAdjustMissingPositionValues(newPosition: GpsPosition): void {\n    const missingSpeed = isNotValue(newPosition.speed);\n    const missingHeading = isNotValue(newPosition.heading);\n    const positionValuesMissing = missingSpeed || missingHeading;\n    const shouldAdjustPositionValues = this.position && positionValuesMissing && this.config.calculateMissingPositionValues;\n\n    if (shouldAdjustPositionValues) {\n      const fromPoint = gpsPositionToPoint(this.position);\n      const toPoint = gpsPositionToPoint(newPosition);\n\n      if (missingSpeed) {\n        // meters per second\n        const kilometersTraveled = distance(fromPoint, toPoint, { units: 'kilometers' });\n        if (kilometersTraveled) {\n          const metersTraveled = convertLengthUnits(kilometersTraveled, LengthUnit.Kilometer, LengthUnit.Meter);\n          const secondsDelta = millisecondsToSeconds(\n            Math.abs(newPosition.timestamp - this.position.timestamp)\n          );\n          const speed = metersTraveled / secondsDelta;\n          Object.assign(newPosition, { speed });\n        }\n      }\n\n      if (missingHeading) {\n        const heading = bearing(fromPoint, toPoint);\n        Object.assign(newPosition, { heading });\n      }\n    }\n  }\n\n  private tryUnsubscribe(): this {\n    if (this.gpsLocatorSubscription) {\n      this.log.debug(`Unsubscribing from watching GPS stream from '${this.geolocator.name}'`);\n      this.gpsLocatorSubscription.unsubscribe();\n    }\n\n    return this;\n  }\n}\n","// Angular.\nimport { Injectable, Injector } from '@angular/core';\n\n// 3rd party.\nimport { Observable, forkJoin, of } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\n\n// TSS.\nimport { GeolocatorSource } from './geolocator-source';\nimport { GEOLOCATOR_REGISTRY } from '../geolocation.constants';\nimport { Geolocator } from './geolocator';\n\n\n@Injectable({ providedIn: 'root' })\nexport class GeolocatorSourceService {\n\n  constructor(private readonly injector: Injector) {\n  }\n\n  getGeolocator(id: string): Geolocator {\n    const registry = GEOLOCATOR_REGISTRY.find(registedSource => registedSource.id === id);\n    return this.getLocatorFromRegistry(registry);\n  }\n\n  getGeolocators(): Geolocator[] {\n    return GEOLOCATOR_REGISTRY\n      .map(registry => this.getLocatorFromRegistry(registry));\n  }\n\n  getGeolocatorSource(id: string): Observable<GeolocatorSource> {\n    return this.getGeolocatorSources()\n      .pipe(\n        map(devices => devices.find(device => device.id === id))\n      );\n  }\n\n  getAvailableGeolocatorSources(): Observable<GeolocatorSource[]> {\n    return this.getGeolocatorSources()\n      .pipe(\n        map(devices => devices.filter(device => device.isAvailable))\n      );\n  }\n\n  getGeolocatorSources(): Observable<GeolocatorSource[]> {\n    const availableObservables = GEOLOCATOR_REGISTRY\n      .map(registry => {\n        const locator = this.getLocatorFromRegistry(registry);\n        const source: GeolocatorSource = {\n          id: registry.id,\n          name: locator.name,\n          description: locator.description,\n          accuracyUnit: locator.accuracyUnit,\n          capabilities: locator.capabilities,\n          isAvailable: false,\n        };\n\n        return locator.isAvailable()\n          .pipe(\n            tap(available => source.isAvailable = available),\n            map(() => source)\n          );\n      });\n\n    return availableObservables.length === 0\n      ? of([])\n      : forkJoin(availableObservables);\n  }\n\n  private getLocatorFromRegistry(registry: { id: string, constructor: any }): Geolocator {\n    const instance: Geolocator = this.injector.get(registry.constructor);\n    return instance;\n  }\n}\n","import { GpsPosition } from './gps-position';\nimport { gpsPositionToPoint } from './gps-position-to-point';\n\n\nexport function gpsPositionsToPoint(...positions: GpsPosition[]): number[][] {\n  return positions.map(position => gpsPositionToPoint(position));\n}\n","import { isValidLatitude } from './is-valid-latitude.function';\n\nexport function isNotValidLatitude(latitude: number): boolean {\n  return !isValidLatitude(latitude);\n}\n","import { isValidLongitude } from './is-valid-longitude.function';\n\n\nexport function isNotValidLongitude(longitude: number): boolean {\n  return !isValidLongitude(longitude);\n}\n","// 3rd party.\nimport distance from '@turf/distance';\n\n// TSS.\nimport { LineGeometry } from '../line/line-geometry';\nimport { toMultiPartPaths } from '../line/to-multi-part-paths.function';\nimport { getMeasureFromPoint } from '../point/get-measure-from-point.function';\nimport { SetMeasuresByGeometricLengthOptions } from './set-measures-by-geometric-length-options';\nimport { sortAscending } from '../../core/sort/sort.function';\nimport { isNotNumber } from '../../core/type-check/is-not-number.function';\n\n\nconst DEFAULT_EMPTY_Z_VALUE = 0;\nconst DEFAULT_OPTIONS: SetMeasuresByGeometricLengthOptions = {\n  units: 'miles',\n  hasZValues: true,\n  calibrationPositions: []\n};\n\nexport function setMeasuresByGeometricLength(line: LineGeometry, options?: SetMeasuresByGeometricLengthOptions): void {\n  const martiPart: number[][][] = toMultiPartPaths(line);\n  options = Object.assign({}, DEFAULT_OPTIONS, options);\n  let lastMeasure = 0;\n\n  martiPart.forEach((linePart, partIndex) => {\n    setMeasureForLine(linePart, lastMeasure, partIndex, options);\n    const lastCoordinateIndex = linePart.length - 1;\n    const lastCoordinate = linePart[lastCoordinateIndex];\n\n    lastMeasure += getMeasureFromPoint(lastCoordinate);\n  });\n}\n\nfunction setMeasureForLine(line: number[][], startMeasure: number, partIndex: number, options: SetMeasuresByGeometricLengthOptions): void {\n  const hasCalibrationPoints: boolean = options.calibrationPositions.some(\n    calibrationPosition =>\n      calibrationPosition.partIndex === partIndex\n  );\n\n  if (hasCalibrationPoints) {\n    calibrateLinePart(line, startMeasure, partIndex, options);\n  } else {\n    setLinePartMeasuresByGeometricLength(line, startMeasure, options);\n  }\n}\n\nfunction calibrateLinePart(line: number[][], startMeasure: number, partIndex: number, options: SetMeasuresByGeometricLengthOptions): void {\n  const calibrationPositions = options.calibrationPositions.filter(\n    position => position.partIndex === partIndex\n  );\n\n  let fromVertexIndex = 0;\n  sortAscending(calibrationPositions, calibration => calibration.measure);\n\n  calibrationPositions.forEach(calibration => {\n    const fromVertex = line[fromVertexIndex];\n    const toVertex = line[calibration.vertexIndex];\n    const numberOfVerticesInBetween = calibration.vertexIndex - fromVertexIndex;\n    const distanceForSection = Math.abs(calibration.measure - startMeasure);\n    const measureDistributionIncrement = distanceForSection / numberOfVerticesInBetween;\n\n    setMeasure(fromVertex, startMeasure, options.hasZValues);\n    setMeasure(toVertex, calibration.measure, options.hasZValues);\n    const inBetweenVertices = getVerticesBetween(line, fromVertexIndex, calibration.vertexIndex);\n\n    inBetweenVertices.forEach((vertice, index) => {\n      const partNumber = index + 1;\n      const verticeIncrement = partNumber * measureDistributionIncrement;\n      const measure = startMeasure + verticeIncrement;\n      setMeasure(vertice, measure, options.hasZValues);\n    });\n\n    fromVertexIndex = calibration.vertexIndex;\n    startMeasure = calibration.measure;\n  });\n\n  const areMoreVertices = fromVertexIndex < line.length - 1;\n  if (areMoreVertices) {\n    const remainingPoints: number[][] = getVerticesBetween(line, fromVertexIndex - 1, line.length);\n    setLinePartMeasuresByGeometricLength(remainingPoints, startMeasure, options);\n  }\n}\n\nfunction getVerticesBetween(line: number[][], startRangeIndex: number, endRangeIndex: number): number[][] {\n  let index = startRangeIndex + 1;\n  const vertices: number[][] = [];\n\n  for (; index < endRangeIndex; index++) {\n    const vertice = line[index];\n    vertices.push(vertice);\n  }\n\n  return vertices;\n}\n\nfunction setLinePartMeasuresByGeometricLength(line: number[][], startMeasure: number, options: SetMeasuresByGeometricLengthOptions): void {\n  let previousVertex;\n  let vertexMeasure = startMeasure;\n\n  line.forEach((vertex, index) => {\n    if (index !== 0) {\n      const distanceBetweenVerticees: number = distance(previousVertex, vertex, options);\n      vertexMeasure += distanceBetweenVerticees;\n    }\n\n    setMeasure(vertex, vertexMeasure, options.hasZValues);\n    previousVertex = vertex;\n  });\n}\n\nfunction setMeasure(coordinate: number[], measure: number, hasZValues: boolean): void {\n  const accountForZValue = hasZValues || coordinate.length > 3;\n  const measureIndex = accountForZValue ? 3 : 2;\n  coordinate[measureIndex] = measure;\n\n  if (accountForZValue) {\n    ensureZValue(coordinate);\n  }\n}\n\nfunction ensureZValue(coordinate: number[]): void {\n  if (isNotNumber(coordinate[2])) {\n    coordinate[2] = DEFAULT_EMPTY_Z_VALUE;\n  }\n}\n","// 3rd Party.\nimport { LineString, Feature, MultiPoint, Point, Polygon, MultiLineString, MultiPolygon } from 'geojson';\nimport { Observable, Subscription } from 'rxjs';\nimport destination from '@turf/destination';\nimport bearing from '@turf/bearing';\n\n// TSS.\nimport { PositionPathBuilderOptions } from './position-path-builder-options';\nimport { Disposable } from '../core/disposable';\nimport { isPositionAcceptable } from './is-position-acceptable.function';\nimport { GpsPosition } from './gps-position/gps-position';\nimport { PositionPathUnfilteredGpsPosition } from './position-path-unfiltered-gps-position';\nimport { setMeasuresByGeometricLength } from '../geometry/geometry/set-measures-by-geometric-length.function';\nimport { isMultiPartLine } from '../geometry/line/is-multi-part.function';\nimport { PositionPathCalibrationPosition } from './position-path-calibration-position';\nimport { CalibrationPosition } from '../geometry/line/calibration/calibration-point';\nimport { PositionPathBuilderSummaryPosition } from './positon-path-builder-position-summary';\nimport { getMeasureFromPoint } from '../geometry/point/get-measure-from-point.function';\nimport { PATH_BUILDER_EMPTY_CALIBRATION_MEASURE_VALUE, PATH_BUILDER_CALCULATED_M_DEVICE_SOURCE } from './geolocation.constants';\nimport { getDistanceBetweenLatLng } from '../geometry/point/get-distance-between-points.function';\nimport { convertLengthUnits } from '../core/units/convert-length-units.function';\nimport { LengthUnit } from '../core/units/length-unit';\nimport { sumValues } from '../core/stats/sum-values.function';\nimport { getLastItem } from '../core/array/get-last-item.function';\nimport { isNumber } from '../core/type-check/is-number.function';\nimport { pointsAlmostEqual } from '../core/equality/points-almost-equal.function';\n\n\nconst UNPLACED_CALIBRATION_MEASURE_KEY = 'pending';\n\nconst DEFAULT_OPTIONS: PositionPathBuilderOptions = {\n  gpsRequiredAccuracyMeters: 10,\n  requireAccuracy: true,\n  pointEquivalencyPrecision: 8,\n  returnZValues: true,\n  returnMValues: true,\n  mValueUnit: 'miles',\n  storeUnfilteredPath: false,\n  calibrationMeasureSnappingDistanceDelta: 2,\n  calibrationMeasureSnappingDistanceDeltaUnit: LengthUnit.Foot\n};\n\n\nexport class PositionPathBuilder implements Disposable {\n  readonly parts: GpsPosition[][];\n  readonly unfilteredPath: GpsPosition[];\n  readonly pathBreaks: {}[];\n  readonly calibratedMeasures: Map<string, PositionPathCalibrationPosition>;\n  private readonly options: PositionPathBuilderOptions;\n  private trackSubscription: Subscription;\n\n  get positionCount(): number {\n    const counts = this.parts.map(part => part.length);\n    return sumValues(counts);\n  }\n\n  get currentPartIndex(): number {\n    return this.parts.length - 1;\n  }\n\n  get currentPart(): GpsPosition[] {\n    return this.parts[this.currentPartIndex];\n  }\n\n  get lastPosition(): GpsPosition {\n    return getLastItem(this.currentPart);\n  }\n\n  get hasPosition(): boolean {\n    return Boolean(this.lastPosition);\n  }\n\n  get isEmpty(): boolean {\n    return this.currentPart.length === 0;\n  }\n\n  get isValidPath(): boolean {\n    return this.currentPart.length > 1;\n  }\n\n  get isSinglePoint(): boolean {\n    return this.parts.length === 1 && this.currentPart.length === 1;\n  }\n\n  constructor(options?: PositionPathBuilderOptions) {\n    this.parts = [[]];\n    this.unfilteredPath = [];\n    this.calibratedMeasures = new Map<string, PositionPathCalibrationPosition>();\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n  }\n\n  trackPosition(positionStream: Observable<GpsPosition>): this {\n    this.trackSubscription = positionStream.subscribe(position => this.addPosition(position));\n    return this;\n  }\n\n  addPosition(position: GpsPosition, calibrationMeasure?: number): this {\n    const accuracyCriteriaMet = !this.options.requireAccuracy\n      || isPositionAcceptable(position, this.options.gpsRequiredAccuracyMeters);\n    const positionNotAcceptable = !position || !accuracyCriteriaMet;\n\n    if (positionNotAcceptable) {\n      return this.tryStoreUnfilteredPath(position);\n    }\n\n    if (this.isEmpty) {\n      return this.forceAddPosition(position);\n    }\n\n    const pointsAtSameLocation = this.arePositionsEquivalent(this.lastPosition, position);\n    const bothPointsAtStandStill = this.lastPosition.speed === 0 && position.speed === 0 || pointsAtSameLocation;\n    if (bothPointsAtStandStill) {\n      this\n        .tryStoreUnfilteredPath(position)\n        .replaceLastPositionIfBetter(position);\n\n      return this;\n    }\n\n    this.forceAddPosition(position);\n    if (isNumber(calibrationMeasure)) {\n      this.addCalibrationMeasureToLastPosition(calibrationMeasure);\n    }\n\n    return this;\n  }\n\n  startNewPart(): this {\n    this.parts.push([]);\n    return this;\n  }\n\n  removePositionByIndex(vertexIndex: number, partIndex: number = 0): this {\n    const part = this.parts[partIndex];\n    if (!part) {\n      throw new Error(`Invalid part index\" ${partIndex}`);\n    }\n\n    part.splice(vertexIndex, 1);\n\n    const key = this.getCalibrationMeasureLookupKey(partIndex, vertexIndex);\n    if (this.calibratedMeasures.has(key)) {\n      this.calibratedMeasures.delete(key);\n    }\n\n    return this;\n  }\n\n  removePosition(position: GpsPosition): this {\n    let partIndex = -1;\n    let vertexIndex = -1;\n\n    this.parts.forEach((part, index) => {\n      const foundPositionIndex = part.indexOf(position);\n      if (foundPositionIndex > -1) {\n        partIndex = index;\n        vertexIndex = foundPositionIndex;\n      }\n    });\n\n    if (partIndex > -1 && vertexIndex > -1) {\n      return this.removePositionByIndex(vertexIndex, partIndex);\n    }\n\n    return this;\n  }\n\n  removeCalibrationMeasure(measure: number): this {\n    Array.from(this.calibratedMeasures.values())\n      .filter(calibration => calibration.measure === measure)\n      .forEach(calibration =>\n        this.removeCalibrationMeasureByIndex(calibration.vertexIndex, calibration.partIndex)\n      );\n\n    return this;\n  }\n\n  removeCalibrationMeasureByIndex(vertexIndex: number, partIndex: number = 0): this {\n    const key = this.getCalibrationMeasureLookupKey(partIndex, vertexIndex);\n    if (this.calibratedMeasures.has(key)) {\n      this.calibratedMeasures.delete(key);\n    }\n\n    return this;\n  }\n\n  addCalibrationMeasure(measure: number): this {\n    const timestamp = new Date().getTime();\n    const [lastVertex] = this.currentPart.slice(-1);\n    if (lastVertex && lastVertex.timestamp && lastVertex.timestamp === timestamp) {\n      return this.addCalibrationMeasureToLastPosition(measure);\n    }\n\n    const partIndex = this.currentPartIndex;\n    const key = UNPLACED_CALIBRATION_MEASURE_KEY;\n    this.calibratedMeasures.set(key, {\n      measure,\n      partIndex,\n      vertexIndex: null,\n      timestamp\n    });\n\n    return this;\n  }\n\n  addCalibrationMeasureToLastPosition(measure: number): this {\n    const partIndex = this.currentPartIndex;\n    const lastVertexIndex = this.currentPart.length - 1;\n    return this.addCalibrationMeasureAtIndex(measure, lastVertexIndex, partIndex);\n  }\n\n  addCalibrationMeasureAtIndex(measure: number, vertexIndex: number, partIndex = 0): this {\n    const key = this.getCalibrationMeasureLookupKey(partIndex, vertexIndex);\n    this.calibratedMeasures.set(key, {\n      measure,\n      partIndex,\n      vertexIndex,\n      timestamp: new Date().getTime()\n    });\n\n    return this;\n  }\n\n  forceAddPosition(position: GpsPosition): this {\n    this.tryStoreUnfilteredPath(position);\n    this.addPositionToPath(position);\n    return this;\n  }\n\n  toPointFeature(properties = {}): Feature<Point | MultiPoint> {\n    return {\n      type: 'Feature',\n      geometry: this.toPointGeometry(),\n      properties\n    };\n  }\n\n  toLineFeature(properties = {}): Feature<LineString | MultiLineString> {\n    return {\n      type: 'Feature',\n      geometry: this.toLineGeometry(),\n      properties\n    };\n  }\n\n  toSingleLineFeature(properties = {}): Feature<LineString> {\n    return {\n      type: 'Feature',\n      geometry: this.toSingleLineGeometry(),\n      properties\n    };\n  }\n\n  toMultiLineFeature(properties = {}): Feature<MultiLineString> {\n    return {\n      type: 'Feature',\n      geometry: this.toMultiLineGeometry(),\n      properties\n    };\n  }\n\n  toPolygonFeature(properties = {}): Feature<Polygon | MultiPolygon> {\n    return {\n      type: 'Feature',\n      geometry: this.toPolygonGeometry(),\n      properties\n    };\n  }\n\n  toMultiPolygonFeature(properties = {}): Feature<MultiPolygon> {\n    return {\n      type: 'Feature',\n      geometry: this.toMultiPolygonGeometry(),\n      properties\n    };\n  }\n\n  toSinglePolygonFeature(properties = {}): Feature<Polygon> {\n    return {\n      type: 'Feature',\n      geometry: this.toSinglePolygonGeometry(),\n      properties\n    };\n  }\n\n  toFeature(): Feature<LineString | MultiLineString | Point | MultiPoint> {\n    return this.isSinglePoint\n      ? this.toPointFeature() as Feature<Point>\n      : this.toLineFeature();\n  }\n\n  toGeometry(): LineString | MultiLineString | Point {\n    return this.isSinglePoint\n      ? this.toPointGeometry() as Point\n      : this.toLineGeometry();\n  }\n\n  toSingleLineGeometry(calibrateMeasures = true): LineString {\n    const line = this.toLineGeometry(calibrateMeasures);\n    if (isMultiPartLine(line.coordinates)) {\n      throw new Error('Cannot convert MultiLineString to LineString. Data would be lost');\n    }\n\n    return line as LineString;\n  }\n\n  toMultiLineGeometry(calibrateMeasures = true): MultiLineString {\n    let line = this.toLineGeometry(calibrateMeasures);\n    const isSinglePartLine = !isMultiPartLine(line.coordinates);\n    if (isSinglePartLine) {\n      line = {\n        type: 'MultiLineString',\n        bbox: line.bbox,\n        coordinates: [line.coordinates as number[][]]\n      };\n    }\n\n    return line as MultiLineString;\n  }\n\n  toLineGeometry(calibrateMeasures = true): LineString | MultiLineString {\n    const parts: number[][][] = this.toMultiPartArray();\n    const line: LineString | MultiLineString = parts.length > 1\n      ? {\n        type: 'MultiLineString',\n        coordinates: parts\n      }\n      : {\n        type: 'LineString',\n        coordinates: parts[0]\n      };\n\n    if (this.options.returnMValues) {\n      const calibrationPositions: CalibrationPosition[] = calibrateMeasures\n        ? Array.from(\n          this.calibratedMeasures.values()\n        )\n        : [];\n\n      setMeasuresByGeometricLength(line, {\n        units: this.options.mValueUnit,\n        hasZValues: this.options.returnZValues,\n        calibrationPositions\n      });\n    }\n\n    return line;\n  }\n\n  toMultiPolygonGeometry(): MultiPolygon {\n    let poly = this.toPolygonGeometry();\n    const isSinglePolygon = poly.type === 'Polygon';\n\n    if (isSinglePolygon) {\n      poly = {\n        type: 'MultiPolygon',\n        bbox: poly.bbox,\n        coordinates: [poly.coordinates as number[][][]]\n      };\n    }\n\n    return poly as MultiPolygon;\n  }\n\n  toSinglePolygonGeometry(): Polygon {\n    const poly = this.toPolygonGeometry();\n    const isMultiPart = poly.type === 'MultiPolygon';\n\n    if (isMultiPart) {\n      throw new Error('Cannot convert MultiPolygon to Polygon. Data would be lost');\n    }\n\n    return poly as Polygon;\n  }\n\n  toPolygonGeometry(): Polygon | MultiPolygon {\n    const parts: number[][][] = this.toMultiPartArray();\n    parts.forEach(part => this.ensurePolygonIsClosed(part));\n\n    return parts.length > 1\n      ? {\n        type: 'MultiPolygon',\n        coordinates: [parts]\n      }\n      : {\n        type: 'Polygon',\n        coordinates: parts\n      };\n  }\n\n  toPointGeometry(): Point | MultiPoint {\n    const parts: number[][][] = this.toMultiPartArray();\n\n    return parts.length > 1\n      ? { type: 'MultiPoint', coordinates: parts.map(part => part[0]) }\n      : { type: 'Point', coordinates: parts[0][0] };\n  }\n\n  replaceLastPositionIfBetter(position: GpsPosition): boolean {\n    let wasPositionAdded = true;\n    if (this.isEmpty) {\n      this.addPositionToPath(position);\n      return wasPositionAdded;\n    }\n\n    const newPositionHasBetterAccuracy = this.lastPosition.accuracy > position.accuracy;\n    if (newPositionHasBetterAccuracy) {\n      this.replaceLastPosition(position);\n    } else {\n      wasPositionAdded = false;\n    }\n\n    return wasPositionAdded;\n  }\n\n  replaceLastPosition(position: GpsPosition): this {\n    this.currentPart[this.currentPart.length - 1] = position;\n\n    return this;\n  }\n\n  getBestPosition(): GpsPosition {\n    throw new Error('Not implemented yet');\n  }\n\n  getUnfilteredPath(): PositionPathUnfilteredGpsPosition[] {\n    return this.unfilteredPath.map(position => {\n      const unfilteredGpsPosition: PositionPathUnfilteredGpsPosition = Object.assign({\n        included: this.pathContains(position)\n      }, position);\n\n      return unfilteredGpsPosition;\n    });\n  }\n\n  getGeometryPathSummary(): PositionPathBuilderSummaryPosition[][] {\n    const line = this.toMultiLineGeometry(false);\n\n    return line.coordinates.map(\n      (part: number[][], partIndex: number) => this.getGeometryLinePartSummary(part, partIndex)\n    );\n  }\n\n  pathContains(position: GpsPosition): boolean {\n    const found = this.parts.find(part =>\n      part.indexOf(position) > -1\n    );\n\n    return Boolean(found);\n  }\n\n  getPositionByIndex(partIndex: number, vertexIndex: number): GpsPosition {\n    return this.parts[partIndex][vertexIndex];\n  }\n\n  dispose(): void {\n    if (this.trackSubscription) {\n      this.trackSubscription.unsubscribe();\n    }\n\n    this.parts.length = 0;\n  }\n\n  private getGeometryLinePartSummary(linePart: number[][], partIndex: number): PositionPathBuilderSummaryPosition[] {\n    return linePart.map((vertex, vertexIndex) => {\n      const position = this.getPositionByIndex(partIndex, vertexIndex);\n      const calibrationKey = this.getCalibrationMeasureLookupKey(partIndex, vertexIndex);\n      const calibrationPointMeasureValue = this.calibratedMeasures.has(calibrationKey)\n        ? this.calibratedMeasures.get(calibrationKey).measure\n        : PATH_BUILDER_EMPTY_CALIBRATION_MEASURE_VALUE;\n\n      return Object.assign({\n        geometricMeasure: getMeasureFromPoint(vertex),\n        partIndex,\n        vertexIndex,\n        calibrationPointMeasureValue\n      }, position);\n    });\n  }\n\n  private getCalibrationMeasureLookupKey(partIndex: number, vertexIndex: number): string {\n    return `${partIndex}_${vertexIndex}`;\n  }\n\n  private toMultiPartArray(): number[][][] {\n    const parts: number[][][] = [];\n    this.parts.forEach(part => {\n      const coordinates: number[][] = part.map(\n        position => this.options.returnZValues\n          ? [position.longitude, position.latitude, position.altitude || 0]\n          : [position.longitude, position.latitude]\n      );\n\n      parts.push(coordinates);\n    });\n\n    return parts;\n  }\n\n  private ensurePolygonIsClosed(polygonPoints: number[][]): void {\n    if (polygonPoints.length > 1) {\n      const [first] = polygonPoints;\n      const last: number[] = getLastItem(polygonPoints);\n      const [firstLng, firstLat, firstZ] = first;\n      const [lastLng, lastLat] = last;\n      const doesPolygonNotClose = !this.arePointsEquivalent(firstLng, firstLat, lastLng, lastLat);\n\n      if (doesPolygonNotClose) {\n        const closingPoint = [firstLng, firstLat, firstZ || 0];\n        polygonPoints.push(closingPoint);\n      }\n    }\n  }\n\n  private addPositionToPath(position: GpsPosition): void {\n    this.currentPart.push(position);\n\n    if (this.calibratedMeasures.has(UNPLACED_CALIBRATION_MEASURE_KEY)) {\n      this.addPendingCalibrationPoint();\n    }\n  }\n\n  private addPendingCalibrationPoint(): void {\n    const calibratonPosition = this.calibratedMeasures.get(UNPLACED_CALIBRATION_MEASURE_KEY);\n    const calibrationTimestamp = calibratonPosition.timestamp;\n    const [secondToLastPosition, lastPosition] = this.currentPart.slice(-2);\n    const isTimestampBetweenVertices = calibrationTimestamp > secondToLastPosition.timestamp\n      && calibrationTimestamp < lastPosition.timestamp;\n\n    if (isTimestampBetweenVertices) {\n      const totalTimeDelta = Math.abs(lastPosition.timestamp - secondToLastPosition.timestamp);\n      const offsetTimeDelta = Math.abs(calibrationTimestamp - secondToLastPosition.timestamp);\n      const percentOfDistance = offsetTimeDelta / totalTimeDelta;\n      const distanceBetweenVerticesKilometers = getDistanceBetweenLatLng(\n        secondToLastPosition.latitude,\n        secondToLastPosition.longitude,\n        lastPosition.latitude,\n        lastPosition.longitude,\n        LengthUnit.Mile\n      );\n\n      const distanceToPreviousVertexKilometers = percentOfDistance * distanceBetweenVerticesKilometers;\n      const didSnapCalibrationMeasureToVertes = this.trySnapCalibrationMeasureToVertex(\n        calibratonPosition.measure,\n        distanceBetweenVerticesKilometers,\n        distanceToPreviousVertexKilometers);\n\n      if (didSnapCalibrationMeasureToVertes) {\n        return;\n      }\n\n      const heading = bearing(\n        [secondToLastPosition.longitude, secondToLastPosition.latitude],\n        [lastPosition.longitude, lastPosition.latitude]\n      );\n\n      const newPoint: Feature<Point> = destination(\n        [secondToLastPosition.longitude, secondToLastPosition.latitude],\n        distanceToPreviousVertexKilometers,\n        heading, { units: 'kilometers' }\n      );\n\n      const spliceIndexForSecondToLastPosition = this.currentPart.length - 1;\n      const newPosition: GpsPosition = Object.assign({}, lastPosition, {\n        longitude: newPoint.geometry.coordinates[0],\n        latitude: newPoint.geometry.coordinates[1],\n        deviceSource: PATH_BUILDER_CALCULATED_M_DEVICE_SOURCE\n      });\n\n      this.calibratedMeasures.delete(UNPLACED_CALIBRATION_MEASURE_KEY);\n      this.addCalibrationMeasureAtIndex(calibratonPosition.measure, spliceIndexForSecondToLastPosition, this.currentPartIndex);\n      this.currentPart.splice(spliceIndexForSecondToLastPosition, 0, newPosition);\n    } else if (calibrationTimestamp >= lastPosition.timestamp) {\n      this.addCalibrationMeasureToLastPosition(calibratonPosition.measure);\n    } else {\n      throw new Error(`Calibration measure timestamp '${calibratonPosition.timestamp}' can not be located between`\n        + ` '${secondToLastPosition.timestamp}' and '${lastPosition.timestamp}'`);\n    }\n  }\n\n  private trySnapCalibrationMeasureToVertex(\n    calibrationMeasure: number,\n    totalVerticeDistanceKilometers: number,\n    distanceToPreviousVertexKilometers: number\n  ): boolean {\n    const distanceToNextVertexKilometers = totalVerticeDistanceKilometers - distanceToPreviousVertexKilometers;\n    const distanceThresholdKilometers = convertLengthUnits(\n      this.options.calibrationMeasureSnappingDistanceDelta,\n      this.options.calibrationMeasureSnappingDistanceDeltaUnit,\n      LengthUnit.Kilometer\n    );\n\n    const isPointCloseEnoughToPrevious = distanceToPreviousVertexKilometers < distanceThresholdKilometers;\n    const isPointCloseEnoughToNext = distanceToNextVertexKilometers < distanceThresholdKilometers;\n\n    if (isPointCloseEnoughToPrevious || isPointCloseEnoughToNext) {\n      const previousVertexIndex = this.currentPart.length - 2;\n      const nextVertexIndex = this.currentPart.length - 1;\n      const vertexIndex = distanceToPreviousVertexKilometers < distanceToNextVertexKilometers\n        ? previousVertexIndex\n        : nextVertexIndex;\n\n      this.addCalibrationMeasureAtIndex(calibrationMeasure, vertexIndex, this.currentPartIndex);\n      this.calibratedMeasures.delete(UNPLACED_CALIBRATION_MEASURE_KEY);\n      return true;\n    }\n\n    return false;\n  }\n\n  private arePositionsEquivalent(position1: GpsPosition, position2: GpsPosition): boolean {\n    return this.arePointsEquivalent(\n      position1.longitude,\n      position1.latitude,\n      position2.longitude,\n      position2.latitude\n    );\n  }\n\n  private arePointsEquivalent(longitude1: number, latitude1: number, longitude2: number, latitude2: number): boolean {\n    return pointsAlmostEqual(\n      longitude1,\n      latitude1,\n      longitude2,\n      latitude2,\n      this.options.pointEquivalencyPrecision\n    );\n  }\n\n  private tryStoreUnfilteredPath(position: GpsPosition): this {\n    if (this.options.storeUnfilteredPath) {\n      this.unfilteredPath.push(position);\n    }\n\n    return this;\n  }\n}\n","export function radiansToDegrees(radians) {\n  return radians * 180 / Math.PI;\n}\n","import { Injectable } from '@angular/core';\nimport { AutoConfig } from '../core/auto-config.decorator';\n\n\n/**\n * Configuration class for storing geometry-related settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('GeometryConfig')\nexport class GeometryConfig {\n}\n","import { toMultiPartPaths } from './to-multi-part-paths.function';\nimport { LineGeometry } from './line-geometry';\nimport { getMeasureFromPoint } from '../point/get-measure-from-point.function';\nimport { addRange } from '../../core/array/add-range.function';\n\n\nexport function extractMeasuresFromLine(line: LineGeometry): number[] {\n  const measures = [];\n  const paths: number[][][] = toMultiPartPaths(line);\n  paths.forEach((coordinates: number[][]) => {\n    const pathMeasures = coordinates.map((coordinate: number[]) => getMeasureFromPoint(coordinate));\n    addRange(measures, pathMeasures);\n  });\n\n  return measures;\n}\n","import { SinglePoint } from '../point/single-point';\nimport { toSinglePartPointArray } from '../point/to-single-part-point.function';\n\n\ninterface Point {\n  x: number;\n  y: number;\n}\n\nfunction squareRoot(x) {\n  return x * x;\n}\n\nfunction squareRootDistance(v: Point, w: Point) {\n  return squareRoot(v.x - w.x) + squareRoot(v.y - w.y);\n}\n\nfunction distanceToSegmentSquared(testPoint: Point, lineStartPoint: Point, lineEndPoint: Point) {\n  const lengthSquared = squareRootDistance(lineStartPoint, lineEndPoint);\n\n  if (lengthSquared === 0) {\n    return squareRootDistance(testPoint, lineStartPoint);\n  }\n\n  const part1 = (testPoint.x - lineStartPoint.x) * (lineEndPoint.x - lineStartPoint.x);\n  const part2 = (testPoint.y - lineStartPoint.y) * (lineEndPoint.y - lineStartPoint.y);\n  const formulaPart1 = part1 + part2;\n  const delta = formulaPart1 / lengthSquared;\n\n  if (delta < 0) {\n    return squareRootDistance(testPoint, lineStartPoint);\n  }\n\n  if (delta > 1) {\n    return squareRootDistance(testPoint, lineEndPoint);\n  }\n\n  const xValue = lineStartPoint.x + delta * (lineEndPoint.x - lineStartPoint.x);\n  const yValue = lineStartPoint.y + delta * (lineEndPoint.y - lineStartPoint.y);\n\n  return squareRootDistance(testPoint, { x: xValue, y: yValue });\n}\n\nfunction distToSegment(testPoint: Point, lineStartPoint: Point, lineEndPoint: Point) {\n  return Math.sqrt(distanceToSegmentSquared(testPoint, lineStartPoint, lineEndPoint));\n}\n\nexport function getDistanceToLine(testPoint: SinglePoint, lineStartPoint: SinglePoint, lineEndPoint: SinglePoint): number {\n  const testPointArray: number[] = toSinglePartPointArray(testPoint);\n  const lineStartPointArray: number[] = toSinglePartPointArray(lineStartPoint);\n  const lineEndPointArray: number[] = toSinglePartPointArray(lineEndPoint);\n  const [testPointX, testPointY] = testPointArray;\n  const [lineStartX, lineStartY] = lineStartPointArray;\n  const [lineEndX, lineEndY] = lineEndPointArray;\n\n  return distToSegment(\n    { x: testPointX, y: testPointY },\n    { x: lineStartX, y: lineStartY },\n    { x: lineEndX, y: lineEndY },\n  );\n}\n","import { getMeasure } from './get-measure.function';\nimport { LineGeometry } from './line-geometry';\nimport { SinglePoint } from '../point/single-point';\nimport { GetMeasureOptions } from './get-measure-options';\n\n\nexport function getMeasureFromFlatCoordinateSystem(line: LineGeometry, point: SinglePoint, options?: GetMeasureOptions): number {\n  return getMeasure(line, point, Object.assign({ coordinateSystem: 'flat' }, options));\n}\n","import { LineGeometry } from './line-geometry';\nimport { GetMeasureOptions } from './get-measure-options';\n\n\nexport function getMeasureFromLatLng(line: LineGeometry, lat: number, lng: number, options: GetMeasureOptions): number {\n  return this.getMeasure(line, [lng, lat], options);\n}\n","import { LineGeometry } from './line-geometry';\nimport { toMultiPartPaths } from './to-multi-part-paths.function';\nimport { PointComparisonDetails } from '../point/point-comparison-details';\nimport { SinglePoint } from '../point/single-point';\nimport { getDistanceBetweenPoints, getMetersBetweenLatLng } from '../point/get-distance-between-points.function';\nimport { toSinglePartPointArray } from '../point/to-single-part-point.function';\nimport { getDistanceToLine } from './get-distance-to-line.function';\nimport { addRange } from '../../core/array/add-range.function';\n\n\nexport interface LineVerticeeSummary {\n  nearestPoint: PointComparisonDetails;\n  furthestPoint: PointComparisonDetails;\n  minPoint: PointComparisonDetails;\n  maxPoint: PointComparisonDetails;\n  nextPoint: PointComparisonDetails;\n  previousPoint: PointComparisonDetails;\n}\n\n\nexport function getVerticeeInfos(line: LineGeometry, point: SinglePoint, isPointDegrees: boolean = true): LineVerticeeSummary {\n  const pointComparisonDetails: PointComparisonDetails[] = [];\n  const paths: number[][][] = toMultiPartPaths(line);\n\n  paths.forEach((coordinates: number[][]) => {\n    const details = comparePathWithPoint(coordinates, point, isPointDegrees);\n    addRange(pointComparisonDetails, details);\n  });\n\n  let nearestPoint: PointComparisonDetails;\n  let furthestPoint: PointComparisonDetails;\n  let minPoint: PointComparisonDetails;\n  let maxPoint: PointComparisonDetails;\n\n  pointComparisonDetails.forEach(pointCandidate => {\n    if (!nearestPoint || pointCandidate.distance < nearestPoint.distance) {\n      nearestPoint = pointCandidate;\n    }\n\n    if (!furthestPoint || pointCandidate.distance > furthestPoint.distance) {\n      furthestPoint = pointCandidate;\n    }\n\n    if (!minPoint || pointCandidate.pointMeasure < minPoint.pointMeasure) {\n      minPoint = pointCandidate;\n    }\n\n    if (!maxPoint || pointCandidate.pointMeasure > maxPoint.pointMeasure) {\n      maxPoint = pointCandidate;\n    }\n  });\n\n  // const nearestPoint = pointComparisionDetails\n  //   .reduce((accumulator, value) => accumulator.distance > value.distance ? value : accumulator);\n\n  const pointBefore = pointComparisonDetails[nearestPoint.index - 1];\n  const pointAfter = pointComparisonDetails[nearestPoint.index + 1];\n  let nextPoint = pointAfter;\n  let previousPoint = pointBefore;\n\n  // NOTE: this logic handles the rare case where the distance of the test point matches both the next\n  // and previous verticee.\n  // 0-----4--------------------------100\n  //          5\n  if (pointBefore && pointAfter) {\n    const beforDistance = getDistanceToLine(point, nearestPoint.pointCoordinate, pointBefore.pointCoordinate);\n    const afterDistance = getDistanceToLine(point, nearestPoint.pointCoordinate, pointAfter.pointCoordinate);\n\n    if (beforDistance < afterDistance) {\n      nextPoint = pointBefore;\n      previousPoint = pointComparisonDetails[nextPoint.index - 2];\n    }\n  }\n\n  return {\n    nearestPoint,\n    furthestPoint,\n    nextPoint,\n    previousPoint,\n    minPoint,\n    maxPoint\n  };\n}\n\nexport function getClosestVerticees(\n  line: LineGeometry,\n  point: SinglePoint,\n  isPointDegrees: boolean = true\n): [SinglePoint | null, SinglePoint | null] {\n  const info = getVerticeeInfos(line, point, isPointDegrees);\n\n  return [\n    info.nearestPoint ? info.nearestPoint.pointCoordinate : null,\n    info.nextPoint ? info.nextPoint.pointCoordinate : null\n  ];\n}\n\nexport function getClosestVerticee(line: LineGeometry, point: SinglePoint, isPointDegrees: boolean = true): SinglePoint {\n  const [firstClosest] = getClosestVerticees(line, point, isPointDegrees);\n  return firstClosest;\n}\n\nfunction comparePathWithPoint(coordinates: number[][], pointToCompare: SinglePoint, isPointDegrees: boolean): PointComparisonDetails[] {\n  const pointComparisionDetailsFromPath: PointComparisonDetails[] = coordinates\n    .map(\n      (coordinate: number[], index: number) => compareCoordinateWithPoint(coordinate, pointToCompare, isPointDegrees, index)\n    );\n\n  return pointComparisionDetailsFromPath;\n}\n\nfunction getDegreeDistance(coordinate: number[], pointToCompare: SinglePoint): number {\n  const coordinate2: number[] = toSinglePartPointArray(pointToCompare);\n\n  return getMetersBetweenLatLng(coordinate[1], coordinate[0], coordinate2[1], coordinate2[0]);\n}\n\nfunction compareCoordinateWithPoint(\n  coordinate: number[],\n  pointToCompare: SinglePoint,\n  isPointDegrees: boolean,\n  index: number\n): PointComparisonDetails {\n  const distance = isPointDegrees\n    ? getDegreeDistance(coordinate, pointToCompare)\n    : getDistanceBetweenPoints(coordinate, pointToCompare);\n\n  const pointDetails: PointComparisonDetails = {\n    pointCoordinate: coordinate,\n    distance,\n    index\n  };\n\n  return pointDetails;\n}\n","/**\n * Determines if a point (value) is within a given bounds (line).\n * @param boundStart The start of the restrcting bounds.\n * @param boundEnd The end of the restricting bounds.\n * @param testValue The value to check against the restricting bounds.\n */\nexport function isPointWithinBounds(boundStart: number, boundEnd: number, testValue: number) {\n  return testValue >= boundStart && testValue <= boundEnd;\n}\n\n/**\n * Determines if a point (value) is within a given bounds (line), but will not match the start and end values.\n * @param boundStart The start of the restrcting bounds.\n * @param boundEnd The end of the restricting bounds.\n * @param testValue The value to check against the restricting bounds.\n */\nexport function isPointWithinButNotIncludingBounds(boundStart: number, boundEnd: number, testValue: number) {\n  return testValue > boundStart && testValue < boundEnd;\n}\n","import { isPointWithinButNotIncludingBounds } from '../point/bounds.function';\n\n\n/**\n * Determines if two points (a line) are within a given bounds (line).\n * @param boundStart The start of the restrcting bounds.\n * @param boundEnd The end of the restricting bounds.\n * @param testStartValue The start value of the line to check against the restricting bounds.\n * @param testEndValue The end value of the line to check against the restricting bounds.\n */\nexport function isLineWithinBounds(boundStart: number, boundEnd: number, testStartValue: number, testEndValue: number) {\n  /**\n   * Runs through:\n   * BOUNDS:   10---------15\n   * TEST:   8---------------18\n   *\n   * Starts and runs through:\n   * BOUNDS: 0---------15\n   * TEST:   0---------------18\n   *\n   * Ends and runs through:\n   * BOUNDS:       5---------18\n   * TEST:   0---------------18\n   */\n  const runsThrough = testStartValue < boundStart && testEndValue > boundEnd;\n  const isFullMatch = testStartValue === boundStart && testEndValue === boundEnd;\n  const isStartInBounds = isPointWithinButNotIncludingBounds(boundStart, boundEnd, testStartValue);\n  const isEndInBounds = isPointWithinButNotIncludingBounds(boundStart, boundEnd, testEndValue);\n\n  const isStartMatch = boundStart === testStartValue;\n  const isEndMatch = boundEnd === testEndValue;\n  const startsAndRunsThrough = isStartMatch && boundStart <= testEndValue;\n  const endsAndRunsThrough = isEndMatch && boundEnd >= testStartValue;\n\n  return runsThrough\n    || isFullMatch\n    || isStartInBounds\n    || isEndInBounds\n    || startsAndRunsThrough\n    || endsAndRunsThrough;\n}\n","// 3rd Party.\nimport { LineString } from 'geojson';\n\n// TSS.\nimport { SinglePoint } from '../point/single-point';\nimport { toSinglePartPointArray } from '../point/to-single-part-point.function';\nimport { getLastItem } from '../../core/array/get-last-item.function';\n\n\nexport function isPointOnLineString(line: LineString, point: SinglePoint): boolean {\n  return isPointOnLine(line.coordinates[0], getLastItem(line.coordinates), point);\n}\n\nexport function isLatLngOnLineString(line: LineString, lat: number, lng: number): boolean {\n  const [lineStartLng, lineStartLat] = line.coordinates[0];\n  const [lineEndLng, lineEndLat] = getLastItem(line.coordinates);\n\n  return isLatLngOnLine(lineStartLat, lineStartLng, lineEndLat, lineEndLng, lat, lng);\n}\n\nexport function isLatLngOnLine(\n  lineStartLat: number,\n  lineStartLng: number,\n  lineEndLat: number,\n  lineEndLng: number,\n  testPointLat: number,\n  testPointLng: number\n): boolean {\n  throw new Error('AHHH!');\n}\n\nexport function isPointOnLine(lineStartPoint: SinglePoint, lineEndPoint: SinglePoint, testPoint: SinglePoint, tolerance = 0): boolean {\n  const startPoint = toSinglePartPointArray(lineStartPoint);\n  const endPoint = toSinglePartPointArray(lineEndPoint);\n  const point = toSinglePartPointArray(testPoint);\n\n  const [startPointX, startPointY] = startPoint;\n  const [endPointX, endPointY] = endPoint;\n  const [testPointX, testPointY] = point;\n  const slope = (endPointY - startPointY) / (endPointX - startPointX);\n  const y = slope * testPointX + startPointY;\n\n  if ((y <= testPointY + tolerance && y >= testPointY - tolerance) && (testPointX >= startPointX && testPointX <= endPointX)) {\n    return true;\n  }\n\n  return false;\n}\n","import { SinglePoint } from './single-point';\nimport { toSinglePartPointArray } from './to-single-part-point.function';\nimport { calculateCrossProduct } from '../../core/stats/calculate-cross-product.function';\n\n\nexport function calculateCrossProductByPoints(startPoint: SinglePoint, endPoint: SinglePoint, testPoint: SinglePoint): number {\n  const [x1, y1] = toSinglePartPointArray(startPoint);\n  const [x2, y2] = toSinglePartPointArray(endPoint);\n  const [testX, testY] = toSinglePartPointArray(testPoint);\n\n  return calculateCrossProduct(x1, y1, x2, y2, testX, testY);\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// TSS.\nimport { AutoConfig } from '../core/auto-config.decorator';\n\n\n/**\n * Configuration class for storing Gps Gate-related settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('GpsGateConfig')\nexport class GpsGateConfig {\n  refreshInterval = 1000;\n  urlTemplate = 'http://localhost:12175/gps/{endpoint}?noCache={cacheBuster}';\n  getInfoEndpoint = 'getGpsInfo';\n  getVersionEndpoint = 'getVersion';\n  jsonpParameterName = 'jsonp';\n  geolocatorName = 'GpsGate Client';\n  geolocatorDescription = 'GpsGate client that can connect to a variety of GPS data sources.';\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n// 3rd Party.\nimport { Observable, Subject, of } from 'rxjs';\nimport { finalize, map, catchError } from 'rxjs/operators';\n\n// TSS.\nimport { GeolocatorCapability } from '../geolocation/geolocator/geolocator-capability';\nimport { BaseGeolocator } from '../geolocation/geolocator/base-geolocator.service';\nimport { GeolocatorAccuracyUnit } from '../geolocation/geolocator/geolocator-accuracy-unit';\nimport { Logger } from '../core/logging/logger.service';\nimport { GpsGateConfig } from './gps-gate.config';\nimport { GpsGateVersionInfo } from './gps-gate-version-info';\nimport { GpsPosition } from '../geolocation/gps-position/gps-position';\nimport { GpsGateGpsInfo } from './gps-gate-gps-info';\nimport { format } from '../core/formatting/format.function';\nimport { Geolocatable } from '../geolocation/geolocator/geolocatable.decorator';\n\n\n/**\n * Wrapper for geolocation service. The wrapper primarily exists to abstract the direct interaction with\n * the \"navigator\" object and to allow for injecting other implementations of geolocation functionality.\n */\n@Injectable({ providedIn: 'root' })\n@Geolocatable('gps-gate')\nexport class GpsGateGeolocator extends BaseGeolocator {\n  capabilities = [\n    GeolocatorCapability.Altitude,\n    GeolocatorCapability.AltitudeAccuracy,\n    GeolocatorCapability.Heading,\n    GeolocatorCapability.Speed,\n    GeolocatorCapability.HDOP,\n  ];\n\n  get name(): string {\n    return this.config.geolocatorName;\n  }\n\n  get description(): string {\n    return this.config.geolocatorDescription;\n  }\n\n  constructor(log: Logger, private readonly http: HttpClient, private readonly config: GpsGateConfig) {\n    super(log);\n    this.accuracyUnit = GeolocatorAccuracyUnit.Hdop;\n  }\n\n  getCurrentPosition(options?: PositionOptions): Promise<GpsPosition> {\n    const url = format(this.config.urlTemplate, {\n      endpoint: this.config.getInfoEndpoint,\n      cacheBuster: new Date().getTime()\n    });\n\n    return this.http.jsonp<GpsGateGpsInfo>(url, this.config.jsonpParameterName)\n      .pipe(\n        map((info: GpsGateGpsInfo) => {\n          const timestamp = new Date(info.trackPoint.utc).getTime();\n          const position: GpsPosition = Object.assign({\n            timestamp,\n            // NOTE: We are setting accuracy to HDOP because since this geolocator does not have\n            // accuracy capabilities (see capabilities property), accuracy will not be shown within\n            // the UI - rather fallback PDOP, HDOP, VDOP, etc will be used. However, we want to set\n            // the accuracy because this value is what will be used to do collection\n            // accuracy/precision acceptance (acceptable, warning, unaceptable, etc) - RG.\n            accuracy: info.trackPoint.precision.hdop,\n            altitudeAccuracy: null,\n            speed: info.trackPoint.velocity.groundSpeed,\n            heading: info.trackPoint.velocity.heading,\n            hdop: info.trackPoint.precision.hdop\n          }, info.trackPoint.position);\n\n          this.log.trace(`Received current position for ${this.name}`);\n          return position;\n        })\n      )\n      .toPromise();\n  }\n\n  watchPosition(options?: PositionOptions): Observable<GpsPosition> {\n    let lastPosition: GpsPosition;\n    const subject = new Subject<GpsPosition>();\n    const interval = setInterval(() => {\n      this.getCurrentPosition(options)\n        .then(position => {\n          if (notEqual(position, lastPosition)) {\n            subject.next(position);\n          }\n\n          this.log.trace(`Received watch position for ${this.name}`);\n          lastPosition = position;\n        })\n        .catch(error => subject.error(error));\n    }, this.config.refreshInterval);\n\n    return subject.pipe(\n      finalize(() => clearInterval(interval))\n    );\n  }\n\n  isAvailable(): Observable<boolean> {\n    return this.getVersion()\n      .pipe(\n        map(result => Boolean(result)),\n        catchError(() => of(false))\n      );\n  }\n\n  getVersion(): Observable<GpsGateVersionInfo> {\n    const url = format(this.config.urlTemplate, {\n      endpoint: this.config.getVersionEndpoint,\n      cacheBuster: new Date().getTime()\n    });\n\n    return this.http.jsonp<GpsGateVersionInfo>(url, this.config.jsonpParameterName);\n  }\n}\n\nfunction notEqual(position1: GpsPosition, position2: GpsPosition): boolean {\n  return !equal(position1, position2);\n}\n\nfunction equal(position1: GpsPosition, position2: GpsPosition): boolean {\n  return position1\n    && position2\n    && position1.timestamp === position2.timestamp\n    && position1.latitude === position2.latitude\n    && position1.longitude === position2.longitude\n    && position1.accuracy === position2.accuracy\n    && position1.speed === position2.speed\n    && position1.heading === position2.heading\n    && position1.altitude === position2.altitude\n    && position1.altitudeAccuracy === position2.altitudeAccuracy\n    && position1.pdop === position2.pdop\n    && position1.hdop === position2.hdop\n    && position1.vdop === position2.vdop\n    && position1.tdop === position2.tdop;\n}\n","// Angular.\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n// TSS.\nimport { TssCoreModule } from '../core/core.module';\nimport { TssGeolocationModule } from '../geolocation/geolocation.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    TssCoreModule,\n    TssGeolocationModule\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssGpsGateModule { }\n","import { FeatureClassLayer } from '../../maps/feature-class-layer';\nimport { LayerDateFormat } from '../../maps/map-layer';\n\n\nexport class CalibrationPointLayer extends FeatureClassLayer {\n  versionName: string;\n  dateFormat: LayerDateFormat;\n  routeIdFieldName: string;\n  networkFieldName: string;\n  fromDateFieldName: string;\n  toDateFieldName: string;\n  measureFieldName: string;\n  lrs: { id: string, name: string; };\n}\n","export enum CapturePosition {\n    Center = 'center',\n    Left = 'left',\n    Right = 'right',\n    Sld = 'sld',\n    Map = 'map',\n    Lane = 'lane',\n    Shoulder = 'shoulder',\n    Curb = 'curb',\n}\n","import { FeatureClassLayer } from '../../maps/feature-class-layer';\nimport { LayerDateFormat } from '../../maps/map-layer';\n\n\nexport class CenterlineLayer extends FeatureClassLayer {\n  versionName: string;\n  dateFormat: LayerDateFormat;\n  centerlineIdFieldName: string;\n  roadwayIdFieldName: string;\n  lrs: { id: string, name: string; };\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\nimport { HttpParams } from '@angular/common/http';\n\n// 3rd Party.\nimport { Observable } from 'rxjs';\nimport { LayerField, toFieldName, getGeometryFieldName } from '../../maps/fields/layer-field';\nimport { LrsLayer } from '../lrs-layer';\nimport { DataSource } from '../../data-source/data-source';\nimport { EsriMapServerService } from '../../esri/esri-map-server.service';\nimport { DataSourceService } from '../../data-source/data-source.service';\nimport { NetworkFeatureCollection } from '../networks/network-feature-collection';\nimport { NetworkLayer } from '../networks/network-layer';\nimport { EsriMapServiceQueryOptions } from '../../esri/query/esi-map-service-query-options';\nimport { WhereClauseBuilder } from '../../maps/where-clause-builder';\nimport { DataSourceConfig } from '../../data-source/data-source-config';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LrsDataService {\n  constructor(\n    private mapService: EsriMapServerService,\n    private dataSourceService: DataSourceService,\n    private dataSourceConfig: DataSourceConfig\n  ) {\n  }\n\n  getUniqueValues<T>(dataSource: DataSource, layer: LrsLayer, field: string | LayerField, whereClause?: string): Observable<T[]> {\n    const mapServiceParams: EsriMapServiceQueryOptions = { gdbVersion: layer.versionName };\n    let httpParams;\n\n    if (whereClause) {\n      mapServiceParams.where = whereClause;\n      httpParams = new HttpParams().set('where', whereClause);\n    }\n\n    return dataSource.serviceUrl\n      ? this.mapService.getUniqueValues<T>(dataSource.serviceUrl, layer, field, mapServiceParams)\n      : this.dataSourceService.getUniqueColumnValues<T>(dataSource.id, layer.featureClassName, toFieldName(field), httpParams);\n  }\n\n  getQueryCount(dataSource: DataSource, layer: LrsLayer, whereClause: string): Observable<number> {\n    return dataSource.serviceUrl\n      ? this.mapService.getQueryCount(dataSource.serviceUrl, layer, whereClause, { gdbVersion: layer.versionName })\n      : this.dataSourceService.getRecordCount(dataSource.id, layer.featureClassName, whereClause, layer.versionName);\n  }\n\n  queryRoutesByIds(dataSource: DataSource, layer: NetworkLayer, routeIds: string[]): Observable<NetworkFeatureCollection> {\n    if (!routeIds || !routeIds.length) {\n      throw new Error('Failed to query routes. No route IDs supplied.');\n    }\n\n    if (!layer.compositeRouteIdFieldName) {\n      throw new Error(`Failed to query routes. No 'compositeRouteIdFieldName' property found for layer.`);\n    }\n\n    const whereClause = `${layer.compositeRouteIdFieldName} IN ('${routeIds.join(`','`)}')`;\n    return this.queryRoutes(dataSource, layer, whereClause);\n  }\n\n  queryRoutes(dataSource: DataSource, layer: NetworkLayer, whereClause?: string): Observable<NetworkFeatureCollection> {\n    const shapeFieldName = getGeometryFieldName(layer.fields);\n\n    return dataSource.serviceUrl\n      ? this.mapService.queryRoutes(dataSource.serviceUrl, layer, whereClause, { gdbVersion: layer.versionName })\n      : this.dataSourceService.querySpatialData(\n        dataSource.id,\n        layer.featureClassName,\n        whereClause,\n        layer.versionName,\n        null,\n        null,\n        true,\n        shapeFieldName\n      );\n  }\n\n  searchRoutesByText(dataSource: DataSource, layer: NetworkLayer, searchText: string): Observable<NetworkFeatureCollection> {\n    const useMapService = Boolean(dataSource.serviceUrl);\n    const shapeFieldName = getGeometryFieldName(layer.fields);\n    let whereClause: string;\n\n    if (!useMapService) {\n      whereClause = new WhereClauseBuilder({\n        quoteFields: !this.dataSourceConfig.skipColumnQuotes\n      })\n        .whereLike(layer.displayField, searchText)\n        .toWhereClause();\n    }\n\n    return useMapService\n      ? this.mapService.searchRoutesByText(dataSource.serviceUrl, layer, searchText, { gdbVersion: layer.versionName })\n      : this.dataSourceService.querySpatialData(\n        dataSource.id,\n        layer.featureClassName,\n        whereClause,\n        layer.versionName,\n        null,\n        null,\n        true,\n        shapeFieldName\n      );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AutoConfig } from '../core/auto-config.decorator';\nimport { ResourceConfig } from '../core/resource.config';\n\n\n/**\n * Configuration class for storing global ESRI-related settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('LrsConfig')\nexport class LrsConfig extends ResourceConfig {\n  dataSourceLrsMetadataEndpoint = 'api/spatial/data/sources/{dataSourceId}/lrs/meta';\n  cacheInSessionLrsMetadata = true;\n}\n","// Angular.\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n// 3rd Party.\nimport { Observable } from 'rxjs';\n\n// TSS.\nimport { LrsConfig } from './lrs.config';\nimport { LrsMetadata } from './lrs-metadata';\nimport { join } from '../core/url/join.function';\nimport { BaseResourceService } from '../core/resource/base-resource.service';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DataSourceLrsMetadataService extends BaseResourceService<LrsMetadata> {\n  constructor(protected http: HttpClient, config: LrsConfig) {\n    super(http, {\n      url: join(config.serviceUrl, config.dataSourceLrsMetadataEndpoint),\n      idFieldName: 'dataSourceId'\n    });\n  }\n\n  create(entity: LrsMetadata, routeTokens?: any, params?: HttpParams): Observable<LrsMetadata> {\n    routeTokens = routeTokens || {};\n    routeTokens.id = entity.dataSourceId;\n\n    return super.create(entity, routeTokens, params);\n  }\n}\n","import { FeatureClassLayer } from '../maps/feature-class-layer';\nimport { LayerDateFormat, MapLayerType, MapLayer } from '../maps/map-layer';\nimport { SpatialReferenceInfo } from '../maps/spatial-reference';\nimport { stripTableName } from '../data-source/data-table';\nimport { CapturePositionDefinition } from './capture-position-definition';\nimport { LaneMetadata } from './lane-metadata';\nimport { CapturePosition } from './capture-position';\n\n\nexport function getLayerTableName(layer: LrsLayer, stripLayerTableName: boolean = false) {\n  let tableName = layer\n    ? layer.featureClassName || layer.datasetName\n    : null;\n\n  if (stripLayerTableName) {\n    tableName = stripTableName(tableName);\n  }\n\n  return tableName;\n}\n\nexport interface TemporalLayer {\n  fromDateFieldName?: string;\n  toDateFieldName?: string;\n}\n\n\nexport interface DataLayer {\n  featureClassName: string;\n}\n\n\nexport interface NetworkLayerMappingInfo {\n  id: number;\n  name?: string;\n  type?: MapLayerType;\n}\n\n\nexport interface LrsReferenceLayer extends TemporalLayer {\n  routeIdFieldName: string;\n  fromMeasureFieldName: string;\n  toMeasureFieldName: string;\n}\n\n\nexport interface LrsDataReferenceLayer extends LrsReferenceLayer, DataLayer {\n}\n\n\nexport interface ChildLrsLayer {\n  parentNetwork: NetworkLayerMappingInfo;\n}\n\nexport interface EditableLayer {\n  targetFeatureClassName?: string;\n  modifiedDateFieldName?: string;\n  modifiedByFieldName?: string;\n}\n\nexport class LrsLayer extends FeatureClassLayer implements LaneMetadata, EditableLayer {\n  // Standard LRS properties.\n  featureClassName: string;\n\n  lrsNetworkId?: number;\n  datasetName?: string;\n  unitsOfMeasure?: string;\n  measurePrecision?: number;\n  temporalViewDate?: Date;\n  timeZoneOffset?: number;\n  versionName?: string;\n  isRouteEventSource?: boolean;\n  isStaged?: boolean;\n  dateFormat?: LayerDateFormat;\n  spatialReferenceInfo?: SpatialReferenceInfo;\n  fromDateFieldName?: string;\n  toDateFieldName?: string;\n  lrs?: NetworkLayerMappingInfo;\n\n  // Edit properties.\n  targetFeatureClassName?: string;\n  modifiedDateFieldName?: string;\n  modifiedByFieldName?: string;\n\n  preventOverlaps?: boolean;\n  autoStopCaptureOnRecordBreak?: boolean;\n\n  // Lane metadata implementation.\n  forwardLaneCountFieldName?: string;\n  reverseLaneCountFieldName?: string;\n\n  positionIdentifierFieldName?: string;\n  capturePositions: CapturePositionDefinition[];\n\n  laneDrawValueOrder?: string[];\n  laneIdentifierReverseValues?: string[];\n\n  constructor(...sources: MapLayer[]) {\n    super(...sources);\n    this.capturePositions = this.capturePositions ? this.capturePositions : [];\n  }\n\n  getPositionByValue(value): CapturePositionDefinition {\n    return this.capturePositions.find(positionDef => positionDef.value === value);\n  }\n\n  getPositions(position: CapturePosition): CapturePositionDefinition[] {\n    return this.capturePositions.filter(positionDef => positionDef.position === position);\n  }\n\n  hasPosition(position: CapturePosition): boolean {\n    const positions = this.getPositions(position);\n    return positions.length > 0;\n  }\n\n  get hasAnyPositions(): boolean {\n    return this.capturePositions.length > 0;\n  }\n\n  get hasLanePosition(): boolean {\n    const positions = this.getPositions(CapturePosition.Lane);\n    return positions.length > 0;\n  }\n\n  get hasLeftPosition(): boolean {\n    const positions = this.getPositions(CapturePosition.Left);\n    return positions.length > 0;\n  }\n\n  get hasRightPosition(): boolean {\n    const positions = this.getPositions(CapturePosition.Right);\n    return positions.length > 0;\n  }\n\n  get hasCenterPosition(): boolean {\n    const positions = this.getPositions(CapturePosition.Center);\n    return positions.length > 0;\n  }\n}\n","import {\n  LrsLayer,\n  LrsDataReferenceLayer,\n  ChildLrsLayer,\n  NetworkLayerMappingInfo\n} from '../lrs-layer';\n\n\nexport class EventLayer extends LrsLayer implements LrsDataReferenceLayer, ChildLrsLayer {\n  routeIdFieldName: string;\n  eventIdFieldName: string;\n  routeNameFieldName: string;\n  fromMeasureFieldName: string;\n  toMeasureFieldName: string;\n  shapeFieldName: string;\n  xFieldName: string;\n  yFieldName: string;\n  locErrorFieldName: string;\n  canSpanRoutes: boolean;\n  hasReferentLocation: boolean;\n  isStationEvent: boolean;\n  parentNetwork: NetworkLayerMappingInfo;\n}\n","import { NetworkLayer } from '../networks/network-layer';\nimport { HierarchyFilter } from './hierarchy-filter';\n\n\nexport function generateHierarchyFilters(layer: NetworkLayer): HierarchyFilter[] {\n  return layer.routeIdFields.map((fieldName, index) => {\n    const isFirst = index === 0;\n    const field = layer.fields.find(f => f.name === fieldName);\n\n    if (!field) {\n      throw new Error(`Invalid network layer 'routeIdFields' configuration. Field '${fieldName}' not found on layer.`);\n    }\n\n    return {\n      isRoot: isFirst,\n      label: field.alias,\n      networkLayerIdFieldName: field.name\n    };\n  });\n}\n","import { ChildLrsLayer, NetworkLayerMappingInfo } from '../lrs-layer';\nimport { FeatureClassLayer } from '../../maps/feature-class-layer';\n\n\nexport class IntersectionLayer extends FeatureClassLayer implements ChildLrsLayer {\n  intersectionIdFieldName: string;\n  intersectionNameFieldName: string;\n  parentNetworkDescriptionFieldName: string;\n  measureFieldName: string;\n  parentNetwork: NetworkLayerMappingInfo;\n}\n","import { MapLayer } from '../maps/map-layer';\n\n\nexport function findLayer(layerId: number, ...layerList: MapLayer[][]): MapLayer {\n  let layer: MapLayer;\n  layerList.forEach(layers => {\n    layer = layer || (layers || []).find(l => l && l.id === layerId);\n  });\n\n  return layer;\n}\n","import { LrsLayer, NetworkLayerMappingInfo } from '../lrs-layer';\nimport { HierarchyFilter } from '../hierarchy/hierarchy-filter';\nimport { MapLayer } from '../../maps/map-layer';\nimport { generateHierarchyFilters } from '../hierarchy/generate-hierarchy-filters.function';\n\n\nexport class NetworkLayer extends LrsLayer {\n  routeIdFields: string[];\n  routeIdSeparator: string;\n  compositeRouteIdFieldName: string;\n  routeNameFieldName: string;\n  hasDominanceRules: boolean;\n  autoGenerateRouteName: boolean;\n  supportsLines: boolean;\n  eventLayers: NetworkLayerMappingInfo[];\n  intersectionLayers: NetworkLayerMappingInfo[];\n  hierarchyFilter: HierarchyFilter[];\n\n  constructor(...sources: MapLayer[]) {\n    super(...sources);\n\n    this.routeIdFields = this.routeIdFields || [];\n    this.eventLayers = this.eventLayers || [];\n    this.intersectionLayers = this.intersectionLayers || [];\n    this.hierarchyFilter = this.hierarchyFilter && this.hierarchyFilter.length\n      ? this.hierarchyFilter\n      : generateHierarchyFilters(this);\n  }\n}\n","import { LrsReferenceLayer, LrsLayer } from '../lrs-layer';\n\n\nexport class RedlineLayer extends LrsLayer implements LrsReferenceLayer {\n  routeIdFieldName: string;\n  routeNameFieldName: string;\n  fromMeasureFieldName: string;\n  toMeasureFieldName: string;\n  activityTypeFieldName: string;\n  networkFieldName: string;\n\n  get effectiveDateFieldName(): string {\n    return this.fromDateFieldName;\n  }\n\n  set effectiveDateFieldName(effectiveDateFieldName: string) {\n    this.fromDateFieldName = effectiveDateFieldName;\n  }\n}\n","import { FeatureClassLayer } from './feature-class-layer';\nimport { MapTable } from './map-table';\nimport { clone } from '../core/clone/clone.function';\nimport { Cloneable } from '../core/clone/cloneable';\n\n\nexport class MapServerMetadata implements Cloneable<MapServerMetadata> {\n  layers: FeatureClassLayer[];\n  tables: MapTable[];\n\n  assign(source: any): MapServerMetadata {\n    Object.assign(this, source);\n    return this;\n  }\n\n  clone(): MapServerMetadata {\n    const copy = clone(this);\n    return new MapServerMetadata()\n      .assign(copy);\n  }\n}\n","import { LrsLayer } from './lrs-layer';\nimport { NetworkLayer } from './networks/network-layer';\nimport { getIdField } from '../maps/fields/layer-field';\nimport { LrsMetadata } from './lrs-metadata';\nimport { ValidationCheck } from '../core/validation/validation-check';\n\n\nexport const LRS_LAYER_VALIDATIONS: ValidationCheck<LrsLayer> = new ValidationCheck<LrsLayer>(`Layer '{name}'`)\n  .add(\n    new ValidationCheck<LrsLayer>('should have list of fields')\n      .pass(l => Boolean(l.fields && l.fields.length)),\n\n    new ValidationCheck<LrsLayer>('should have an ID field in list of fields')\n      .pass(l => Boolean(getIdField(l.fields)))\n  );\n\nexport const LRS_NETWORK_LAYER_VALIDATIONS: ValidationCheck<NetworkLayer> = new ValidationCheck<NetworkLayer>(\n  `Network layer '{name}' (ID: {id})`\n)\n  .add(\n    new ValidationCheck<NetworkLayer>(`should have a 'Composite Route ID Field Name' value specified`)\n      .pass(l => Boolean(l.compositeRouteIdFieldName))\n  );\n\nexport const LRS_EVENT_LAYER_VALIDATIONS: ValidationCheck<NetworkLayer> = new ValidationCheck<NetworkLayer>(\n  `Event layer '{name}' (ID: {id})`\n)\n  .add(\n    new ValidationCheck<NetworkLayer>(`should have a 'From Measure Field Name' value specified`)\n      .pass(l => Boolean(l.compositeRouteIdFieldName))\n  );\n\nexport const LRS_METADATA_VALIDATIONS: ValidationCheck<LrsMetadata> = new ValidationCheck<LrsMetadata>('LRS Metadata')\n  .add(\n    new ValidationCheck<LrsMetadata>('should have network layers')\n      .pass(x => Boolean(x.networkLayers && x.networkLayers.length)),\n\n    new ValidationCheck<LrsMetadata>('should have event layers')\n      .pass(x => Boolean(x.eventLayers && x.eventLayers.length)),\n\n    // TODO: Add other nested validations - RG.\n    // .forProperty(lrsMeta => lrsMeta.eventLayers)\n    // .add()\n  );\n","import { FeatureClassLayer } from '../../maps/feature-class-layer';\nimport { LayerDateFormat } from '../../maps/map-layer';\n\n\nexport class NonLrsLayer extends FeatureClassLayer {\n  featureClassName: string;\n  versionName: string;\n  dateFormat: LayerDateFormat;\n}\n","import { DataSource } from '../data-source/data-source';\nimport { FeatureClassLayer } from '../maps/feature-class-layer';\nimport { IntersectionLayer } from './intersections/intersection-layer';\nimport { EventLayer } from './events/event-layer';\nimport { NetworkLayer } from './networks/network-layer';\nimport { RedlineLayer } from './redlines/redline-layer';\nimport { CenterlineLayer } from './centerlines/centerline-layer';\nimport { CalibrationPointLayer } from './calibration-points/calibration-point-layer';\nimport { MapServerMetadata } from '../maps/map-server-metadata';\nimport { getGeometryField, getIdField, LayerFieldDomain } from '../maps/fields/layer-field';\nimport { MapLayer } from '../maps/map-layer';\nimport { LrsLayer } from './lrs-layer';\nimport { LrsLayerDetail } from './lrs-layer-detail';\nimport { LrsInfo } from './lrs-info';\nimport { findLayer } from './layer-search';\nimport { mergeMapMetadata, mergeLrsMetadata, deepMergeMapMetadata } from './lrs-metadata-merge';\nimport { LRS_METADATA_VALIDATIONS } from './lrs-metadata-validations';\nimport { NonLrsLayer } from './non-lrs/non-lrs-layer';\nimport { Cloneable } from '../core/clone/cloneable';\nimport { isNotValue } from '../core/type-check/is-not-value.function';\nimport { clone } from '../core/clone/clone.function';\nimport { ValidationResult } from '../core/validation/validation-results';\n\n\nfunction find(layerId: number, ...layerList: MapLayer[][]): MapLayer {\n  return findLayer(layerId, ...layerList);\n}\n\n\nexport class LrsMetadata extends MapServerMetadata implements Cloneable<LrsMetadata> {\n  dataSource: DataSource;\n  dataSourceId: string;\n  name: string;\n  serviceHasLrsMeta: boolean;\n  networkLayers: NetworkLayer[] = [];\n  eventLayers: EventLayer[] = [];\n  redlineLayers: RedlineLayer[] = [];\n  centerlineLayers: CenterlineLayer[] = [];\n  calibrationPointLayers: CalibrationPointLayer[] = [];\n  intersectionLayers: IntersectionLayer[] = [];\n  nonLRSLayers: FeatureClassLayer[] = [];\n  lrs: LrsInfo[] = [];\n  domains: LayerFieldDomain[] = [];\n\n  constructor(dataSource?: DataSource) {\n    super();\n\n    if (dataSource) {\n      this.dataSource = dataSource;\n      this.dataSourceId = dataSource.id;\n    }\n  }\n\n  /**\n   * Gets a layer by ID - searching across all types (event layers, network layers, etc).\n   */\n  getLayer(layerId: number): MapLayer {\n    return find(layerId, this.getAllLayers());\n  }\n\n  getLrsLayer(layerId: number): LrsLayer {\n    return (\n      find(layerId, this.networkLayers, this.eventLayers, this.redlineLayers)\n    ) as LrsLayer;\n  }\n\n  getLayerDetail(layerId: number): LrsLayerDetail {\n    // TODO: Come up with a better way to check these layer types.\n    // NOTE: We are doing all of these boolean checks instead of just simply calling\n    // isEventLayer = this.isEventLayer(layerId) because of performance reasons.\n    const isLrsLayer = this.isLrsLayer(layerId);\n    const isEventLayer = this.isEventLayer(layerId);\n    const isNetworkLayer = !isEventLayer && this.isNetworkLayer(layerId);\n    const isCalibrationPointLayer = !isEventLayer && !isNetworkLayer && this.isCalibrationPointLayer(layerId);\n    const isCenterlineLayer = !isEventLayer && !isNetworkLayer && !isCalibrationPointLayer && this.isCenterlineLayer(layerId);\n    const isIntersectionLayer = !isEventLayer && !isNetworkLayer && !isCalibrationPointLayer && !isCenterlineLayer\n      && this.isIntersectionLayer(layerId);\n    const isRedlineLayer = !isEventLayer && !isNetworkLayer && !isCalibrationPointLayer && !isCenterlineLayer && !isIntersectionLayer\n      && this.isRedlineLayer(layerId);\n    const isTable = !isEventLayer && !isNetworkLayer && !isCalibrationPointLayer && !isCenterlineLayer && !isIntersectionLayer\n      && !isRedlineLayer && this.isTable(layerId);\n    const isNonLRSLayer = !isEventLayer && !isNetworkLayer && !isCalibrationPointLayer && !isCenterlineLayer && !isIntersectionLayer\n      && !isRedlineLayer && !isTable && this.isNonLRSLayer(layerId);\n    const layer: MapLayer = this.getLayer(layerId);\n    const shapeField = layer ? getGeometryField(layer.fields) : null;\n    const idField = layer ? getIdField(layer.fields) : null;\n\n    return {\n      layer,\n      layerId,\n      isEventLayer,\n      isNetworkLayer,\n      isCalibrationPointLayer,\n      isCenterlineLayer,\n      isIntersectionLayer,\n      isRedlineLayer,\n      isTable,\n      isNonLRSLayer,\n      isLrsLayer,\n      shapeField,\n      idField,\n    };\n  }\n\n  isLrsLayer(layerId: number): boolean {\n    return Boolean(\n      this.getLrsLayer(layerId)\n    );\n  }\n\n  isNetworkLayer(layerId: number): boolean {\n    return Boolean(find(layerId, this.networkLayers));\n  }\n\n  isEventLayer(layerId: number): boolean {\n    return Boolean(find(layerId, this.eventLayers));\n  }\n\n  isIntersectionLayer(layerId: number): boolean {\n    return Boolean(find(layerId, this.intersectionLayers));\n  }\n\n  isRedlineLayer(layerId: number): boolean {\n    return Boolean(find(layerId, this.redlineLayers));\n  }\n\n  isCenterlineLayer(layerId: number): boolean {\n    return Boolean(find(layerId, this.centerlineLayers));\n  }\n\n  isCalibrationPointLayer(layerId: number): boolean {\n    return Boolean(find(layerId, this.calibrationPointLayers));\n  }\n\n  isNonLRSLayer(layerId: number): boolean {\n    return Boolean(find(layerId, this.nonLRSLayers));\n  }\n\n  isTable(layerId: number): boolean {\n    return Boolean(find(layerId, this.tables));\n  }\n\n  /**\n   * Merges map server general information into this LRS metadata instance.\n   */\n  mergeMapMetadata(mapMetadata: MapServerMetadata): LrsMetadata {\n    mergeMapMetadata(this, mapMetadata);\n    return this;\n  }\n\n  deepMergeMapMetadata(mapMetadata: MapServerMetadata): LrsMetadata {\n    deepMergeMapMetadata(this, mapMetadata);\n    return this;\n  }\n\n  /**\n   * Merges other LRS metadata into this LRS metdata instance.\n   */\n  mergeLrsMetadata(lrsMetadata: LrsMetadata): LrsMetadata {\n    mergeLrsMetadata(this, lrsMetadata);\n    return this;\n  }\n\n  getNetworkLayer(layerId: number): NetworkLayer {\n    return find(layerId, this.networkLayers) as NetworkLayer;\n  }\n\n  getEventLayer(layerId: number): EventLayer {\n    return find(layerId, this.eventLayers) as EventLayer;\n  }\n\n  getIntersectionLayer(layerId: number): IntersectionLayer {\n    return find(layerId, this.intersectionLayers) as IntersectionLayer;\n  }\n\n  getLrsLayers(): LrsLayer[] {\n    return (this.eventLayers as LrsLayer[])\n      .concat(this.networkLayers)\n      .concat(this.redlineLayers);\n  }\n\n  getFeatureClassLayers(): FeatureClassLayer[] {\n    return (this.eventLayers as FeatureClassLayer[])\n      .concat(this.networkLayers)\n      .concat(this.redlineLayers)\n      .concat(this.calibrationPointLayers)\n      .concat(this.centerlineLayers)\n      .concat(this.nonLRSLayers);\n  }\n\n  getAllLayers(): MapLayer[] {\n    return (this.getFeatureClassLayers() as MapLayer[])\n      .concat(this.tables)\n      .concat(this.layers);\n  }\n\n  getNetworkIdForLayer(layer: LrsLayer): number | null {\n    let networkId: number = null;\n    if (this.isEventLayer(layer.id)) {\n      const eventLayer = layer as EventLayer;\n      networkId = eventLayer.parentNetwork ? eventLayer.parentNetwork.id : null;\n    }\n\n    if (isNotValue(networkId)) {\n      this.networkLayers.forEach(network => {\n        if (network.eventLayers.find(l => l.id === layer.id)) {\n          networkId = network.id;\n        }\n      });\n    }\n\n    return networkId;\n  }\n\n  getEventLayersByNetwork(networkLayerId: number): EventLayer[] {\n    const networkLayer = this.getNetworkLayer(networkLayerId);\n    return this.eventLayers.filter(layer =>\n      layer.parentNetwork\n      && layer.parentNetwork.id === networkLayerId\n      || networkLayer.eventLayers\n      && networkLayer.eventLayers.find(l => l.id === layer.id)\n    );\n  }\n\n  rebuildLayers(): this {\n    this.eventLayers = this.eventLayers.map(eventLayer => new EventLayer(find(eventLayer.id, this.layers), eventLayer));\n    this.networkLayers = this.networkLayers.map(networkLayer => new NetworkLayer(find(networkLayer.id, this.layers), networkLayer));\n    this.redlineLayers = this.redlineLayers.map(redlineLayer => new RedlineLayer(find(redlineLayer.id, this.layers), redlineLayer));\n    this.centerlineLayers = this.centerlineLayers.map(centerlineLayer => new CenterlineLayer(centerlineLayer));\n    this.calibrationPointLayers = this.calibrationPointLayers.map(\n      calibrationPointLayer => new CalibrationPointLayer(calibrationPointLayer)\n    );\n    this.intersectionLayers = this.intersectionLayers.map(intersectionLayer => new IntersectionLayer(intersectionLayer));\n    this.nonLRSLayers = this.nonLRSLayers.map(nonLrsLayer => new NonLrsLayer(find(nonLrsLayer.id, this.layers), nonLrsLayer));\n\n    return this.assignCodedValueDomainsToFields();\n  }\n\n  assignCodedValueDomainsToFields(): this {\n    if (this.domains.length) {\n      this.getFeatureClassLayers()\n        .forEach(layer => layer.applyFieldDomains(this.domains));\n    }\n\n    return this;\n  }\n\n  assign(source: any): this {\n    Object.assign(this, source);\n    return this;\n  }\n\n  clone(): LrsMetadata {\n    const copy = clone(this);\n    return new LrsMetadata()\n      .assign(copy)\n      .rebuildLayers();\n  }\n\n  validate(): ValidationResult {\n    return LRS_METADATA_VALIDATIONS\n      .check(this);\n  }\n}\n","import { LayerField, LayerFieldDomain } from '../maps/fields/layer-field';\nimport { LrsMetadata } from './lrs-metadata';\nimport { MapServerMetadata } from '../maps/map-server-metadata';\nimport { findLayer } from './layer-search';\nimport { MapLayer } from '../maps/map-layer';\nimport { NetworkLayer } from './networks/network-layer';\nimport { DataSource } from '../data-source/data-source';\nimport { LayerDrawingInfo } from '../maps/drawing/layer-drawing-info';\nimport { FeatureClassLayer } from '../maps/feature-class-layer';\nimport { mergeDeep } from '../core/merge/merge-deep.function';\nimport { mergeDeepArray } from '../core/merge/merge-deep-array.function';\nimport { isNumber } from '../core/type-check/is-number.function';\nimport { LrsLayer } from './lrs-layer';\n\n\nfunction find(layerId: number, ...layerList: MapLayer[][]): MapLayer {\n  return findLayer(layerId, ...layerList);\n}\n\nfunction setLayerDefaults(layer: MapLayer): void {\n  layer.fields = layer.fields || [];\n}\n\nfunction setNetworkLayerDefaults(layer: NetworkLayer): void {\n  if (layer) {\n    layer.hierarchyFilter = layer.hierarchyFilter || [];\n  }\n}\n\nexport function mergeFieldDomains(target: LayerFieldDomain, source: LayerFieldDomain) {\n  mergeDeep(target, source, { ignoreArrays: true });\n\n  if (target && target.codedValues && source && source.codedValues) {\n    mergeDeepArray(target.codedValues, source.codedValues, { identifier: 'code' });\n  }\n}\n\nexport function mergeFields(target: LayerField[], source: LayerField[]) {\n  target = target || [];\n  source = source || [];\n\n  mergeDeepArray(target, source, {\n    identifier: 'name',\n    beforeMerge: (targetField: LayerField, sourceField: LayerField) => {\n      if (targetField.domain && sourceField.domain && sourceField.domain.codedValues) {\n        const doValuesNeedMerged = sourceField.domain.codedValues.filter(c => isNumber(c.order));\n\n        if (doValuesNeedMerged && doValuesNeedMerged.length) {\n          mergeFieldDomains(targetField.domain, sourceField.domain);\n          return false;\n        }\n      }\n    }\n  });\n}\n\nexport function mergeLayer(target: MapLayer, source: MapLayer) {\n  if (!target || !source) {\n    return;\n  }\n\n\n  const lrsTarget = target as LrsLayer;\n  const lrsSource = source as LrsLayer;\n  const targetCapturePositions = lrsTarget.capturePositions || [];\n  const sourceCapturePositions = lrsSource.capturePositions || [];\n  const targetDrawingInfo = lrsTarget.drawingInfo as LayerDrawingInfo;\n  const sourceDrawingInfo = lrsSource.drawingInfo as LayerDrawingInfo;\n  const hasDrawingInfo = Boolean(targetDrawingInfo || sourceDrawingInfo);\n  const drawingInfo = new LayerDrawingInfo(lrsTarget.drawingInfo as LayerDrawingInfo, lrsSource.drawingInfo as LayerDrawingInfo);\n\n  mergeDeep(target, source, { ignoreArrays: true });\n  mergeFields(target.fields, source.fields);\n\n  if (hasDrawingInfo) {\n    (target as FeatureClassLayer).drawingInfo = drawingInfo;\n  }\n\n  if (!targetCapturePositions.length && sourceCapturePositions.length) {\n    lrsTarget.capturePositions = sourceCapturePositions;\n  }\n}\n\nexport function mergeLayers(\n  target: MapLayer[],\n  source: MapLayer[],\n  sourceMetadata?: LrsMetadata,\n  sort = true,\n  onMergeComplete: (target: MapLayer, source: MapLayer) => any = null\n) {\n  target = target || [];\n  source = source || [];\n\n  target.forEach((targetLayer: MapLayer) => {\n    setLayerDefaults(targetLayer);\n    mergeLayer(targetLayer, source.find(sourceLayer => sourceLayer.id === targetLayer.id));\n  });\n\n  // There will be occurences where the source has layers that the target doesn't, which\n  // means that the merge will not happen above, because the target is the one being looped.\n  source\n    .filter(src => !target.find(x => src.id === x.id))\n    .forEach(missing => {\n      let newLayer: MapLayer = missing;\n      if (sourceMetadata) {\n        const merger: MapLayer = find(missing.id, sourceMetadata.tables, sourceMetadata.layers, sourceMetadata.nonLRSLayers);\n\n        // We want to preseve the original table or layer, so we don't overwrite it here.\n        newLayer = Object.assign({}, merger);\n        mergeLayer(newLayer, missing);\n      }\n\n      setLayerDefaults(newLayer);\n      target.push(newLayer);\n    });\n\n  if (sort) {\n    target.sort((layer1, layer2) => layer1.order - layer2.order);\n  }\n\n  if (onMergeComplete) {\n    target.forEach((targetLayer: MapLayer) => {\n      onMergeComplete(targetLayer, source.find(sourceLayer => sourceLayer.id === targetLayer.id));\n    });\n  }\n}\n\nexport function mergeNetworkLayers(target: NetworkLayer[], source: NetworkLayer[], sourceMetadata?: LrsMetadata) {\n  const isSorted = true;\n  mergeLayers(target, source, sourceMetadata, isSorted, onMergeNetworkLayerComplete);\n}\n\nexport function onMergeNetworkLayerComplete(targetLayer: NetworkLayer, sourceLayer: NetworkLayer): void {\n  setNetworkLayerDefaults(targetLayer);\n  setNetworkLayerDefaults(sourceLayer);\n\n  if (targetLayer && sourceLayer) {\n    mergeDeepArray(targetLayer.hierarchyFilter, sourceLayer.hierarchyFilter, { identifier: 'name' });\n  }\n}\n\nexport function mergeLrsMetadata(target: LrsMetadata, ...source: LrsMetadata[]): void {\n  source.forEach(srcMeta => {\n    const dataSource = srcMeta.dataSource || target.dataSource;\n    mergeDeep(target, srcMeta, { ignoreArrays: true });\n\n    if (dataSource) {\n      target.dataSource = dataSource;\n    }\n\n    mergeNetworkLayers(target.networkLayers, srcMeta.networkLayers, target);\n    mergeLayers(target.eventLayers, srcMeta.eventLayers, target);\n    mergeLayers(target.calibrationPointLayers, srcMeta.calibrationPointLayers, target);\n    mergeLayers(target.intersectionLayers, srcMeta.intersectionLayers, target);\n    mergeLayers(target.centerlineLayers, srcMeta.centerlineLayers, target);\n    mergeLayers(target.redlineLayers, srcMeta.redlineLayers, target);\n    mergeLayers(target.nonLRSLayers, srcMeta.nonLRSLayers, target);\n    mergeLayers(target.layers, srcMeta.layers);\n    mergeLayers(target.tables, srcMeta.tables);\n  });\n}\n\nexport function mergeMapMetadata(target: LrsMetadata, ...source: MapServerMetadata[]): void {\n  source.forEach(meta => {\n    Object.assign(target, meta);\n  });\n}\n\nexport function deepMergeMapMetadata(target: LrsMetadata, ...source: MapServerMetadata[]): void {\n  source.forEach(meta => {\n    meta.layers.forEach(nonLrsLayerInfo => {\n      const targetLayer = target.getLrsLayer(nonLrsLayerInfo.id);\n      if (targetLayer) {\n        const baseFields = [...nonLrsLayerInfo.fields];\n        mergeFields(baseFields, targetLayer.fields);\n        targetLayer.fields = baseFields;\n        if (nonLrsLayerInfo.geometryType) {\n          targetLayer.geometryType = nonLrsLayerInfo.geometryType;\n        }\n\n        targetLayer.drawingInfo = new LayerDrawingInfo(nonLrsLayerInfo.drawingInfo, targetLayer.drawingInfo);\n      }\n    });\n  });\n}\n\nexport function mergeLrsMetadataSources(\n  dataSource: DataSource,\n  dataSourceLrsMetadata: LrsMetadata,\n  mapServerLrsMetadata: LrsMetadata,\n  mapServerMetadata: MapServerMetadata\n): LrsMetadata {\n  const hasMapServerLrsMetadata = Boolean(mapServerLrsMetadata);\n  const fullLrsMeta = mapServerLrsMetadata\n    || dataSourceLrsMetadata\n    || new LrsMetadata(dataSource);\n\n  fullLrsMeta.mergeMapMetadata(mapServerMetadata);\n  fullLrsMeta.dataSource = fullLrsMeta.dataSource || dataSource;\n  fullLrsMeta.dataSourceId = fullLrsMeta.dataSourceId || dataSource.id;\n\n  if (hasMapServerLrsMetadata) {\n    // If the map service has LRS metadata then we need to merge the\n    // data source LRS metadata into the map service lrs metadata\n    // because we want the data source metadata to be priority.\n    fullLrsMeta.mergeLrsMetadata(dataSourceLrsMetadata);\n  } else {\n    // We only need to do a dep merge when there is no LRS metadata available in the map service because\n    // the map service LRS metadata provides all of the same information as the map server metadata (like fields).\n    fullLrsMeta.deepMergeMapMetadata(mapServerMetadata);\n  }\n\n  fullLrsMeta.rebuildLayers();\n\n  return fullLrsMeta;\n}\n","import { HttpClient } from '@angular/common/http';\n\nimport { Observable, forkJoin, of } from 'rxjs';\nimport { map, tap, mergeMap } from 'rxjs/operators';\n\nimport { LrsMetadata } from './lrs-metadata';\nimport { DataSource } from '../data-source/data-source';\nimport { DataSourceService } from '../data-source/data-source.service';\nimport { MapServerMetadata } from '../maps/map-server-metadata';\nimport { DataSourceLrsMetadataService } from './data-source-lrs-metadata.service';\nimport { Logger } from '../core/logging/logger.service';\nimport { NotifyService } from '../core/notify/notify.service';\nimport { EsriMapServerService } from '../esri/esri-map-server.service';\nimport { mergeLrsMetadataSources } from './lrs-metadata-merge';\nimport { isString } from '../core/type-check/is-string.function';\n\n\nexport class LrsMetadataRetriever {\n  private dataSourceId: string;\n  private dataSource: DataSource;\n  private dataSourceLrsMetadata: LrsMetadata;\n  private mapServerMetadata: MapServerMetadata;\n  private mapServerLrsMetadata: LrsMetadata;\n\n  constructor(\n    protected http: HttpClient,\n    protected mapServer: EsriMapServerService,\n    protected dataSourceService: DataSourceService,\n    protected dataSourceLrsMetadataService: DataSourceLrsMetadataService,\n    protected notify: NotifyService,\n    protected log: Logger) {\n  }\n\n  public withDataSource(dataSource: string | DataSource): LrsMetadataRetriever {\n    if (isString(dataSource)) {\n      this.dataSourceId = dataSource as string;\n    } else {\n      this.dataSource = dataSource as DataSource;\n      this.dataSourceId = this.dataSource.id;\n    }\n\n    return this;\n  }\n\n  public withLrsMetadata(lrsMeta: LrsMetadata): LrsMetadataRetriever {\n    this.dataSourceLrsMetadata = lrsMeta;\n    return this;\n  }\n\n  public retrieve(): Observable<LrsMetadata> {\n    if (!this.dataSourceId) {\n      throw new Error('A data source ID must be supplied');\n    }\n\n    return of(null)\n      .pipe(\n        mergeMap(this.getDataSource.bind(this)),\n        mergeMap(this.getDataSourceLrsMetadata.bind(this)),\n        mergeMap(this.getMapServiceLayers.bind(this)),\n        mergeMap(this.getMapServiceLrsMetadata.bind(this)),\n        mergeMap(this.mergeAll.bind(this))\n      );\n  }\n\n  private getDataSource(): Observable<DataSource> {\n    const observable = this.dataSource\n      ? of(this.dataSource)\n      : this.dataSourceService\n        .get(this.dataSourceId)\n        .pipe(\n          tap((dataSource: DataSource) => this.dataSource = dataSource)\n        );\n\n    return this.notify\n      .with(observable)\n      .error(`Failed to retrieve data source by ID: ${this.dataSourceId}: {error}`)\n      .source;\n  }\n\n  private getDataSourceLrsMetadata(): Observable<LrsMetadata> {\n    const observable = this.dataSourceLrsMetadata\n      ? of(this.dataSourceLrsMetadata)\n      : this.dataSourceLrsMetadataService\n        .get(this.dataSourceId)\n        .pipe(\n          tap((meta: LrsMetadata) => {\n            this.dataSourceLrsMetadata = new LrsMetadata(this.dataSource)\n              .assign(meta);\n\n            // NOTE: If we don't recieve any data source LRS metadata back then we assume that\n            // the map service has LRS capabiliities - otherwise we have no LRS server data available.\n            if (!meta) {\n              this.dataSourceLrsMetadata.serviceHasLrsMeta = true;\n            }\n          })\n        );\n\n    return this.notify\n      .with(observable)\n      .error(`Failed to retrieve data source LRS metadata by data source ID: ${this.dataSourceId}: {error}`)\n      .source;\n  }\n\n  private getMapServiceLayers(): Observable<MapServerMetadata> {\n    const observable = this.mapServerMetadata || !this.dataSource.serviceUrl\n      ? of(this.mapServerMetadata)\n      : this.mapServer\n        .getMapLayers(this.dataSource.serviceUrl)\n        .pipe(\n          tap((meta: MapServerMetadata) => this.mapServerMetadata = new MapServerMetadata().assign(meta))\n        );\n\n    return this.notify\n      .with(observable)\n      .error(`Failed to retrieve map service metadata from URL: ${this.dataSource.serviceUrl}: {error}`)\n      .source;\n  }\n\n  private getMapServiceLrsMetadata(): Observable<LrsMetadata> {\n    const observable = !this.dataSource.serviceUrl || !this.dataSourceLrsMetadata.serviceHasLrsMeta\n      ? of(this.mapServerLrsMetadata)\n      : forkJoin([\n        this.mapServer.getLrsServer(this.dataSource.serviceUrl),\n        this.mapServer.getLrsLayers(this.dataSource.serviceUrl)\n      ])\n        .pipe(\n          map((meta: LrsMetadata[]) => {\n            const [lrsServerMeta, lrsLayersMeta] = meta;\n            const lrsMetadata = Object.assign({}, lrsServerMeta, lrsLayersMeta);\n            const mapServerLrsMetadata = new LrsMetadata().assign(lrsMetadata);\n            return mapServerLrsMetadata;\n          }),\n          tap((meta: LrsMetadata) => this.mapServerLrsMetadata = new LrsMetadata().assign(meta))\n        );\n\n    return this.notify\n      .with(observable)\n      .error(`Failed to retrieve map service LRS metadata from URL: ${this.dataSource.serviceUrl}: {error}`)\n      .source;\n  }\n\n  private mergeAll(): Observable<LrsMetadata> {\n    const fullLrsMeta = mergeLrsMetadataSources(\n      this.dataSource,\n      this.dataSourceLrsMetadata,\n      this.mapServerLrsMetadata,\n      this.mapServerMetadata\n    );\n\n    return of(fullLrsMeta);\n  }\n}\n","// Angular.\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n// 3rd Party.\nimport { Observable, of } from 'rxjs';\nimport { tap } from 'rxjs/operators';\n\n// TSS.\nimport { DataSourceService } from '../data-source/data-source.service';\nimport { DataSourceLrsMetadataService } from './data-source-lrs-metadata.service';\nimport { Logger } from '../core/logging/logger.service';\nimport { NotifyService } from '../core/notify/notify.service';\nimport { LrsMetadata } from './lrs-metadata';\nimport { LrsMetadataRetriever } from './lrs-metadata-retriever';\nimport { DataSource } from '../data-source/data-source';\nimport { LrsConfig } from './lrs.config';\nimport { EsriMapServerService } from '../esri/esri-map-server.service';\nimport { getDataSourceId } from '../data-source/get-data-source-id.function';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LrsMetadataService {\n  lrsCache: { dataSourceId: string, metaData: LrsMetadata }[] = [];\n\n  constructor(\n    protected http: HttpClient,\n    protected mapServer: EsriMapServerService,\n    protected dataSourceService: DataSourceService,\n    protected dataSourceLrsMetadataService: DataSourceLrsMetadataService,\n    protected notify: NotifyService,\n    protected config: LrsConfig,\n    protected log: Logger) {\n  }\n\n  get(dataSource: string | DataSource, lrsMetadata?: LrsMetadata): Observable<LrsMetadata> {\n    const dataSourceId = getDataSourceId(dataSource);\n    const cachedMeta = this.lrsCache.find(cache => cache.dataSourceId === dataSourceId);\n\n    if (cachedMeta) {\n      return of(cachedMeta.metaData);\n    }\n\n    return new LrsMetadataRetriever(\n      this.http,\n      this.mapServer,\n      this.dataSourceService,\n      this.dataSourceLrsMetadataService,\n      this.notify,\n      this.log\n    )\n      .withDataSource(dataSource)\n      .withLrsMetadata(lrsMetadata)\n      .retrieve()\n      .pipe(\n        tap(meta => this.tryCacheLrsMetadata(meta))\n      );\n  }\n\n  private tryCacheLrsMetadata(meta: LrsMetadata) {\n    if (this.config.cacheInSessionLrsMetadata) {\n      this.lrsCache.push({\n        dataSourceId: meta.dataSourceId,\n        metaData: meta\n      });\n    }\n  }\n}\n","// 3rd Party.\nimport { Feature, Geometry, LineString, Point, MultiLineString } from 'geojson';\n\n// TSS.\nimport { LrsFeature } from '../lrs-feature';\nimport { LrsReferenceFeature } from '../lrs-reference-feature';\nimport { toFeature } from '../feature';\nimport { RedlineLayer } from './redline-layer';\nimport { isPolygon } from '../../geometry/geometry/is-polygon.function';\nimport { Cloneable } from '../../core/clone/cloneable';\nimport { clone } from '../../core/clone/clone.function';\n\n\nexport class RedlineFeature extends LrsFeature implements LrsReferenceFeature, Cloneable<RedlineFeature> {\n  layer: RedlineLayer;\n\n  constructor(feature: Feature, layer: RedlineLayer) {\n    super(feature, layer);\n\n    this.routeId = this.getValue(layer.routeIdFieldName);\n    this.fromMeasure = this.getValue(layer.fromMeasureFieldName);\n    this.toMeasure = this.getValue(layer.toMeasureFieldName);\n    this.isLinear = Boolean(layer.toMeasureFieldName);\n  }\n\n  static create(\n    layer: RedlineLayer,\n    properties: { [name: string]: any; } = {},\n    geometry: Point | LineString | MultiLineString = null\n  ): RedlineFeature {\n    const feature: Feature = toFeature(properties, geometry as Geometry);\n    return new RedlineFeature(feature, layer);\n  }\n\n  setFromMeasure(measure: number): this {\n    this.fromMeasure = measure;\n    return this.setValue(this.layer.fromMeasureFieldName, measure);\n  }\n\n  setToMeasure(measure: number): this {\n    if (!this.isLinear) {\n      throw new Error('Cannot set to measure for a point-based feature');\n    }\n\n    this.toMeasure = measure;\n    return this.setValue(this.layer.toMeasureFieldName, measure);\n  }\n\n  setMeasureExtent(fromMeasure: number, toMeasure: number): this {\n    return this\n      .setFromMeasure(fromMeasure)\n      .setToMeasure(toMeasure);\n  }\n\n  clone(): RedlineFeature {\n    const copyFeature = clone(this.toFeature());\n    return new RedlineFeature(copyFeature, this.layer);\n  }\n\n  protected isGeometryTypeValid(): boolean {\n    return isPolygon(this.geometry) || super.isGeometryTypeValid();\n  }\n}\n","import { SymbolLocationType } from './types';\n\n\nexport const SYMBOL_LOCATION_TYPES: SymbolLocationTypeDefinition[] = [\n  { alias: 'Left', locationType: 'left' },\n  { alias: 'Right', locationType: 'right' },\n  { alias: 'Top', locationType: 'top' },\n  { alias: 'Bottom', locationType: 'bottom' },\n];\n\nexport interface SymbolLocationTypeDefinition {\n  alias: string;\n  locationType: SymbolLocationType;\n}\n","import { MapLayerType, MapLayer } from './map-layer';\nimport { LayerRelationship } from './layer-relationship';\nimport { LayerField } from './fields/layer-field';\nimport { LayerIndex } from './layer-index';\n\n\nexport class MapTable implements MapLayer {\n  currentVersion: number;\n  id: number;\n  name: string;\n  type: MapLayerType;\n  description: string;\n  hasAttachments: boolean;\n  displayField: string;\n  typeIdField: string;\n  fields: LayerField[] = [];\n  indexes: LayerIndex[] = [];\n  relationships: LayerRelationship[] = [];\n  maxRecordCount: number;\n  supportsStatistics: boolean;\n  supportsAdvancedQueries: boolean;\n  isDataVersioned: boolean;\n}\n","import { Injectable } from '@angular/core';\nimport { AutoConfig } from '../core/auto-config.decorator';\n\n\n/**\n * Configuration class for storing mapping-related settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('MapsConfig')\nexport class MapsConfig {\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// TSS.\nimport { AutoConfig } from '../core/auto-config.decorator';\n\n\n/**\n * Configuration class for storing motion-related settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('MotionConfig')\nexport class MotionConfig {\n  allowMotionMocking = true;\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// 3rd Party.\nimport { Observable, Subject, fromEvent } from 'rxjs';\n\n// App.\nimport { Motion } from './motion';\nimport { MotionConfig } from './motion.config';\n\n\n/**\n * Geolocator service. Provides a single point of motion API.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class DeviceMotionService {\n  readonly motionChange: Observable<Motion>;\n  readonly motionChangeSource: Subject<Motion>;\n\n  constructor(private readonly config: MotionConfig) {\n    this.motionChangeSource = new Subject();\n    this.motionChange = this.motionChangeSource.asObservable();\n\n    fromEvent(window, 'ondevicemotion').subscribe((event: DeviceMotionEvent) => this.emitMotionChange(event));\n  }\n\n  mockMotion(motion: Motion): this {\n    if (!this.config.allowMotionMocking) {\n      throw new Error('Permission denied to mock device motion');\n    }\n\n    this.motionChangeSource.next(motion);\n    return this;\n  }\n\n  private emitMotionChange(event: DeviceMotionEvent): void {\n    this.motionChangeSource.next({\n      x: event.acceleration.x,\n      y: event.acceleration.y,\n      z: event.acceleration.z,\n      withGravityX: event.accelerationIncludingGravity.x,\n      withGravityY: event.accelerationIncludingGravity.y,\n      withGravityZ: event.accelerationIncludingGravity.z,\n      rotationRateAlpha: event.rotationRate.alpha,\n      rotationRateBeta: event.rotationRate.beta,\n      rotationRateGamma: event.rotationRate.gamma,\n    });\n  }\n}\n","// Angular.\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssMotionModule { }\n","import { Orientation } from '../orientation';\nimport { degreesToRadians } from '../../geometry/geometry/degrees-to-radians.function';\nimport { radiansToDegrees } from '../../geometry/geometry/radians-to-degrees.function';\n\n\n\n/**\n * Returns the heading based on an orientation (alpha, beta, and gamma).\n * Note: this code was sourced from: https://stackoverflow.com/questions/18112729/calculate-compass-heading-from-deviceorientation-event-api\n */\nexport function getHeadingFromOrientation(orientation: { alpha: number, beta: number, gamma: number }): number {\n  // Convert degrees to radians\n  const alphaRad = degreesToRadians(orientation.alpha);\n  const betaRad = degreesToRadians(orientation.beta);\n  const gammaRad = degreesToRadians(orientation.gamma);\n\n  // Calculate equation components\n  const cA = Math.cos(alphaRad);\n  const sA = Math.sin(alphaRad);\n  const sB = Math.sin(betaRad);\n  const cG = Math.cos(gammaRad);\n  const sG = Math.sin(gammaRad);\n\n  // Calculate A, B, C rotation components\n  const rA = - cA * sG - sA * sB * cG;\n  const rB = - sA * sG + cA * sB * cG;\n\n  // Calculate compass heading\n  let compassHeading = Math.atan(rA / rB);\n\n  // Convert from half unit circle to whole unit circle\n  compassHeading = rB < 0\n    ? compassHeading += Math.PI\n    : compassHeading += 2 * Math.PI;\n\n  // Convert radians to degrees\n  compassHeading = radiansToDegrees(compassHeading);\n\n  return compassHeading;\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// TSS.\nimport { AutoConfig } from '../core/auto-config.decorator';\n\n\n/**\n * Configuration class for storing orientation-related settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('OrientationConfig')\nexport class OrientationConfig {\n  allowOrientationMocking = true;\n  allowHeadingMocking = true;\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// 3rd Party.\nimport { Observable, Subject, fromEvent, merge } from 'rxjs';\n\n// App.\nimport { Orientation } from './orientation';\nimport { getHeadingFromOrientation } from './heading/get-heading-from-orientation.function';\nimport { OrientationConfig } from './orientation.config';\nimport { map } from 'rxjs/operators';\n\n\n/**\n * Geolocator service. Provides a single point of GPS interaction.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class DeviceOrientationService {\n  readonly orientationChange: Observable<Orientation>;\n  readonly headingChange: Observable<number>;\n  readonly orientationChangeSource: Subject<Orientation>;\n  readonly headingChangeSource: Subject<number>;\n\n  private internalDeviceNeedsCalibrated = false;\n\n  get deviceNeedsCalibrated(): boolean {\n    return this.internalDeviceNeedsCalibrated;\n  }\n\n  constructor(private readonly config: OrientationConfig) {\n    this.headingChangeSource = new Subject();\n    this.orientationChangeSource = new Subject();\n    this.orientationChange = this.orientationChangeSource.asObservable();\n    this.headingChange = merge(\n      this.headingChangeSource,\n      this.orientationChange.pipe(\n        map(orientation => orientation.heading)\n      )\n    );\n\n    fromEvent(window, 'deviceorientation').subscribe((event: DeviceOrientationEvent) => this.emitOrientationChange(event));\n    fromEvent(window, 'oncompassneedscalibration').subscribe(() => this.internalDeviceNeedsCalibrated = true);\n    fromEvent(window, 'compassneedscalibration').subscribe(() => this.internalDeviceNeedsCalibrated = true);\n  }\n\n  mockOrientation(orientation: Orientation): this {\n    if (!this.config.allowOrientationMocking) {\n      throw new Error('Permission denied to mock device orientation');\n    }\n\n    this.orientationChangeSource.next(orientation);\n    return this;\n  }\n\n  mockHeading(heading: number): this {\n    if (!this.config.allowHeadingMocking) {\n      throw new Error('Permission denied to mock heading');\n    }\n\n    this.headingChangeSource.next(heading);\n    return this;\n  }\n\n  private emitOrientationChange(event: DeviceOrientationEvent): void {\n    this.orientationChangeSource.next({\n      alpha: event.alpha,\n      beta: event.beta,\n      gamma: event.gamma,\n      heading: getHeadingFromOrientation(event)\n    });\n  }\n}\n","// Angular.\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n  ],\n  declarations: [\n  ],\n  exports: [\n  ],\n  providers: [\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class TssOrientationModule { }\n","import { Guid } from '../core/uuid/guid';\nimport { getElapsedSeconds } from '../core/date-time/get-elapsed-seconds.function';\nimport { calculateRemainingSeconds } from '../core/stats/calculate-remaining-seconds.function';\n\n\n/**\n * Unique token created for each queue worker\n */\nexport class QueueWorkerToken {\n  readonly id: string;\n  isWorking = false;\n  isCanceled = false;\n  totalComplete: number;\n  totalFailed: number;\n  startTime: Date;\n  endTime: Date;\n\n  get isComplete(): boolean {\n    return !this.isWorking;\n  }\n\n  get ellapsedSeconds(): number {\n    return getElapsedSeconds(new Date(), this.startTime);\n  }\n\n  get totalProcessed(): number {\n    return this.totalComplete + this.totalFailed;\n  }\n\n  get recordsProcessedPerSecond(): number {\n    return this.totalComplete / this.ellapsedSeconds;\n  }\n\n  get recordsProcessedPerMinute(): number {\n    return this.recordsProcessedPerSecond * 60;\n  }\n\n  constructor() {\n    this.id = Guid.newGuid().value;\n  }\n\n  start(): QueueWorkerToken {\n    this.reset();\n    this.startTime = new Date();\n    this.isWorking = true;\n\n    return this;\n  }\n\n  reset(): QueueWorkerToken {\n    this.isWorking = false;\n    this.isCanceled = false;\n    this.totalComplete = 0;\n    this.totalFailed = 0;\n    this.startTime = null;\n    this.endTime = null;\n\n    return this;\n  }\n\n  calculateRemainingSeconds(remainingCount: number): number {\n    return this.isComplete\n      ? 0\n      : calculateRemainingSeconds(this.totalProcessed, this.ellapsedSeconds, remainingCount);\n  }\n\n  complete(): QueueWorkerToken {\n    this.endTime = new Date();\n    this.isWorking = false;\n\n    return this;\n  }\n\n  cancel(): QueueWorkerToken {\n    this.isCanceled = true;\n    this.isWorking = false;\n\n    return this;\n  }\n}\n","/**\n * Represents a status of a queued work item event.\n * * UnitOfWorkStarted: A given work item has begun.\n * * UnitOfWorkComplete: A given work item has completed.\n * * QueueWorkerStarted: A new worker has started processing the queue.\n * * QueueWorkerComplete: A given worker has completed processing of the queue (no more items found).\n * * QueueStarted: The process of starting workers to run through the queue has occurred.\n * * QueueStarted: All workers have completed working through the queue (all work is done).\n */\nexport enum WorkQueueStatusEventType {\n  UnitOfWorkStarted,\n  UnitOfWorkComplete,\n  UnitOfWorkStatusUpdate,\n  QueueWorkerStarted,\n  QueueWorkerComplete,\n  QueueStarted,\n  QueueComplete,\n}\n","import { QueueWorkerToken } from './queue-worker-token';\nimport { WorkQueueStatus } from './work-queue-status';\nimport { average } from '../core/stats/average.function';\n\n\nexport class WorkQueueStatusTracker implements WorkQueueStatus {\n  totalQueueSize = 0;\n\n  protected readonly workers: QueueWorkerToken[] = [];\n\n  get workerCount(): number {\n    return this.workers.length;\n  }\n\n  get percentComplete(): number {\n    return this.totalQueueSize >= 0\n      ? Math.round(this.totalProcessed / this.totalQueueSize * 100) || 0\n      : 0;\n  }\n\n  get totalComplete(): number {\n    return this.workers.reduce((accumulator, current) => accumulator + current.totalComplete, 0) || 0;\n  }\n\n  get totalFailed(): number {\n    return this.workers.reduce((accumulator, current) => accumulator + current.totalFailed, 0) || 0;\n  }\n\n  get totalProcessed(): number {\n    return this.totalComplete + this.totalFailed;\n  }\n\n  get isWorking(): boolean {\n    return Boolean(this.runningWorkerCount);\n  }\n\n  get isComplete(): boolean {\n    return this.startTime && !this.isWorking;\n  }\n\n  get isCanceled(): boolean {\n    const canceledWorkersCount = this.workers.filter(worker => worker.isCanceled).length;\n    return Boolean(canceledWorkersCount && canceledWorkersCount === this.workers.length);\n  }\n\n  get runningWorkerCount(): number {\n    return this.workers.filter(worker => worker.isWorking).length;\n  }\n\n  get startTime(): Date {\n    const startTimes: number[] = this.workers\n      .filter(worker => worker.startTime)\n      .map(worker => worker.startTime\n        ? worker.startTime.getTime()\n        : null\n      );\n\n    return new Date(Math.min(...startTimes));\n  }\n\n  get endTime(): Date {\n    const startTimes: number[] = this.workers\n      .filter(worker => worker.startTime)\n      .map(worker => worker.startTime\n        ? worker.startTime.getTime()\n        : null\n      );\n\n    return new Date(Math.max(...startTimes));\n  }\n\n  get remainingQueueSize(): number {\n    return this.totalQueueSize - this.totalProcessed;\n  }\n\n  get estimatedSecondsLeft(): number {\n    const remainingCount = this.remainingQueueSize;\n    return remainingCount\n      ? average(\n        this.workers\n          .map(worker => worker.calculateRemainingSeconds(remainingCount))\n      )\n      : 0;\n  }\n\n  get averageRecordsProcessedPerMinute(): number {\n    return average(\n      this.workers\n        .map(worker => worker.recordsProcessedPerMinute)\n    );\n  }\n\n  setQueueSize(totalQueueSize: number): WorkQueueStatusTracker {\n    this.totalQueueSize = totalQueueSize;\n    return this;\n  }\n\n  complete(): WorkQueueStatusTracker {\n    this.workers.splice(0, this.workers.length);\n    this.totalQueueSize = 0;\n    return this;\n  }\n\n  addWorker(...workers: QueueWorkerToken[]): WorkQueueStatusTracker {\n    workers.forEach(worker => {\n      this.workers.push(worker);\n    });\n\n    return this;\n  }\n\n  getStatus(): WorkQueueStatus {\n    return {\n      isWorking: this.isWorking,\n      isCanceled: this.isCanceled,\n      isComplete: this.isComplete,\n      totalProcessed: this.totalProcessed,\n      startTime: this.startTime,\n      endTime: this.endTime,\n      percentComplete: this.percentComplete,\n      totalQueueSize: this.totalQueueSize,\n      remainingQueueSize: this.remainingQueueSize,\n      totalComplete: this.totalComplete,\n      totalFailed: this.totalFailed,\n      estimatedSecondsLeft: this.estimatedSecondsLeft,\n      workerCount: this.workers.length,\n    };\n  }\n}\n","// 3rd Party.\nimport { Observable, Subject, of, iif } from 'rxjs';\nimport { takeWhile, tap, filter, mergeMap, map } from 'rxjs/operators';\n\n// TSS.\nimport { WorkerQueueOptions } from './worker-queue-options';\nimport { QueueWorkerToken } from './queue-worker-token';\nimport { WorkQueueStatusEvent } from './work-queue-status-event';\nimport { WorkQueueStatusEventType } from './work-queue-status-event-type';\nimport { WorkQueueStatusTracker } from './work-queue-status-tracker';\nimport { Logger } from '../core/logging/logger.service';\nimport { WorkQueueStatus } from './work-queue-status';\nimport { QueuePayload } from './queue-payload';\nimport { isValue } from '../core/type-check/is-value.function';\nimport { isNotValue } from '../core/type-check/is-not-value.function';\n\n\nexport const DEFAULT_WORK_QUEUE_OPTIONS = {\n  autoStartWorkers: true,\n  workerCount: 1,\n};\n\n\n/**\n * Provides the core queueing workflow for basic unit of work queues.\n * High Priority Todos:\n * * Implement worker cancelation into the worker token - RG.\n *\n * Low Priority Todos:\n * * Add queue prioritization - a queue priority flag to pull those items first from the queue - RG.\n * * Change overriding of methods to use metho attributes instead. Example: @OnWorkComplete.\n */\nexport abstract class WorkQueueManager<TInput, TOutput> {\n  private queueChangeObserver: Subject<WorkQueueStatusEvent<TInput, TOutput>>;\n\n  protected readonly workerTokens: QueueWorkerToken[] = [];\n  protected readonly tracker: WorkQueueStatusTracker = new WorkQueueStatusTracker();\n\n  readonly queueChange: Observable<WorkQueueStatusEvent<TInput, TOutput>>;\n  readonly queueStarted: Observable<WorkQueueStatusEvent<TInput, TOutput>>;\n  readonly queueComplete: Observable<WorkQueueStatusEvent<TInput, TOutput>>;\n  readonly options: WorkerQueueOptions = Object.assign({}, DEFAULT_WORK_QUEUE_OPTIONS);\n\n  get isWorking(): boolean {\n    return this.tracker.isWorking;\n  }\n\n  get status(): WorkQueueStatus {\n    return this.tracker.getStatus();\n  }\n\n  constructor(protected log: Logger, options?: WorkerQueueOptions) {\n    this.setOptions(options);\n    this.queueChangeObserver = new Subject();\n    this.queueChange = this.queueChangeObserver.pipe();\n\n    this.queueStarted = this.queueChangeObserver.pipe(\n      filter(change => change.event === WorkQueueStatusEventType.QueueStarted)\n    );\n\n    this.queueComplete = this.queueChangeObserver.pipe(\n      filter(change => change.event === WorkQueueStatusEventType.QueueComplete)\n    );\n\n    if (this.options.autoStartWorkers) {\n      setTimeout(() => this.startWork());\n    }\n  }\n\n  /**\n   * Overrides default options.\n   * @param options Options to override the defaults.\n   */\n  setOptions(options: WorkerQueueOptions): WorkQueueManager<TInput, TOutput> {\n    Object.assign(this.options, options);\n    return this;\n  }\n\n  /**\n   * Kicks off the queue workflow with the specified number of workers. If\n   * the maximum number of workers are currently running, no additional workers\n   * will be created (only the delta of allowed and running will be started).\n   */\n  startWork(): void {\n    // We dont' want to change the queue size if the queue is already working\n    // because it will mess up the statistics (percent copmlete, etc).\n    const starterSource = iif(() => !this.isWorking,\n      this.getRemainingQueueCount()\n        .pipe(\n          tap((queueCount: number) => this.tracker.setQueueSize(queueCount))\n        )\n    );\n\n    this.onReady()\n      .pipe(\n        mergeMap(() => starterSource)\n      )\n      .subscribe(() => {\n        const workersToStart = this.options.workerCount - this.workerTokens.length;\n\n        if (workersToStart > 0) {\n          this.emitQueueChange(null, WorkQueueStatusEventType.QueueStarted);\n        }\n\n        for (let i = 0; i < workersToStart; i++) {\n          const token = new QueueWorkerToken().start();\n          this.tracker.addWorker(token);\n          this.workerTokens.push(token);\n          this.emitQueueChange(token, WorkQueueStatusEventType.QueueWorkerStarted);\n          this.getNextAndDoWork(token);\n        }\n      });\n  }\n\n  /**\n   * Stops all workers from processing the queue.\n   */\n  stopWork(): void {\n    this.workerTokens.forEach(token => token.cancel());\n  }\n\n  /**\n   * Implementation method to do the actual unit of work.\n   * @param item The input paramater needed to process the unit of work and return an output result.\n   */\n  protected abstract doWork(item: TInput): Observable<TOutput>;\n\n  /**\n   * Implementation method to retrieve the next value in the queue. Note, there are no further checks\n   * to verify duplicate items are not processed - it is the responsibility of the implementer of this\n   * base class to never return the same item from this method. Typically the item in the queue is either\n   * dequeued or marked as \"processing\" to prevent this potential issue.\n   */\n  protected abstract getNext(): Observable<TInput>;\n\n  /**\n   * Method that determines that the workers are ready to be started. Note, in this implementation it\n   * makes use of an empty promise. The main reason for this is to provide a hook for other implementers\n   * to setup/initialize the queue before starting the workers. Additionaly, this practices provides a\n   * way to run the workers asynchronously.\n   */\n  protected onReady(): Observable<any> {\n    return of(null);\n  }\n\n  protected onBeforeWorkStarted(input: TInput): Observable<TInput> {\n    return of(input);\n  }\n\n  protected onWorkComplete(data: QueuePayload<TInput, TOutput>): Observable<QueuePayload<TInput, TOutput>> {\n    return of(data);\n  }\n\n  protected onWorkFailed(data: QueuePayload<TInput, TOutput>, error: any): Observable<any> {\n    return of(data, error);\n  }\n\n  protected getRemainingQueueCount(): Observable<number> {\n    return of(-1);\n  }\n\n  protected emitQueueChange(token: QueueWorkerToken, event: WorkQueueStatusEventType, input?: TInput, output?: TOutput): void {\n    this.queueChangeObserver.next({\n      event,\n      input,\n      output,\n      status: this.tracker.getStatus(),\n      tokenId: token ? token.id : null,\n    });\n  }\n\n  private emitWorkStarted(token: QueueWorkerToken, input?: TInput, output?: TOutput): void {\n    this.emitQueueChange(token, WorkQueueStatusEventType.UnitOfWorkStarted, input, output);\n  }\n\n  private emitWorkComplete(token: QueueWorkerToken, input?: TInput, output?: TOutput): void {\n    this.emitQueueChange(token, WorkQueueStatusEventType.UnitOfWorkComplete, input, output);\n  }\n\n  private onWorkerCompleted(token: QueueWorkerToken) {\n    if (token.isComplete) {\n      return;\n    }\n\n    const index = this.workerTokens.indexOf(token);\n    token.complete();\n\n    if (index !== -1) {\n      this.workerTokens.splice(index, 1);\n    }\n\n    this.emitQueueChange(token, WorkQueueStatusEventType.QueueWorkerComplete);\n    if (this.workerTokens.length === 0) {\n      this.emitQueueChange(token, WorkQueueStatusEventType.QueueComplete);\n      this.tracker.complete();\n    }\n  }\n\n  private checkIfWorkerComplete(token: QueueWorkerToken, next: TInput) {\n    if (isNotValue(next)) {\n      this.onWorkerCompleted(token);\n    }\n  }\n\n  private getNextAndDoWork(token: QueueWorkerToken): void {\n    if (token.isCanceled) {\n      this.log.debug(`Canceling worker due to canceled toke: ${token.id}`);\n      this.onWorkerCompleted(token);\n    }\n\n    this.log.trace('Retrieving next queue item to start processing');\n    const processingData: QueuePayload<TInput, TOutput> = { input: null, output: null };\n    this.getNext()\n      .pipe(\n        tap((input: TInput) => processingData.input = input),\n        tap((input: TInput) => this.checkIfWorkerComplete(token, input)),\n        takeWhile((input: TInput) => isValue(input) && !token.isCanceled),\n        tap((input: TInput) => this.emitWorkStarted(token, input)),\n        mergeMap((input: TInput) => this.onBeforeWorkStarted(input)),\n        mergeMap((input: TInput) => this.doWork(input)),\n        tap((output: TOutput) => processingData.output = output),\n        map(() => processingData),\n        mergeMap((data: QueuePayload<TInput, TOutput>) => this.onWorkComplete(data)),\n    )\n      .subscribe((data: QueuePayload<TInput, TOutput>) => {\n        this.log.trace('Completed work for item');\n        token.totalComplete++;\n        this.emitWorkComplete(token, data.input, data.output);\n        this.getNextAndDoWork(token);\n      }, (error) => {\n        this.log.error(`Failed to process item. {error}`, error);\n        token.totalFailed++;\n        this.onWorkFailed(processingData, error)\n          .toPromise()\n          .then(() => this.getNextAndDoWork(token));\n      });\n  }\n}\n","// 3rd Party.\nimport { Observable, forkJoin } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n// TSS.\nimport { WorkQueueManager, DEFAULT_WORK_QUEUE_OPTIONS } from './work-queue-manager';\nimport { Queuable } from './queuable';\nimport { QueuableWorkerQueueOptions } from './queuable-worker-queue-options';\nimport { QueuePayload } from './queue-payload';\n\n\nexport abstract class QueuableWorkQueueManager<TInput, TOutput> extends WorkQueueManager<TInput, TOutput> implements Queuable<TInput> {\n  readonly options: QueuableWorkerQueueOptions = Object.assign({\n    autoDequeu: true\n  }, DEFAULT_WORK_QUEUE_OPTIONS);\n\n  abstract enqueue(item: TInput): Observable<TInput>;\n  abstract dequeue(item: TInput): Observable<TInput>;\n\n  /**\n   * Enqueues multiple items into an array.\n   * @param items Items to enqueue.\n   *\n   * TODO: We want to change this to use \"mergeAll\" once we\n   *  upgrade to rxjs 6, as that is the desired behavior here.\n   *\n   * // The following works in rxjs 6, but not in 5:\n   * of(...sources)\n   * .pipe(\n   *   mergeAll(),\n   *   // NOTE: in rxjs 5\n   *   tap((x: TInput) => x)\n   * )\n   */\n  enqueuMany(...items: TInput[]): Observable<TInput> {\n    const sources: Observable<TInput>[] = items\n      .map(i => this.enqueue(i));\n\n    return forkJoin(sources)\n      .pipe(\n        map((results: TInput[]) => results.pop())\n      );\n  }\n\n  /**\n   * Deque many items from the queue.\n   * @param items Items do deque.\n   */\n  dequeuMany(...items: TInput[]): Observable<TInput> {\n    const sources: Observable<TInput>[] = items\n      .map(i => this.dequeue(i));\n\n    return forkJoin(sources)\n      .pipe(\n        map((results: TInput[]) => results.pop())\n      );\n  }\n\n  protected onWorkComplete(payload: QueuePayload<TInput, TOutput>): Observable<QueuePayload<TInput, TOutput>> {\n    return forkJoin(\n      super.onWorkComplete(payload),\n      this.dequeue(payload.input)\n    )\n      .pipe(\n        map((result) => result[0])\n      );\n  }\n}\n","/**\n * Represents all potential states of a queued item.\n * * Queued: The item is in the queue, waiting for the next available worker to retrieve it.\n * * InProgress: The item has been picked up by a worker and currently being processed.\n * * Complete: The item has been sucesfully completed.\n * * Canceled: The item was canceled before completion.\n * * Failed: The item failed to process.\n */\nexport enum QueueItemStatus {\n  Queued,\n  InProgress,\n  Complete,\n  Canceled,\n  Failed,\n}\n","// Angular.\nimport { Injectable } from '@angular/core';\n\n// TSS.\nimport { AutoConfig } from '../core/auto-config.decorator';\n\n\n/**\n * Configuration class for storing global queue-related settings.\n */\n@Injectable({\n  providedIn: 'root'\n})\n@AutoConfig('QueueConfig')\nexport class QueueConfig {\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\nimport { BaseResourceService } from '../../core/resource/base-resource.service';\nimport { Privilege } from './privilege';\nimport { SecurityConfig } from '../security-config';\nimport { join } from '../../core/url/join.function';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PrivilegeService extends BaseResourceService<Privilege> {\n  constructor(protected http: HttpClient, config: SecurityConfig) {\n    super(http, {\n      url: join(config.serviceUrl, config.privilegesEndpoint)\n    });\n  }\n}\n","export const MISSING_ROLE_PARAM_EXCEPTION_MSG = 'Missing role ID parameter';\n\n\nexport interface Role {\n  id: string;\n  name: string;\n  description: string;\n  isExternal: boolean;\n}\n","// Angular.\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n// 3rd party.\nimport { Observable } from 'rxjs';\n\n// TSS.\nimport { SecurityConfig } from '../security-config';\nimport { Privilege } from '../privileges/privilege';\nimport { MISSING_ROLE_PARAM_EXCEPTION_MSG } from './role';\nimport { BaseResourceService } from '../../core/resource/base-resource.service';\nimport { join } from '../../core/url/join.function';\nimport { UNSUPPORTED_GET_EXCEPTION_MSG, UNSUPPORTED_CREATE_EXCEPTION_MSG } from '../../core/resource/resource.constants';\n\n\nexport const MISSING_PRIVILEGE_PARAM_EXCEPTION_MSG = 'Missing privilege identifier parameter';\n\n\n/**\n * Service to provide all CRUD operations for privilege/role assignment.\n *\n * @example\n * ## Gets privileges for a given role:\n * service.privilegesByRole('879e27e1-b139-4348-86ca-ec4d5651475f')\n *\n * // Which is just a shortcut for:\n * service.query({ roleId: 'admin' });\n *\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class RolePrivilegeService extends BaseResourceService<Privilege> {\n  constructor(protected http: HttpClient, config: SecurityConfig) {\n    super(http, {\n      url: join(config.serviceUrl, config.rolesPrivilegesEndpoint),\n      idFieldName: 'roleId'\n    });\n  }\n\n  /**\n   * Retrieves a list of privileges for a given role ID.\n   */\n  query(routeTokens?: any, params?: HttpParams): Observable<Privilege[]> {\n    if (!routeTokens || !routeTokens.roleId) {\n      throw new Error(MISSING_ROLE_PARAM_EXCEPTION_MSG);\n    }\n\n    return super.query(routeTokens, params);\n  }\n\n  /**\n   * This method is not supported for this resource. Please use \"privilegesByRole\".\n   */\n  get(id: string | number, routeTokens?: any, params?: HttpParams): Observable<Privilege> {\n    throw new Error(UNSUPPORTED_GET_EXCEPTION_MSG);\n  }\n\n  /**\n   * This method is not supported for this resource. Please use \"addPrivilegeToRole\".\n   */\n  create(entity: Privilege, routeTokens?: any, params?: HttpParams): Observable<Privilege> {\n    throw new Error(UNSUPPORTED_CREATE_EXCEPTION_MSG);\n  }\n\n  /**\n   * Updates a privilege assignment (adds a privilege to a role).\n   */\n  update(entity: Privilege, routeTokens?: any, params?: HttpParams): Observable<any> {\n    if (!routeTokens || !routeTokens.roleId) {\n      throw new Error(MISSING_ROLE_PARAM_EXCEPTION_MSG);\n    } else if (!routeTokens.privilegeId) {\n      throw new Error(MISSING_PRIVILEGE_PARAM_EXCEPTION_MSG);\n    }\n\n    return super.update(null, routeTokens, params);\n  }\n\n  /**\n   * Removes a privilege from a role assignment.\n   */\n  delete(id: string | number, routeTokens?: any, params?: HttpParams): Observable<Privilege> {\n    if (!routeTokens || !routeTokens.roleId) {\n      throw new Error(MISSING_ROLE_PARAM_EXCEPTION_MSG);\n    } else if (!routeTokens.privilegeId) {\n      throw new Error(MISSING_PRIVILEGE_PARAM_EXCEPTION_MSG);\n    }\n\n    return super.delete(id, routeTokens, params);\n  }\n\n  /**\n   * Retrieves all privileges assigned to the given role ID.\n   */\n  privilegesByRole(roleId: string, params?: HttpParams): Observable<Privilege[]> {\n    return this.query({ roleId }, params);\n  }\n\n  /**\n   * Adds a privilege to role.\n   */\n  addPrivilegeToRole(roleId: string, privilegeId: string): Observable<Privilege> {\n    return this.update(null, { roleId, privilegeId });\n  }\n\n\n  /**\n   * Removes a privilege from the given role.\n   */\n  removePrivilegeFromRole(roleId: string, privilegeId: string): Observable<Privilege> {\n    return this.delete(roleId, { roleId, privilegeId });\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\nimport { BaseResourceService } from '../../core/resource/base-resource.service';\nimport { Role } from './role';\nimport { SecurityConfig } from '../security-config';\nimport { join } from '../../core/url/join.function';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RoleService extends BaseResourceService<Role> {\n  constructor(protected http: HttpClient, config: SecurityConfig) {\n    super(http, {\n      url: join(config.serviceUrl, config.rolesEndpoint)\n    });\n  }\n}\n","export const MISSING_USER_PARAM_EXCEPTION_MSG = 'Missing user ID parameter';\n","import { HttpClient, HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\nimport { Observable } from 'rxjs';\n\nimport { Role, MISSING_ROLE_PARAM_EXCEPTION_MSG } from './role';\nimport { SecurityConfig } from '../security-config';\nimport { BaseResourceService } from '../../core/resource/base-resource.service';\nimport { join } from '../../core/url/join.function';\nimport { UNSUPPORTED_GET_EXCEPTION_MSG, UNSUPPORTED_CREATE_EXCEPTION_MSG } from '../../core/resource/resource.constants';\nimport { MISSING_USER_PARAM_EXCEPTION_MSG } from '../security.constants';\n\n\n/**\n * Service to provide all CRUD operations for user/role assignment.\n *\n * @example\n * ## Gets roles for a given user:\n * service.rolesByUser('879e27e1-b139-4348-86ca-ec4d5651475f')\n *\n * // Which is just a shortcut for:\n * service.query({ userId: '879e27e1-b139-4348-86ca-ec4d5651475f' });\n *\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserRoleService extends BaseResourceService<Role> {\n  constructor(protected http: HttpClient, config: SecurityConfig) {\n    super(http, {\n      url: join(config.serviceUrl, config.userRolesEndpoint),\n      idFieldName: 'userId'\n    });\n  }\n\n  /**\n   * Retrieves a list of roles for a given user ID.\n   */\n  query(routeTokens?: any, params?: HttpParams): Observable<Role[]> {\n    if (!routeTokens || !routeTokens.userId) {\n      throw new Error(MISSING_USER_PARAM_EXCEPTION_MSG);\n    }\n\n    return super.query(routeTokens, params);\n  }\n\n  /**\n   * This method is not supported for this resource. Please use \"rolesByUser\".\n   */\n  get(id: string | number, routeTokens?: any, params?: HttpParams): Observable<Role> {\n    throw new Error(UNSUPPORTED_GET_EXCEPTION_MSG);\n  }\n\n  /**\n   * This method is not supported for this resource. Please use \"addUserToRole\".\n   */\n  create(entity: Role, routeTokens?: any, params?: HttpParams): Observable<Role> {\n    throw new Error(UNSUPPORTED_CREATE_EXCEPTION_MSG);\n  }\n\n  /**\n   * Updates a users role assignment (adds a role to a user).\n   */\n  update(entity: Role, routeTokens?: any, params?: HttpParams): Observable<any> {\n    if (!routeTokens || !routeTokens.userId) {\n      throw new Error(MISSING_USER_PARAM_EXCEPTION_MSG);\n    } else if (!routeTokens.roleName) {\n      throw new Error(MISSING_ROLE_PARAM_EXCEPTION_MSG);\n    }\n\n    return super.update(null, routeTokens, params);\n  }\n\n  /**\n   * Removes a user from a role assignment.\n   */\n  delete(id: string | number, routeTokens?: any, params?: HttpParams): Observable<Role> {\n    if (!routeTokens || !routeTokens.userId) {\n      throw new Error(MISSING_USER_PARAM_EXCEPTION_MSG);\n    } else if (!routeTokens.roleName) {\n      throw new Error(MISSING_ROLE_PARAM_EXCEPTION_MSG);\n    }\n\n    return super.delete(id, routeTokens, params);\n  }\n\n  /**\n   * Retrieves all roles assigned to the given user ID.\n   */\n  rolesByUser(userId: string, params?: HttpParams): Observable<Role[]> {\n    return this.query({ userId }, params);\n  }\n\n  /**\n   * Adds a user to role.\n   */\n  addUserToRole(userId: string, role: Role, params?: HttpParams): Observable<Role> {\n    // NOTE: We pass an arbitrary \"_\" role name because the route requires a role name,\n    // however the role's name is going to be pulled from the role entity on the server.\n    // The reason we don't pass \"role.name\" here is because of issues with IIS not\n    // handling decoded backslashes (ex: TSS\\TSS Users).\n    return super.update(role, { userId, roleName: '_' }, params);\n  }\n\n  /**\n   * Adds a user to role.\n   */\n  addUserToRoleByName(userId: string, roleName: string, params?: HttpParams): Observable<Role> {\n    roleName = decodeURIComponent(roleName);\n    return this.update(null, { userId, roleName }, params);\n  }\n\n  /**\n   * Removes a user from the given role.\n   */\n  removeUserFromRole(userId: string, role: Role, params?: HttpParams): Observable<Role> {\n    return this.removeUserFromRoleByName(userId, role.name, params);\n  }\n\n  /**\n   * Removes a user from the given role.\n   */\n  removeUserFromRoleByName(userId: string, roleName: string, params?: HttpParams): Observable<Role> {\n    roleName = decodeURIComponent(roleName);\n    return this.delete(userId, { userId, roleName }, params);\n  }\n}\n","// Angular.\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n// 3rd party.\nimport { Observable } from 'rxjs';\n\n// TSS.\nimport { BaseResourceService } from '../../core/resource/base-resource.service';\nimport { User } from './user';\nimport { SecurityConfig } from '../security-config';\nimport { join } from '../../core/url/join.function';\n\n\n/**\n * @example\n * ## Get Users that belong to a given role (by ID).\n * service.usersByRoleId('1428a342-8a95-4b6c-b3e9-da135e3ced04')\n *\n * // ...which is just a shortcut for:\n * service.query({}, new HttpParams().set('filterByRoleId', roleName));\n *\n * ## Get Users that belong to a given role (by name).\n * service.usersByRoleName('Admin')\n *\n * // ...which is just a shortcut for:\n * service.query({}, new HttpParams().set('filterByRoleName', roleName));\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService extends BaseResourceService<User> {\n  constructor(protected http: HttpClient, config: SecurityConfig) {\n    super(http, {\n      url: join(config.serviceUrl, config.usersEndpoint)\n    });\n  }\n\n  usersByRoleId(roleId: string, params?: HttpParams): Observable<User[]> {\n    params = (params || new HttpParams()).set('filterByRoleId', roleId);\n    return this.query({}, params);\n  }\n\n  usersByRoleName(roleName: string, params?: HttpParams): Observable<User[]> {\n    params = (params || new HttpParams()).set('filterByRoleName', roleName);\n    return this.query({}, params);\n  }\n\n  search(searchText: string, params?: HttpParams) {\n    params = (params || new HttpParams()).set('search', searchText);\n    return this.query({}, params);\n  }\n}\n"],"names":["Injectable","tslib_1.__extends","HttpClient","Subject","publishReplay","Router","Injector","Pipe","DomSanitizer","NgModule","CUSTOM_ELEMENTS_SCHEMA","CommonModule","HttpClientModule","Directive","TemplateRef","ViewContainerRef","Input","FormsModule","HTTP_INTERCEPTORS","HostListener","RouterModule","APP_INITIALIZER","HttpResponse","of","throwError","tap","catchError","DatePipe","DecimalPipe","HttpParams","isNumber","distance","lineString","HttpHeaders","isDate","map","finalize","ReplaySubject","forkJoin","DEFAULT_OPTIONS","find","mergeMap","fromEvent","merge","filter","iif","takeWhile"],"mappings":"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"}
