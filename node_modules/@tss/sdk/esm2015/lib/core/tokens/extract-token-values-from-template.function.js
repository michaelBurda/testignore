/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { standardizeTokens } from './standardize-tokens.function';
import { replaceTokens } from './replace-tokens.function';
import { WILDCARD_EXPRESSION_VALUE, TOKEN_EXPRESSION } from './tokens.constants';
import { stripTokenBraces } from './strip-token-braces.function';
/**
 * @param {?} template
 * @param {?} resolvedPath
 * @return {?}
 */
export function extractTokenValuesFromTemplate(template, resolvedPath) {
    /** @type {?} */
    const tokens = {};
    template = standardizeTokens(template);
    /** @type {?} */
    const wildcardTemplate = replaceTokens(template, WILDCARD_EXPRESSION_VALUE);
    /** @type {?} */
    const parts = new RegExp(wildcardTemplate).exec(resolvedPath);
    if (parts && parts.length) {
        /** @type {?} */
        const tokensList = template.match(TOKEN_EXPRESSION);
        // Get rid of the full match.
        parts.shift();
        parts.forEach((/**
         * @param {?} templateValue
         * @param {?} index
         * @return {?}
         */
        (templateValue, index) => {
            if (tokensList[index]) {
                /** @type {?} */
                const key = stripTokenBraces(tokensList[index]);
                tokens[key] = (templateValue || '').replace(new RegExp('/', 'gi'), '');
            }
        }));
    }
    return tokens;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXh0cmFjdC10b2tlbi12YWx1ZXMtZnJvbS10ZW1wbGF0ZS5mdW5jdGlvbi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0c3Mvc2RrLyIsInNvdXJjZXMiOlsibGliL2NvcmUvdG9rZW5zL2V4dHJhY3QtdG9rZW4tdmFsdWVzLWZyb20tdGVtcGxhdGUuZnVuY3Rpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUMxRCxPQUFPLEVBQUUseUJBQXlCLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNqRixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQzs7Ozs7O0FBR2pFLE1BQU0sVUFBVSw4QkFBOEIsQ0FBQyxRQUFnQixFQUFFLFlBQW9COztVQUM3RSxNQUFNLEdBQUcsRUFBRTtJQUNqQixRQUFRLEdBQUcsaUJBQWlCLENBQUMsUUFBUSxDQUFDLENBQUM7O1VBQ2pDLGdCQUFnQixHQUFHLGFBQWEsQ0FBQyxRQUFRLEVBQUUseUJBQXlCLENBQUM7O1VBQ3JFLEtBQUssR0FBRyxJQUFJLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUM7SUFFN0QsSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDLE1BQU0sRUFBRTs7Y0FDbkIsVUFBVSxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUM7UUFFbkQsNkJBQTZCO1FBQzdCLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUVkLEtBQUssQ0FBQyxPQUFPOzs7OztRQUFDLENBQUMsYUFBcUIsRUFBRSxLQUFhLEVBQUUsRUFBRTtZQUNyRCxJQUFJLFVBQVUsQ0FBQyxLQUFLLENBQUMsRUFBRTs7c0JBQ2YsR0FBRyxHQUFHLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDL0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsYUFBYSxJQUFJLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDeEU7UUFDSCxDQUFDLEVBQUMsQ0FBQztLQUNKO0lBRUQsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN0YW5kYXJkaXplVG9rZW5zIH0gZnJvbSAnLi9zdGFuZGFyZGl6ZS10b2tlbnMuZnVuY3Rpb24nO1xuaW1wb3J0IHsgcmVwbGFjZVRva2VucyB9IGZyb20gJy4vcmVwbGFjZS10b2tlbnMuZnVuY3Rpb24nO1xuaW1wb3J0IHsgV0lMRENBUkRfRVhQUkVTU0lPTl9WQUxVRSwgVE9LRU5fRVhQUkVTU0lPTiB9IGZyb20gJy4vdG9rZW5zLmNvbnN0YW50cyc7XG5pbXBvcnQgeyBzdHJpcFRva2VuQnJhY2VzIH0gZnJvbSAnLi9zdHJpcC10b2tlbi1icmFjZXMuZnVuY3Rpb24nO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0VG9rZW5WYWx1ZXNGcm9tVGVtcGxhdGUodGVtcGxhdGU6IHN0cmluZywgcmVzb2x2ZWRQYXRoOiBzdHJpbmcpOiB7fSB7XG4gIGNvbnN0IHRva2VucyA9IHt9O1xuICB0ZW1wbGF0ZSA9IHN0YW5kYXJkaXplVG9rZW5zKHRlbXBsYXRlKTtcbiAgY29uc3Qgd2lsZGNhcmRUZW1wbGF0ZSA9IHJlcGxhY2VUb2tlbnModGVtcGxhdGUsIFdJTERDQVJEX0VYUFJFU1NJT05fVkFMVUUpO1xuICBjb25zdCBwYXJ0cyA9IG5ldyBSZWdFeHAod2lsZGNhcmRUZW1wbGF0ZSkuZXhlYyhyZXNvbHZlZFBhdGgpO1xuXG4gIGlmIChwYXJ0cyAmJiBwYXJ0cy5sZW5ndGgpIHtcbiAgICBjb25zdCB0b2tlbnNMaXN0ID0gdGVtcGxhdGUubWF0Y2goVE9LRU5fRVhQUkVTU0lPTik7XG5cbiAgICAvLyBHZXQgcmlkIG9mIHRoZSBmdWxsIG1hdGNoLlxuICAgIHBhcnRzLnNoaWZ0KCk7XG5cbiAgICBwYXJ0cy5mb3JFYWNoKCh0ZW1wbGF0ZVZhbHVlOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGlmICh0b2tlbnNMaXN0W2luZGV4XSkge1xuICAgICAgICBjb25zdCBrZXkgPSBzdHJpcFRva2VuQnJhY2VzKHRva2Vuc0xpc3RbaW5kZXhdKTtcbiAgICAgICAgdG9rZW5zW2tleV0gPSAodGVtcGxhdGVWYWx1ZSB8fCAnJykucmVwbGFjZShuZXcgUmVnRXhwKCcvJywgJ2dpJyksICcnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB0b2tlbnM7XG59XG4iXX0=