/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { getPortalUrl } from './get-portal-url.function';
import { addSeconds } from '../../core/date-time/add/add-seconds.function';
/**
 * @param {?} token
 * @param {?=} portalUrl
 * @return {?}
 */
export function toEsriPortalAccessToken(token, portalUrl) {
    /** @type {?} */
    const portalToken = {
        accessToken: token.access_token || token.accessToken || token.token || null,
        refreshToken: token.refresh_token || token.refreshToken || null,
        expiresIn: token.expires_in || token.expiresIn || 0,
        isSecure: token.ssl || token.isSecure || false,
        server: token.server || portalUrl || null,
        username: token.username || null,
        expires: token.expires || null
    };
    if (portalToken.expires) {
        portalToken.expires = new Date(portalToken.expires);
    }
    if (portalToken.server) {
        getPortalUrl(portalToken.server);
    }
    if (!portalToken.expires) {
        portalToken.expires = addSeconds(portalToken.expiresIn, new Date());
    }
    return portalToken;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG8tZXNyaS1wb3J0YWwtYWNjZXNzLXRva2VuLmZ1bmN0aW9uLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRzcy9zZGsvIiwic291cmNlcyI6WyJsaWIvZXNyaS9wb3J0YWwvdG8tZXNyaS1wb3J0YWwtYWNjZXNzLXRva2VuLmZ1bmN0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDekQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLCtDQUErQyxDQUFDOzs7Ozs7QUFHM0UsTUFBTSxVQUFVLHVCQUF1QixDQUFDLEtBQVUsRUFBRSxTQUFrQjs7VUFDOUQsV0FBVyxHQUEwQjtRQUN6QyxXQUFXLEVBQUUsS0FBSyxDQUFDLFlBQVksSUFBSSxLQUFLLENBQUMsV0FBVyxJQUFJLEtBQUssQ0FBQyxLQUFLLElBQUksSUFBSTtRQUMzRSxZQUFZLEVBQUUsS0FBSyxDQUFDLGFBQWEsSUFBSSxLQUFLLENBQUMsWUFBWSxJQUFJLElBQUk7UUFDL0QsU0FBUyxFQUFFLEtBQUssQ0FBQyxVQUFVLElBQUksS0FBSyxDQUFDLFNBQVMsSUFBSSxDQUFDO1FBQ25ELFFBQVEsRUFBRSxLQUFLLENBQUMsR0FBRyxJQUFJLEtBQUssQ0FBQyxRQUFRLElBQUksS0FBSztRQUM5QyxNQUFNLEVBQUUsS0FBSyxDQUFDLE1BQU0sSUFBSSxTQUFTLElBQUksSUFBSTtRQUN6QyxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVEsSUFBSSxJQUFJO1FBQ2hDLE9BQU8sRUFBRSxLQUFLLENBQUMsT0FBTyxJQUFJLElBQUk7S0FDL0I7SUFFRCxJQUFJLFdBQVcsQ0FBQyxPQUFPLEVBQUU7UUFDdkIsV0FBVyxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7S0FDckQ7SUFFRCxJQUFJLFdBQVcsQ0FBQyxNQUFNLEVBQUU7UUFDdEIsWUFBWSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUNsQztJQUVELElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFO1FBQ3hCLFdBQVcsQ0FBQyxPQUFPLEdBQUcsVUFBVSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0tBQ3JFO0lBRUQsT0FBTyxXQUFXLENBQUM7QUFDckIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVzcmlQb3J0YWxBY2Nlc3NUb2tlbiB9IGZyb20gJy4vZXNyaS1wb3J0YWwtYWNjZXNzLXRva2VuJztcbmltcG9ydCB7IGdldFBvcnRhbFVybCB9IGZyb20gJy4vZ2V0LXBvcnRhbC11cmwuZnVuY3Rpb24nO1xuaW1wb3J0IHsgYWRkU2Vjb25kcyB9IGZyb20gJy4uLy4uL2NvcmUvZGF0ZS10aW1lL2FkZC9hZGQtc2Vjb25kcy5mdW5jdGlvbic7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHRvRXNyaVBvcnRhbEFjY2Vzc1Rva2VuKHRva2VuOiBhbnksIHBvcnRhbFVybD86IHN0cmluZyk6IEVzcmlQb3J0YWxBY2Nlc3NUb2tlbiB7XG4gIGNvbnN0IHBvcnRhbFRva2VuOiBFc3JpUG9ydGFsQWNjZXNzVG9rZW4gPSB7XG4gICAgYWNjZXNzVG9rZW46IHRva2VuLmFjY2Vzc190b2tlbiB8fCB0b2tlbi5hY2Nlc3NUb2tlbiB8fCB0b2tlbi50b2tlbiB8fCBudWxsLFxuICAgIHJlZnJlc2hUb2tlbjogdG9rZW4ucmVmcmVzaF90b2tlbiB8fCB0b2tlbi5yZWZyZXNoVG9rZW4gfHwgbnVsbCxcbiAgICBleHBpcmVzSW46IHRva2VuLmV4cGlyZXNfaW4gfHwgdG9rZW4uZXhwaXJlc0luIHx8IDAsXG4gICAgaXNTZWN1cmU6IHRva2VuLnNzbCB8fCB0b2tlbi5pc1NlY3VyZSB8fCBmYWxzZSxcbiAgICBzZXJ2ZXI6IHRva2VuLnNlcnZlciB8fCBwb3J0YWxVcmwgfHwgbnVsbCxcbiAgICB1c2VybmFtZTogdG9rZW4udXNlcm5hbWUgfHwgbnVsbCxcbiAgICBleHBpcmVzOiB0b2tlbi5leHBpcmVzIHx8IG51bGxcbiAgfTtcblxuICBpZiAocG9ydGFsVG9rZW4uZXhwaXJlcykge1xuICAgIHBvcnRhbFRva2VuLmV4cGlyZXMgPSBuZXcgRGF0ZShwb3J0YWxUb2tlbi5leHBpcmVzKTtcbiAgfVxuXG4gIGlmIChwb3J0YWxUb2tlbi5zZXJ2ZXIpIHtcbiAgICBnZXRQb3J0YWxVcmwocG9ydGFsVG9rZW4uc2VydmVyKTtcbiAgfVxuXG4gIGlmICghcG9ydGFsVG9rZW4uZXhwaXJlcykge1xuICAgIHBvcnRhbFRva2VuLmV4cGlyZXMgPSBhZGRTZWNvbmRzKHBvcnRhbFRva2VuLmV4cGlyZXNJbiwgbmV3IERhdGUoKSk7XG4gIH1cblxuICByZXR1cm4gcG9ydGFsVG9rZW47XG59XG4iXX0=