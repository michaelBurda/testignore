/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { getFieldAlias, getField } from './fields/layer-field';
import { LayerDrawingInfo } from './drawing/layer-drawing-info';
import { clone } from '../core/clone/clone.function';
/** @type {?} */
export var POINT_GEOMETRY_TYPES = ['point', 'esriGeometryPoint'];
/** @type {?} */
export var LINEAR_GEOMETRY_TYPES = ['line', 'esriGeometryPolyline'];
/** @type {?} */
export var POLYGON_GEOMETRY_TYPES = ['polygon', 'esriGeometryPolygon'];
/**
 * @param {?} geometryType
 * @return {?}
 */
export function isPointGeometryType(geometryType) {
    return POINT_GEOMETRY_TYPES.indexOf(geometryType) > -1;
}
/**
 * @param {?} geometryType
 * @return {?}
 */
export function isLinearGeometryType(geometryType) {
    return LINEAR_GEOMETRY_TYPES.indexOf(geometryType) > -1;
}
/**
 * @param {?} geometryType
 * @return {?}
 */
export function isPolygonGeometryType(geometryType) {
    return POLYGON_GEOMETRY_TYPES.indexOf(geometryType) > -1;
}
var FeatureClassLayer = /** @class */ (function () {
    function FeatureClassLayer() {
        var sources = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            sources[_i] = arguments[_i];
        }
        Object.assign.apply(Object, tslib_1.__spread([this], sources));
        this.subLayers = this.subLayers || [];
        this.fields = this.fields || [];
        this.indexes = this.indexes || [];
        this.relationships = this.relationships || [];
        this.supportedQueryFormats = this.supportedQueryFormats || [];
        this.drawingInfo = new LayerDrawingInfo(this.drawingInfo);
    }
    Object.defineProperty(FeatureClassLayer.prototype, "isPoint", {
        get: /**
         * @return {?}
         */
        function () {
            return isPointGeometryType(this.geometryType);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FeatureClassLayer.prototype, "isLinear", {
        get: /**
         * @return {?}
         */
        function () {
            return isLinearGeometryType(this.geometryType);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FeatureClassLayer.prototype, "isPolygon", {
        get: /**
         * @return {?}
         */
        function () {
            return isPolygonGeometryType(this.geometryType);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FeatureClassLayer.prototype, "displayFieldAlias", {
        get: /**
         * @return {?}
         */
        function () {
            return this.getFieldAlias(this.displayField);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} fieldName
     * @return {?}
     */
    FeatureClassLayer.prototype.getField = /**
     * @param {?} fieldName
     * @return {?}
     */
    function (fieldName) {
        return getField(fieldName, this.fields);
    };
    /**
     * @param {?} fieldName
     * @return {?}
     */
    FeatureClassLayer.prototype.getFieldAlias = /**
     * @param {?} fieldName
     * @return {?}
     */
    function (fieldName) {
        return getFieldAlias(fieldName, this.fields);
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} domains
     * @return {THIS}
     */
    FeatureClassLayer.prototype.applyFieldDomains = /**
     * @template THIS
     * @this {THIS}
     * @param {?} domains
     * @return {THIS}
     */
    function (domains) {
        if (domains.length) {
            (/** @type {?} */ (this)).fields
                .filter((/**
             * @param {?} f
             * @return {?}
             */
            function (f) { return f.domainName; }))
                .forEach((/**
             * @param {?} field
             * @return {?}
             */
            function (field) {
                return field.domain = domains.find((/**
                 * @param {?} domain
                 * @return {?}
                 */
                function (domain) { return domain.name === field.domainName; })) || field.domain;
            }));
        }
        return (/** @type {?} */ (this));
    };
    /**
     * @return {?}
     */
    FeatureClassLayer.prototype.clone = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var copy = clone(this);
        return new FeatureClassLayer(copy);
    };
    return FeatureClassLayer;
}());
export { FeatureClassLayer };
if (false) {
    /** @type {?} */
    FeatureClassLayer.prototype.id;
    /** @type {?} */
    FeatureClassLayer.prototype.name;
    /** @type {?} */
    FeatureClassLayer.prototype.type;
    /** @type {?} */
    FeatureClassLayer.prototype.parentLayer;
    /** @type {?} */
    FeatureClassLayer.prototype.subLayers;
    /** @type {?} */
    FeatureClassLayer.prototype.description;
    /** @type {?} */
    FeatureClassLayer.prototype.hasAttachments;
    /** @type {?} */
    FeatureClassLayer.prototype.currentVersion;
    /** @type {?} */
    FeatureClassLayer.prototype.geometryType;
    /** @type {?} */
    FeatureClassLayer.prototype.sourceSpatialReference;
    /** @type {?} */
    FeatureClassLayer.prototype.minScale;
    /** @type {?} */
    FeatureClassLayer.prototype.maxScale;
    /** @type {?} */
    FeatureClassLayer.prototype.extent;
    /** @type {?} */
    FeatureClassLayer.prototype.displayField;
    /** @type {?} */
    FeatureClassLayer.prototype.typeIdField;
    /** @type {?} */
    FeatureClassLayer.prototype.fields;
    /** @type {?} */
    FeatureClassLayer.prototype.indexes;
    /** @type {?} */
    FeatureClassLayer.prototype.relationships;
    /** @type {?} */
    FeatureClassLayer.prototype.maxRecordCount;
    /** @type {?} */
    FeatureClassLayer.prototype.supportsStatistics;
    /** @type {?} */
    FeatureClassLayer.prototype.supportsAdvancedQueries;
    /** @type {?} */
    FeatureClassLayer.prototype.hasZ;
    /** @type {?} */
    FeatureClassLayer.prototype.hasM;
    /** @type {?} */
    FeatureClassLayer.prototype.supportedQueryFormats;
    /** @type {?} */
    FeatureClassLayer.prototype.supportsDatumTransformation;
    /** @type {?} */
    FeatureClassLayer.prototype.isDataVersioned;
    /** @type {?} */
    FeatureClassLayer.prototype.drawingInfo;
    /** @type {?} */
    FeatureClassLayer.prototype.order;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmVhdHVyZS1jbGFzcy1sYXllci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0c3Mvc2RrLyIsInNvdXJjZXMiOlsibGliL21hcHMvZmVhdHVyZS1jbGFzcy1sYXllci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUVBLE9BQU8sRUFBYyxhQUFhLEVBQUUsUUFBUSxFQUFvQixNQUFNLHNCQUFzQixDQUFDO0FBRzdGLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBR2hFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQzs7QUFPckQsTUFBTSxLQUFPLG9CQUFvQixHQUFtQixDQUFDLE9BQU8sRUFBRSxtQkFBbUIsQ0FBQzs7QUFDbEYsTUFBTSxLQUFPLHFCQUFxQixHQUFtQixDQUFDLE1BQU0sRUFBRSxzQkFBc0IsQ0FBQzs7QUFDckYsTUFBTSxLQUFPLHNCQUFzQixHQUFtQixDQUFDLFNBQVMsRUFBRSxxQkFBcUIsQ0FBQzs7Ozs7QUFFeEYsTUFBTSxVQUFVLG1CQUFtQixDQUFDLFlBQTBCO0lBQzVELE9BQU8sb0JBQW9CLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3pELENBQUM7Ozs7O0FBRUQsTUFBTSxVQUFVLG9CQUFvQixDQUFDLFlBQTBCO0lBQzdELE9BQU8scUJBQXFCLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzFELENBQUM7Ozs7O0FBRUQsTUFBTSxVQUFVLHFCQUFxQixDQUFDLFlBQTBCO0lBQzlELE9BQU8sc0JBQXNCLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzNELENBQUM7QUFFRDtJQThDRTtRQUFZLGlCQUFzQjthQUF0QixVQUFzQixFQUF0QixxQkFBc0IsRUFBdEIsSUFBc0I7WUFBdEIsNEJBQXNCOztRQUNoQyxNQUFNLENBQUMsTUFBTSxPQUFiLE1BQU0s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NkI7O0lBQzdCLG9EQUFrQzs7SUFDbEMsaUNBQWU7O0lBQ2YsaUNBQWU7O0lBQ2Ysa0RBQW9DOztJQUNwQyx3REFBc0M7O0lBQ3RDLDRDQUEwQjs7SUFDMUIsd0NBQStCOztJQUMvQixrQ0FBZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1hcExheWVyVHlwZSwgUXVlcnlUeXBlLCBNYXBMYXllciB9IGZyb20gJy4vbWFwLWxheWVyJztcbmltcG9ydCB7IExheWVyUmVsYXRpb25zaGlwIH0gZnJvbSAnLi9sYXllci1yZWxhdGlvbnNoaXAnO1xuaW1wb3J0IHsgTGF5ZXJGaWVsZCwgZ2V0RmllbGRBbGlhcywgZ2V0RmllbGQsIExheWVyRmllbGREb21haW4gfSBmcm9tICcuL2ZpZWxkcy9sYXllci1maWVsZCc7XG5pbXBvcnQgeyBMYXllckluZGV4IH0gZnJvbSAnLi9sYXllci1pbmRleCc7XG5pbXBvcnQgeyBHZW9tZXRyeUV4dGVudCB9IGZyb20gJy4vZ2VvbWV0cnktZXh0ZW50JztcbmltcG9ydCB7IExheWVyRHJhd2luZ0luZm8gfSBmcm9tICcuL2RyYXdpbmcvbGF5ZXItZHJhd2luZy1pbmZvJztcbmltcG9ydCB7IFN0eWxlYWJsZUxheWVyIH0gZnJvbSAnLi9kcmF3aW5nL3N0eWxlYWJsZS1sYXllcic7XG5pbXBvcnQgeyBDbG9uZWFibGUgfSBmcm9tICcuLi9jb3JlL2Nsb25lL2Nsb25lYWJsZSc7XG5pbXBvcnQgeyBjbG9uZSB9IGZyb20gJy4uL2NvcmUvY2xvbmUvY2xvbmUuZnVuY3Rpb24nO1xuXG5cbmV4cG9ydCB0eXBlIEdlb21ldHJ5VHlwZSA9ICdwb2ludCcgfCAnZXNyaUdlb21ldHJ5UG9pbnQnXG4gIHwgJ2xpbmUnIHwgJ2VzcmlHZW9tZXRyeVBvbHlsaW5lJ1xuICB8ICdwb2x5Z29uJyB8ICdlc3JpR2VvbWV0cnlQb2x5Z29uJztcblxuZXhwb3J0IGNvbnN0IFBPSU5UX0dFT01FVFJZX1RZUEVTOiBHZW9tZXRyeVR5cGVbXSA9IFsncG9pbnQnLCAnZXNyaUdlb21ldHJ5UG9pbnQnXTtcbmV4cG9ydCBjb25zdCBMSU5FQVJfR0VPTUVUUllfVFlQRVM6IEdlb21ldHJ5VHlwZVtdID0gWydsaW5lJywgJ2VzcmlHZW9tZXRyeVBvbHlsaW5lJ107XG5leHBvcnQgY29uc3QgUE9MWUdPTl9HRU9NRVRSWV9UWVBFUzogR2VvbWV0cnlUeXBlW10gPSBbJ3BvbHlnb24nLCAnZXNyaUdlb21ldHJ5UG9seWdvbiddO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNQb2ludEdlb21ldHJ5VHlwZShnZW9tZXRyeVR5cGU6IEdlb21ldHJ5VHlwZSkge1xuICByZXR1cm4gUE9JTlRfR0VPTUVUUllfVFlQRVMuaW5kZXhPZihnZW9tZXRyeVR5cGUpID4gLTE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0xpbmVhckdlb21ldHJ5VHlwZShnZW9tZXRyeVR5cGU6IEdlb21ldHJ5VHlwZSkge1xuICByZXR1cm4gTElORUFSX0dFT01FVFJZX1RZUEVTLmluZGV4T2YoZ2VvbWV0cnlUeXBlKSA+IC0xO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQb2x5Z29uR2VvbWV0cnlUeXBlKGdlb21ldHJ5VHlwZTogR2VvbWV0cnlUeXBlKSB7XG4gIHJldHVybiBQT0xZR09OX0dFT01FVFJZX1RZUEVTLmluZGV4T2YoZ2VvbWV0cnlUeXBlKSA+IC0xO1xufVxuXG5leHBvcnQgY2xhc3MgRmVhdHVyZUNsYXNzTGF5ZXIgaW1wbGVtZW50cyBNYXBMYXllciwgU3R5bGVhYmxlTGF5ZXIsIENsb25lYWJsZTxGZWF0dXJlQ2xhc3NMYXllcj4ge1xuICBpZDogbnVtYmVyO1xuICBuYW1lPzogc3RyaW5nO1xuICB0eXBlPzogTWFwTGF5ZXJUeXBlO1xuICBwYXJlbnRMYXllcj86IG51bWJlcjtcbiAgc3ViTGF5ZXJzPzogeyBpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcgfVtdO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgaGFzQXR0YWNobWVudHM/OiBib29sZWFuO1xuICBjdXJyZW50VmVyc2lvbj86IG51bWJlcjtcbiAgZ2VvbWV0cnlUeXBlPzogR2VvbWV0cnlUeXBlO1xuICBzb3VyY2VTcGF0aWFsUmVmZXJlbmNlPzogeyB3a2lkOiBudW1iZXIsIGxhdGVzdFdraWQ/OiBudW1iZXIgfTtcbiAgbWluU2NhbGU/OiBudW1iZXI7XG4gIG1heFNjYWxlPzogbnVtYmVyO1xuICBleHRlbnQ/OiBHZW9tZXRyeUV4dGVudDtcbiAgZGlzcGxheUZpZWxkPzogc3RyaW5nO1xuICB0eXBlSWRGaWVsZD86IHN0cmluZztcbiAgZmllbGRzPzogTGF5ZXJGaWVsZFtdO1xuICBpbmRleGVzPzogTGF5ZXJJbmRleFtdO1xuICByZWxhdGlvbnNoaXBzPzogTGF5ZXJSZWxhdGlvbnNoaXBbXTtcbiAgbWF4UmVjb3JkQ291bnQ/OiBudW1iZXI7XG4gIHN1cHBvcnRzU3RhdGlzdGljcz86IGJvb2xlYW47XG4gIHN1cHBvcnRzQWR2YW5jZWRRdWVyaWVzPzogYm9vbGVhbjtcbiAgaGFzWj86IGJvb2xlYW47XG4gIGhhc00/OiBib29sZWFuO1xuICBzdXBwb3J0ZWRRdWVyeUZvcm1hdHM/OiBRdWVyeVR5cGVbXTtcbiAgc3VwcG9ydHNEYXR1bVRyYW5zZm9ybWF0aW9uPzogYm9vbGVhbjtcbiAgaXNEYXRhVmVyc2lvbmVkPzogYm9vbGVhbjtcbiAgZHJhd2luZ0luZm8/OiBMYXllckRyYXdpbmdJbmZvO1xuICBvcmRlcj86IG51bWJlcjtcblxuICBnZXQgaXNQb2ludCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaXNQb2ludEdlb21ldHJ5VHlwZSh0aGlzLmdlb21ldHJ5VHlwZSk7XG4gIH1cblxuICBnZXQgaXNMaW5lYXIoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGlzTGluZWFyR2VvbWV0cnlUeXBlKHRoaXMuZ2VvbWV0cnlUeXBlKTtcbiAgfVxuXG4gIGdldCBpc1BvbHlnb24oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGlzUG9seWdvbkdlb21ldHJ5VHlwZSh0aGlzLmdlb21ldHJ5VHlwZSk7XG4gIH1cblxuICBnZXQgZGlzcGxheUZpZWxkQWxpYXMoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5nZXRGaWVsZEFsaWFzKHRoaXMuZGlzcGxheUZpZWxkKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKC4uLnNvdXJjZXM6IE1hcExheWVyW10pIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMsIC4uLnNvdXJjZXMpO1xuXG4gICAgdGhpcy5zdWJMYXllcnMgPSB0aGlzLnN1YkxheWVycyB8fCBbXTtcbiAgICB0aGlzLmZpZWxkcyA9IHRoaXMuZmllbGRzIHx8IFtdO1xuICAgIHRoaXMuaW5kZXhlcyA9IHRoaXMuaW5kZXhlcyB8fCBbXTtcbiAgICB0aGlzLnJlbGF0aW9uc2hpcHMgPSB0aGlzLnJlbGF0aW9uc2hpcHMgfHwgW107XG4gICAgdGhpcy5zdXBwb3J0ZWRRdWVyeUZvcm1hdHMgPSB0aGlzLnN1cHBvcnRlZFF1ZXJ5Rm9ybWF0cyB8fCBbXTtcbiAgICB0aGlzLmRyYXdpbmdJbmZvID0gbmV3IExheWVyRHJhd2luZ0luZm8odGhpcy5kcmF3aW5nSW5mbyk7XG4gIH1cblxuICBnZXRGaWVsZChmaWVsZE5hbWU6IHN0cmluZyk6IExheWVyRmllbGQgfCBudWxsIHtcbiAgICByZXR1cm4gZ2V0RmllbGQoZmllbGROYW1lLCB0aGlzLmZpZWxkcyk7XG4gIH1cblxuICBnZXRGaWVsZEFsaWFzKGZpZWxkTmFtZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIGdldEZpZWxkQWxpYXMoZmllbGROYW1lLCB0aGlzLmZpZWxkcyk7XG4gIH1cblxuICBhcHBseUZpZWxkRG9tYWlucyhkb21haW5zOiBMYXllckZpZWxkRG9tYWluW10pOiB0aGlzIHtcbiAgICBpZiAoZG9tYWlucy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuZmllbGRzXG4gICAgICAgIC5maWx0ZXIoZiA9PiBmLmRvbWFpbk5hbWUpXG4gICAgICAgIC5mb3JFYWNoKGZpZWxkID0+XG4gICAgICAgICAgZmllbGQuZG9tYWluID0gZG9tYWlucy5maW5kKGRvbWFpbiA9PiBkb21haW4ubmFtZSA9PT0gZmllbGQuZG9tYWluTmFtZSkgfHwgZmllbGQuZG9tYWluXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjbG9uZSgpOiBGZWF0dXJlQ2xhc3NMYXllciB7XG4gICAgY29uc3QgY29weSA9IGNsb25lKHRoaXMpO1xuICAgIHJldHVybiBuZXcgRmVhdHVyZUNsYXNzTGF5ZXIoY29weSk7XG4gIH1cbn1cbiJdfQ==