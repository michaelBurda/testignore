/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { standardizeTokens } from './standardize-tokens.function';
import { replaceTokens } from './replace-tokens.function';
import { WILDCARD_EXPRESSION_VALUE, TOKEN_EXPRESSION } from './tokens.constants';
import { stripTokenBraces } from './strip-token-braces.function';
/**
 * @param {?} template
 * @param {?} resolvedPath
 * @return {?}
 */
export function extractTokenValuesFromTemplate(template, resolvedPath) {
    /** @type {?} */
    var tokens = {};
    template = standardizeTokens(template);
    /** @type {?} */
    var wildcardTemplate = replaceTokens(template, WILDCARD_EXPRESSION_VALUE);
    /** @type {?} */
    var parts = new RegExp(wildcardTemplate).exec(resolvedPath);
    if (parts && parts.length) {
        /** @type {?} */
        var tokensList_1 = template.match(TOKEN_EXPRESSION);
        // Get rid of the full match.
        parts.shift();
        parts.forEach((/**
         * @param {?} templateValue
         * @param {?} index
         * @return {?}
         */
        function (templateValue, index) {
            if (tokensList_1[index]) {
                /** @type {?} */
                var key = stripTokenBraces(tokensList_1[index]);
                tokens[key] = (templateValue || '').replace(new RegExp('/', 'gi'), '');
            }
        }));
    }
    return tokens;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXh0cmFjdC10b2tlbi12YWx1ZXMtZnJvbS10ZW1wbGF0ZS5mdW5jdGlvbi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0c3Mvc2RrLyIsInNvdXJjZXMiOlsibGliL2NvcmUvdG9rZW5zL2V4dHJhY3QtdG9rZW4tdmFsdWVzLWZyb20tdGVtcGxhdGUuZnVuY3Rpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUMxRCxPQUFPLEVBQUUseUJBQXlCLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNqRixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQzs7Ozs7O0FBR2pFLE1BQU0sVUFBVSw4QkFBOEIsQ0FBQyxRQUFnQixFQUFFLFlBQW9COztRQUM3RSxNQUFNLEdBQUcsRUFBRTtJQUNqQixRQUFRLEdBQUcsaUJBQWlCLENBQUMsUUFBUSxDQUFDLENBQUM7O1FBQ2pDLGdCQUFnQixHQUFHLGFBQWEsQ0FBQyxRQUFRLEVBQUUseUJBQXlCLENBQUM7O1FBQ3JFLEtBQUssR0FBRyxJQUFJLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUM7SUFFN0QsSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDLE1BQU0sRUFBRTs7WUFDbkIsWUFBVSxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUM7UUFFbkQsNkJBQTZCO1FBQzdCLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUVkLEtBQUssQ0FBQyxPQUFPOzs7OztRQUFDLFVBQUMsYUFBcUIsRUFBRSxLQUFhO1lBQ2pELElBQUksWUFBVSxDQUFDLEtBQUssQ0FBQyxFQUFFOztvQkFDZixHQUFHLEdBQUcsZ0JBQWdCLENBQUMsWUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUMvQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxhQUFhLElBQUksRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksTUFBTSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQzthQUN4RTtRQUNILENBQUMsRUFBQyxDQUFDO0tBQ0o7SUFFRCxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3RhbmRhcmRpemVUb2tlbnMgfSBmcm9tICcuL3N0YW5kYXJkaXplLXRva2Vucy5mdW5jdGlvbic7XG5pbXBvcnQgeyByZXBsYWNlVG9rZW5zIH0gZnJvbSAnLi9yZXBsYWNlLXRva2Vucy5mdW5jdGlvbic7XG5pbXBvcnQgeyBXSUxEQ0FSRF9FWFBSRVNTSU9OX1ZBTFVFLCBUT0tFTl9FWFBSRVNTSU9OIH0gZnJvbSAnLi90b2tlbnMuY29uc3RhbnRzJztcbmltcG9ydCB7IHN0cmlwVG9rZW5CcmFjZXMgfSBmcm9tICcuL3N0cmlwLXRva2VuLWJyYWNlcy5mdW5jdGlvbic7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RUb2tlblZhbHVlc0Zyb21UZW1wbGF0ZSh0ZW1wbGF0ZTogc3RyaW5nLCByZXNvbHZlZFBhdGg6IHN0cmluZyk6IHt9IHtcbiAgY29uc3QgdG9rZW5zID0ge307XG4gIHRlbXBsYXRlID0gc3RhbmRhcmRpemVUb2tlbnModGVtcGxhdGUpO1xuICBjb25zdCB3aWxkY2FyZFRlbXBsYXRlID0gcmVwbGFjZVRva2Vucyh0ZW1wbGF0ZSwgV0lMRENBUkRfRVhQUkVTU0lPTl9WQUxVRSk7XG4gIGNvbnN0IHBhcnRzID0gbmV3IFJlZ0V4cCh3aWxkY2FyZFRlbXBsYXRlKS5leGVjKHJlc29sdmVkUGF0aCk7XG5cbiAgaWYgKHBhcnRzICYmIHBhcnRzLmxlbmd0aCkge1xuICAgIGNvbnN0IHRva2Vuc0xpc3QgPSB0ZW1wbGF0ZS5tYXRjaChUT0tFTl9FWFBSRVNTSU9OKTtcblxuICAgIC8vIEdldCByaWQgb2YgdGhlIGZ1bGwgbWF0Y2guXG4gICAgcGFydHMuc2hpZnQoKTtcblxuICAgIHBhcnRzLmZvckVhY2goKHRlbXBsYXRlVmFsdWU6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgaWYgKHRva2Vuc0xpc3RbaW5kZXhdKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHN0cmlwVG9rZW5CcmFjZXModG9rZW5zTGlzdFtpbmRleF0pO1xuICAgICAgICB0b2tlbnNba2V5XSA9ICh0ZW1wbGF0ZVZhbHVlIHx8ICcnKS5yZXBsYWNlKG5ldyBSZWdFeHAoJy8nLCAnZ2knKSwgJycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHRva2Vucztcbn1cbiJdfQ==