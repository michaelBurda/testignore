/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
// Angular.
import { Injectable } from '@angular/core';
import { LogLevel, typeToLevel } from './log-level';
import { CoreConfig } from '../core.config';
import { format } from '../formatting/format.function';
import * as i0 from "@angular/core";
import * as i1 from "../core.config";
/**
 * Console logger.
 */
var Logger = /** @class */ (function () {
    function Logger(config) {
        this.config = config;
        this.logs = [];
    }
    Object.defineProperty(Logger.prototype, "level", {
        get: /**
         * @return {?}
         */
        function () {
            return this.config.logLevel;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Logger.prototype, "enabled", {
        get: /**
         * @return {?}
         */
        function () {
            return this.config.logEnabled;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Logger.prototype, "isTrace", {
        get: /**
         * @return {?}
         */
        function () {
            return this.level >= LogLevel.Trace;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Logger.prototype, "isDebug", {
        get: /**
         * @return {?}
         */
        function () {
            return this.level >= LogLevel.Debug;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Logger.prototype, "isWarn", {
        get: /**
         * @return {?}
         */
        function () {
            return this.level >= LogLevel.Warn;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Logger.prototype, "isError", {
        get: /**
         * @return {?}
         */
        function () {
            return this.level >= LogLevel.Error;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Logger.prototype, "isFatal", {
        get: /**
         * @return {?}
         */
        function () {
            return this.level >= LogLevel.Fatal;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Logger.prototype, "traceCount", {
        get: /**
         * @return {?}
         */
        function () {
            return this.count('trace');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Logger.prototype, "debugCount", {
        get: /**
         * @return {?}
         */
        function () {
            return this.count('debug');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Logger.prototype, "warnCount", {
        get: /**
         * @return {?}
         */
        function () {
            return this.count('warn');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Logger.prototype, "errorCount", {
        get: /**
         * @return {?}
         */
        function () {
            return this.count('error');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Logger.prototype, "fatalCount", {
        get: /**
         * @return {?}
         */
        function () {
            return this.count('fatal');
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} logType
     * @return {?}
     */
    Logger.prototype.count = /**
     * @param {?} logType
     * @return {?}
     */
    function (logType) {
        return this.logsByType(logType).length;
    };
    /**
     * @param {?} logType
     * @return {?}
     */
    Logger.prototype.logsByType = /**
     * @param {?} logType
     * @return {?}
     */
    function (logType) {
        return this.logsByLevel(typeToLevel(logType));
    };
    /**
     * @param {?} logLevel
     * @return {?}
     */
    Logger.prototype.logsByLevel = /**
     * @param {?} logLevel
     * @return {?}
     */
    function (logLevel) {
        return this.logs.filter((/**
         * @param {?} l
         * @return {?}
         */
        function (l) { return l.level === logLevel; }));
    };
    /**
     * @param {?} log
     * @return {?}
     */
    Logger.prototype.logEntry = /**
     * @param {?} log
     * @return {?}
     */
    function (log) {
        if (this.config.logEnabled && log.level >= this.config.logLevel) {
            this.logs.push(log);
            if (this.isDebug) {
                console.log(LogLevel[log.level] + ": " + log.msg + " " + (log.error || ''));
            }
        }
        return log;
    };
    /**
     * @param {?} msg
     * @param {?} level
     * @param {?=} error
     * @return {?}
     */
    Logger.prototype.log = /**
     * @param {?} msg
     * @param {?} level
     * @param {?=} error
     * @return {?}
     */
    function (msg, level, error) {
        if (error === void 0) { error = null; }
        return this.logEntry({
            msg: format(msg, { error: error }),
            level: level,
            error: error,
            created: new Date()
        });
    };
    /**
     * @param {?} msg
     * @return {?}
     */
    Logger.prototype.trace = /**
     * @param {?} msg
     * @return {?}
     */
    function (msg) {
        return this.log(msg, LogLevel.Trace);
    };
    /**
     * @param {?} msg
     * @return {?}
     */
    Logger.prototype.debug = /**
     * @param {?} msg
     * @return {?}
     */
    function (msg) {
        return this.log(msg, LogLevel.Debug);
    };
    /**
     * @param {?} msg
     * @return {?}
     */
    Logger.prototype.info = /**
     * @param {?} msg
     * @return {?}
     */
    function (msg) {
        return this.log(msg, LogLevel.Info);
    };
    /**
     * @param {?} msg
     * @param {?=} error
     * @return {?}
     */
    Logger.prototype.warn = /**
     * @param {?} msg
     * @param {?=} error
     * @return {?}
     */
    function (msg, error) {
        if (error === void 0) { error = null; }
        return this.log(msg, LogLevel.Warn, error);
    };
    /**
     * @param {?} msg
     * @param {?=} error
     * @return {?}
     */
    Logger.prototype.error = /**
     * @param {?} msg
     * @param {?=} error
     * @return {?}
     */
    function (msg, error) {
        if (error === void 0) { error = null; }
        return this.log(msg, LogLevel.Error, error);
    };
    /**
     * @param {?} msg
     * @param {?=} error
     * @return {?}
     */
    Logger.prototype.fatal = /**
     * @param {?} msg
     * @param {?=} error
     * @return {?}
     */
    function (msg, error) {
        if (error === void 0) { error = null; }
        return this.log(msg, LogLevel.Fatal, error);
    };
    /**
     * @return {?}
     */
    Logger.prototype.clear = /**
     * @return {?}
     */
    function () {
        this.logs.length = 0;
    };
    Logger.decorators = [
        { type: Injectable, args: [{ providedIn: 'root' },] }
    ];
    /** @nocollapse */
    Logger.ctorParameters = function () { return [
        { type: CoreConfig }
    ]; };
    /** @nocollapse */ Logger.ngInjectableDef = i0.defineInjectable({ factory: function Logger_Factory() { return new Logger(i0.inject(i1.CoreConfig)); }, token: Logger, providedIn: "root" });
    return Logger;
}());
export { Logger };
if (false) {
    /** @type {?} */
    Logger.prototype.logs;
    /**
     * @type {?}
     * @private
     */
    Logger.prototype.config;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9nZ2VyLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AdHNzL3Nkay8iLCJzb3VyY2VzIjpbImxpYi9jb3JlL2xvZ2dpbmcvbG9nZ2VyLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBSTNDLE9BQU8sRUFBRSxRQUFRLEVBQVcsV0FBVyxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQzdELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM1QyxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sK0JBQStCLENBQUM7Ozs7OztBQU12RDtJQUlFLGdCQUFvQixNQUFrQjtRQUFsQixXQUFNLEdBQU4sTUFBTSxDQUFZO1FBRi9CLFNBQUksR0FBb0IsRUFBRSxDQUFDO0lBR2xDLENBQUM7SUFFRCxzQkFBSSx5QkFBSzs7OztRQUFUO1lBQ0UsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUM5QixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDJCQUFPOzs7O1FBQVg7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDO1FBQ2hDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMkJBQU87Ozs7UUFBWDtZQUNFLE9BQU8sSUFBSSxDQUFDLEtBQUssSUFBSSxRQUFRLENBQUMsS0FBSyxDQUFDO1FBQ3RDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMkJBQU87Ozs7UUFBWDtZQUNFLE9BQU8sSUFBSSxDQUFDLEtBQUssSUFBSSxRQUFRLENBQUMsS0FBSyxDQUFDO1FBQ3RDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMEJBQU07Ozs7UUFBVjtZQUNFLE9BQU8sSUFBSSxDQUFDLEtBQUssSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDO1FBQ3JDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMkJBQU87Ozs7UUFBWDtZQUNFLE9BQU8sSUFB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OztJQUVELHFCQUFJOzs7O0lBQUosVUFBSyxHQUFXO1FBQ2QsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdEMsQ0FBQzs7Ozs7O0lBRUQscUJBQUk7Ozs7O0lBQUosVUFBSyxHQUFXLEVBQUUsS0FBbUI7UUFBbkIsc0JBQUEsRUFBQSxZQUFtQjtRQUNuQyxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDN0MsQ0FBQzs7Ozs7O0lBRUQsc0JBQUs7Ozs7O0lBQUwsVUFBTSxHQUFXLEVBQUUsS0FBbUI7UUFBbkIsc0JBQUEsRUFBQSxZQUFtQjtRQUNwQyxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDOUMsQ0FBQzs7Ozs7O0lBRUQsc0JBQUs7Ozs7O0lBQUwsVUFBTSxHQUFXLEVBQUUsS0FBbUI7UUFBbkIsc0JBQUEsRUFBQSxZQUFtQjtRQUNwQyxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDOUMsQ0FBQzs7OztJQUVELHNCQUFLOzs7SUFBTDtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUN2QixDQUFDOztnQkFsSEYsVUFBVSxTQUFDLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRTs7OztnQkFQekIsVUFBVTs7O2lCQU5uQjtDQWdJQyxBQW5IRCxJQW1IQztTQWxIWSxNQUFNOzs7SUFDakIsc0JBQWtDOzs7OztJQUV0Qix3QkFBMEIiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBBbmd1bGFyLlxuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG4vLyBUU1MuXG5pbXBvcnQgeyBMb2dFbnRyeSB9IGZyb20gJy4vbG9nLWVudHJ5JztcbmltcG9ydCB7IExvZ0xldmVsLCBMb2dUeXBlLCB0eXBlVG9MZXZlbCB9IGZyb20gJy4vbG9nLWxldmVsJztcbmltcG9ydCB7IENvcmVDb25maWcgfSBmcm9tICcuLi9jb3JlLmNvbmZpZyc7XG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tICcuLi9mb3JtYXR0aW5nL2Zvcm1hdC5mdW5jdGlvbic7XG5cblxuLyoqXG4gKiBDb25zb2xlIGxvZ2dlci5cbiAqL1xuQEluamVjdGFibGUoeyBwcm92aWRlZEluOiAncm9vdCcgfSlcbmV4cG9ydCBjbGFzcyBMb2dnZXIge1xuICBwdWJsaWMgbG9nczogQXJyYXk8TG9nRW50cnk+ID0gW107XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25maWc6IENvcmVDb25maWcpIHtcbiAgfVxuXG4gIGdldCBsZXZlbCgpOiBMb2dMZXZlbCB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLmxvZ0xldmVsO1xuICB9XG5cbiAgZ2V0IGVuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLmxvZ0VuYWJsZWQ7XG4gIH1cblxuICBnZXQgaXNUcmFjZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5sZXZlbCA+PSBMb2dMZXZlbC5UcmFjZTtcbiAgfVxuXG4gIGdldCBpc0RlYnVnKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmxldmVsID49IExvZ0xldmVsLkRlYnVnO1xuICB9XG5cbiAgZ2V0IGlzV2FybigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5sZXZlbCA+PSBMb2dMZXZlbC5XYXJuO1xuICB9XG5cbiAgZ2V0IGlzRXJyb3IoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubGV2ZWwgPj0gTG9nTGV2ZWwuRXJyb3I7XG4gIH1cblxuICBnZXQgaXNGYXRhbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5sZXZlbCA+PSBMb2dMZXZlbC5GYXRhbDtcbiAgfVxuXG4gIGdldCB0cmFjZUNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY291bnQoJ3RyYWNlJyk7XG4gIH1cblxuICBnZXQgZGVidWdDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvdW50KCdkZWJ1ZycpO1xuICB9XG5cbiAgZ2V0IHdhcm5Db3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvdW50KCd3YXJuJyk7XG4gIH1cblxuICBnZXQgZXJyb3JDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvdW50KCdlcnJvcicpO1xuICB9XG5cbiAgZ2V0IGZhdGFsQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jb3VudCgnZmF0YWwnKTtcbiAgfVxuXG4gIGNvdW50KGxvZ1R5cGU6IExvZ1R5cGUpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmxvZ3NCeVR5cGUobG9nVHlwZSkubGVuZ3RoO1xuICB9XG5cbiAgbG9nc0J5VHlwZShsb2dUeXBlOiBMb2dUeXBlKTogTG9nRW50cnlbXSB7XG4gICAgcmV0dXJuIHRoaXMubG9nc0J5TGV2ZWwodHlwZVRvTGV2ZWwobG9nVHlwZSkpO1xuICB9XG5cbiAgbG9nc0J5TGV2ZWwobG9nTGV2ZWw6IExvZ0xldmVsKSB7XG4gICAgcmV0dXJuIHRoaXMubG9ncy5maWx0ZXIobCA9PiBsLmxldmVsID09PSBsb2dMZXZlbCk7XG4gIH1cblxuICBsb2dFbnRyeShsb2c6IExvZ0VudHJ5KTogTG9nRW50cnkge1xuICAgIGlmICh0aGlzLmNvbmZpZy5sb2dFbmFibGVkICYmIGxvZy5sZXZlbCA+PSB0aGlzLmNvbmZpZy5sb2dMZXZlbCkge1xuICAgICAgdGhpcy5sb2dzLnB1c2gobG9nKTtcblxuICAgICAgaWYgKHRoaXMuaXNEZWJ1Zykge1xuICAgICAgICBjb25zb2xlLmxvZyhgJHtMb2dMZXZlbFtsb2cubGV2ZWxdfTogJHtsb2cubXNnfSAke2xvZy5lcnJvciB8fCAnJ31gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbG9nO1xuICB9XG5cbiAgbG9nKG1zZzogc3RyaW5nLCBsZXZlbDogTG9nTGV2ZWwsIGVycm9yOiBFcnJvciA9IG51bGwpOiBMb2dFbnRyeSB7XG4gICAgcmV0dXJuIHRoaXMubG9nRW50cnkoe1xuICAgICAgbXNnOiBmb3JtYXQobXNnLCB7IGVycm9yIH0pLFxuICAgICAgbGV2ZWwsXG4gICAgICBlcnJvcixcbiAgICAgIGNyZWF0ZWQ6IG5ldyBEYXRlKClcbiAgICB9KTtcbiAgfVxuXG4gIHRyYWNlKG1zZzogc3RyaW5nKTogTG9nRW50cnkge1xuICAgIHJldHVybiB0aGlzLmxvZyhtc2csIExvZ0xldmVsLlRyYWNlKTtcbiAgfVxuXG4gIGRlYnVnKG1zZzogc3RyaW5nKTogTG9nRW50cnkge1xuICAgIHJldHVybiB0aGlzLmxvZyhtc2csIExvZ0xldmVsLkRlYnVnKTtcbiAgfVxuXG4gIGluZm8obXNnOiBzdHJpbmcpOiBMb2dFbnRyeSB7XG4gICAgcmV0dXJuIHRoaXMubG9nKG1zZywgTG9nTGV2ZWwuSW5mbyk7XG4gIH1cblxuICB3YXJuKG1zZzogc3RyaW5nLCBlcnJvcjogRXJyb3IgPSBudWxsKTogTG9nRW50cnkge1xuICAgIHJldHVybiB0aGlzLmxvZyhtc2csIExvZ0xldmVsLldhcm4sIGVycm9yKTtcbiAgfVxuXG4gIGVycm9yKG1zZzogc3RyaW5nLCBlcnJvcjogRXJyb3IgPSBudWxsKTogTG9nRW50cnkge1xuICAgIHJldHVybiB0aGlzLmxvZyhtc2csIExvZ0xldmVsLkVycm9yLCBlcnJvcik7XG4gIH1cblxuICBmYXRhbChtc2c6IHN0cmluZywgZXJyb3I6IEVycm9yID0gbnVsbCk6IExvZ0VudHJ5IHtcbiAgICByZXR1cm4gdGhpcy5sb2cobXNnLCBMb2dMZXZlbC5GYXRhbCwgZXJyb3IpO1xuICB9XG5cbiAgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5sb2dzLmxlbmd0aCA9IDA7XG4gIH1cbn1cbiJdfQ==