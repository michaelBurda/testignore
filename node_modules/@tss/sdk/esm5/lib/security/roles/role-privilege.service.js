/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
// Angular.
import { HttpClient } from '@angular/common/http';
import { Injectable } from '@angular/core';
// TSS.
import { SecurityConfig } from '../security-config';
import { MISSING_ROLE_PARAM_EXCEPTION_MSG } from './role';
import { BaseResourceService } from '../../core/resource/base-resource.service';
import { join } from '../../core/url/join.function';
import { UNSUPPORTED_GET_EXCEPTION_MSG, UNSUPPORTED_CREATE_EXCEPTION_MSG } from '../../core/resource/resource.constants';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "../security-config";
/** @type {?} */
export var MISSING_PRIVILEGE_PARAM_EXCEPTION_MSG = 'Missing privilege identifier parameter';
/**
 * Service to provide all CRUD operations for privilege/role assignment.
 *
 * \@example
 * ## Gets privileges for a given role:
 * service.privilegesByRole('879e27e1-b139-4348-86ca-ec4d5651475f')
 *
 * // Which is just a shortcut for:
 * service.query({ roleId: 'admin' });
 *
 */
var RolePrivilegeService = /** @class */ (function (_super) {
    tslib_1.__extends(RolePrivilegeService, _super);
    function RolePrivilegeService(http, config) {
        var _this = _super.call(this, http, {
            url: join(config.serviceUrl, config.rolesPrivilegesEndpoint),
            idFieldName: 'roleId'
        }) || this;
        _this.http = http;
        return _this;
    }
    /**
     * Retrieves a list of privileges for a given role ID.
     */
    /**
     * Retrieves a list of privileges for a given role ID.
     * @param {?=} routeTokens
     * @param {?=} params
     * @return {?}
     */
    RolePrivilegeService.prototype.query = /**
     * Retrieves a list of privileges for a given role ID.
     * @param {?=} routeTokens
     * @param {?=} params
     * @return {?}
     */
    function (routeTokens, params) {
        if (!routeTokens || !routeTokens.roleId) {
            throw new Error(MISSING_ROLE_PARAM_EXCEPTION_MSG);
        }
        return _super.prototype.query.call(this, routeTokens, params);
    };
    /**
     * This method is not supported for this resource. Please use "privilegesByRole".
     */
    /**
     * This method is not supported for this resource. Please use "privilegesByRole".
     * @param {?} id
     * @param {?=} routeTokens
     * @param {?=} params
     * @return {?}
     */
    RolePrivilegeService.prototype.get = /**
     * This method is not supported for this resource. Please use "privilegesByRole".
     * @param {?} id
     * @param {?=} routeTokens
     * @param {?=} params
     * @return {?}
     */
    function (id, routeTokens, params) {
        throw new Error(UNSUPPORTED_GET_EXCEPTION_MSG);
    };
    /**
     * This method is not supported for this resource. Please use "addPrivilegeToRole".
     */
    /**
     * This method is not supported for this resource. Please use "addPrivilegeToRole".
     * @param {?} entity
     * @param {?=} routeTokens
     * @param {?=} params
     * @return {?}
     */
    RolePrivilegeService.prototype.create = /**
     * This method is not supported for this resource. Please use "addPrivilegeToRole".
     * @param {?} entity
     * @param {?=} routeTokens
     * @param {?=} params
     * @return {?}
     */
    function (entity, routeTokens, params) {
        throw new Error(UNSUPPORTED_CREATE_EXCEPTION_MSG);
    };
    /**
     * Updates a privilege assignment (adds a privilege to a role).
     */
    /**
     * Updates a privilege assignment (adds a privilege to a role).
     * @param {?} entity
     * @param {?=} routeTokens
     * @param {?=} params
     * @return {?}
     */
    RolePrivilegeService.prototype.update = /**
     * Updates a privilege assignment (adds a privilege to a role).
     * @param {?} entity
     * @param {?=} routeTokens
     * @param {?=} params
     * @return {?}
     */
    function (entity, routeTokens, params) {
        if (!routeTokens || !routeTokens.roleId) {
            throw new Error(MISSING_ROLE_PARAM_EXCEPTION_MSG);
        }
        else if (!routeTokens.privilegeId) {
            throw new Error(MISSING_PRIVILEGE_PARAM_EXCEPTION_MSG);
        }
        return _super.prototype.update.call(this, null, routeTokens, params);
    };
    /**
     * Removes a privilege from a role assignment.
     */
    /**
     * Removes a privilege from a role assignment.
     * @param {?} id
     * @param {?=} routeTokens
     * @param {?=} params
     * @return {?}
     */
    RolePrivilegeService.prototype.delete = /**
     * Removes a privilege from a role assignment.
     * @param {?} id
     * @param {?=} routeTokens
     * @param {?=} params
     * @return {?}
     */
    function (id, routeTokens, params) {
        if (!routeTokens || !routeTokens.roleId) {
            throw new Error(MISSING_ROLE_PARAM_EXCEPTION_MSG);
        }
        else if (!routeTokens.privilegeId) {
            throw new Error(MISSING_PRIVILEGE_PARAM_EXCEPTION_MSG);
        }
        return _super.prototype.delete.call(this, id, routeTokens, params);
    };
    /**
     * Retrieves all privileges assigned to the given role ID.
     */
    /**
     * Retrieves all privileges assigned to the given role ID.
     * @param {?} roleId
     * @param {?=} params
     * @return {?}
     */
    RolePrivilegeService.prototype.privilegesByRole = /**
     * Retrieves all privileges assigned to the given role ID.
     * @param {?} roleId
     * @param {?=} params
     * @return {?}
     */
    function (roleId, params) {
        return this.query({ roleId: roleId }, params);
    };
    /**
     * Adds a privilege to role.
     */
    /**
     * Adds a privilege to role.
     * @param {?} roleId
     * @param {?} privilegeId
     * @return {?}
     */
    RolePrivilegeService.prototype.addPrivilegeToRole = /**
     * Adds a privilege to role.
     * @param {?} roleId
     * @param {?} privilegeId
     * @return {?}
     */
    function (roleId, privilegeId) {
        return this.update(null, { roleId: roleId, privilegeId: privilegeId });
    };
    /**
     * Removes a privilege from the given role.
     */
    /**
     * Removes a privilege from the given role.
     * @param {?} roleId
     * @param {?} privilegeId
     * @return {?}
     */
    RolePrivilegeService.prototype.removePrivilegeFromRole = /**
     * Removes a privilege from the given role.
     * @param {?} roleId
     * @param {?} privilegeId
     * @return {?}
     */
    function (roleId, privilegeId) {
        return this.delete(roleId, { roleId: roleId, privilegeId: privilegeId });
    };
    RolePrivilegeService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    RolePrivilegeService.ctorParameters = function () { return [
        { type: HttpClient },
        { type: SecurityConfig }
    ]; };
    /** @nocollapse */ RolePrivilegeService.ngInjectableDef = i0.defineInjectable({ factory: function RolePrivilegeService_Factory() { return new RolePrivilegeService(i0.inject(i1.HttpClient), i0.inject(i2.SecurityConfig)); }, token: RolePrivilegeService, providedIn: "root" });
    return RolePrivilegeService;
}(BaseResourceService));
export { RolePrivilegeService };
if (false) {
    /**
     * @type {?}
     * @protected
     */
    RolePrivilegeService.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm9sZS1wcml2aWxlZ2Uuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0c3Mvc2RrLyIsInNvdXJjZXMiOlsibGliL3NlY3VyaXR5L3JvbGVzL3JvbGUtcHJpdmlsZWdlLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsT0FBTyxFQUFFLFVBQVUsRUFBYyxNQUFNLHNCQUFzQixDQUFDO0FBQzlELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7O0FBTTNDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUVwRCxPQUFPLEVBQUUsZ0NBQWdDLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFDMUQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFDaEYsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQ3BELE9BQU8sRUFBRSw2QkFBNkIsRUFBRSxnQ0FBZ0MsRUFBRSxNQUFNLHdDQUF3QyxDQUFDOzs7OztBQUd6SCxNQUFNLEtBQU8scUNBQXFDLEdBQUcsd0NBQXdDOzs7Ozs7Ozs7Ozs7QUFjN0Y7SUFHMEMsZ0RBQThCO0lBQ3RFLDhCQUFzQixJQUFnQixFQUFFLE1BQXNCO1FBQTlELFlBQ0Usa0JBQU0sSUFBSSxFQUFFO1lBQ1YsR0FBRyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQztZQUM1RCxXQUFXLEVBQUUsUUFBUTtTQUN0QixDQUFDLFNBQ0g7UUFMcUIsVUFBSSxHQUFKLElBQUksQ0FBWTs7SUFLdEMsQ0FBQztJQUVEOztPQUVHOzs7Ozs7O0lBQ0gsb0NBQUs7Ozs7OztJQUFMLFVBQU0sV0FBaUIsRUFBRSxNQUFtQjtRQUMxQyxJQUFJLENBQUMsV0FBVyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRTtZQUN2QyxNQUFNLElBQUksS0FBSyxDQUFDLGdDQUFnQyxDQUFDLENBQUM7U0FDbkQ7UUFFRCxPQUFPLGlCQUFNLEtBQUssWUFBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVEOztPQUVHOzs7Ozs7OztJQUNILGtDQUFHOzs7Ozs7O0lBQUgsVUFBSSxFQUFtQixFQUFFLFdBQWlCLEVBQUUsTUFBbUI7UUFDN0QsTUFBTSxJQUFJLEtBQUssQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFFRDs7T0FFRzs7Ozs7Ozs7SUFDSCxxQ0FBTTs7Ozs7OztJQUFOLFVBQU8sTUFBaUIsRUFBRSxXQUFpQixFQUFFLE1BQW1CO1FBQzlELE1BQU0sSUFBSSxLQUFLLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRUQ7O09BRUc7Ozs7Ozs7O0lBQ0gscUNBQU07Ozs7Ozs7SUFBTixVQUFPLE1BQWlCLEVBQUUsV0FBaUIsRUFBRSxNQUFtQjtRQUM5RCxJQUFJLENBQUMsV0FBVyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRTtZQUN2QyxNQUFNLElBQUksS0FBSyxDQUFDLGdDQUFnQyxDQUFDLENBQUM7U0FDbkQ7YUFBTSxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsRUFBRTtZQUNuQyxNQUFNLElBQUksS0FBSyxDQUFDLHFDQUFxQyxDQUFDLENBQUM7U0FDeEQ7UUFFRCxPQUFPLGlCQUFNLE1BQU0sWUFBQyxJQUFJLEVBQUUsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFFRDs7T0FFRzs7Ozs7Ozs7SUFDSCxxQ0FBTTs7Ozs7OztJQUFOLFVBQU8sRUFBbUIsRUFBRSxXQUFpQixFQUFFLE1BQW1CO1FBQ2hFLElBQUksQ0FBQyxXQUFXLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFO1lBQ3ZDLE1BQU0sSUFBSSxLQUFLLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztTQUNuRDthQUFNLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxFQUFFO1lBQ25DLE1BQU0sSUFBSSxLQUFLLENBQUMscUNBQXFDLENBQUMsQ0FBQztTQUN4RDtRQUVELE9BQU8saUJBQU0sTUFBTSxZQUFDLEVBQUUsRUFBRSxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVEOztPQUVHOzs7Ozs7O0lBQ0gsK0NBQWdCOzs7Ozs7SUFBaEIsVUFBaUIsTUFBYyxFQUFFLE1BQW1CO1FBQ2xELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLE1BQU0sUUFBQSxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVEOztPQUVHOzs7Ozs7O0lBQ0gsaURBQWtCOzs7Ozs7SUFBbEIsVUFBbUIsTUFBYyxFQUFFLFdBQW1CO1FBQ3BELE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsRUFBRSxNQUFNLFFBQUEsRUFBRSxXQUFXLGFBQUEsRUFBRSxDQUFDLENBQUM7SUFDcEQsQ0FBQztJQUdEOztPQUVHOzs7Ozs7O0lBQ0gsc0RBQXVCOzs7Ozs7SUFBdkIsVUFBd0IsTUFBYyxFQUFFLFdBQW1CO1FBQ3pELE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxNQUFNLFFBQUEsRUFBRSxXQUFXLGFBQUEsRUFBRSxDQUFDLENBQUM7SUFDdEQsQ0FBQzs7Z0JBbEZGLFVBQVUsU0FBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkI7Ozs7Z0JBL0JRLFVBQVU7Z0JBT1YsY0FBYzs7OytCQVJ2QjtDQWlIQyxBQW5GRCxDQUcwQyxtQkFBbUIsR0FnRjVEO1NBaEZZLG9CQUFvQjs7Ozs7O0lBQ25CLG9DQUEwQiIsInNvdXJjZXNDb250ZW50IjpbIi8vIEFuZ3VsYXIuXG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwUGFyYW1zIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG4vLyAzcmQgcGFydHkuXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5cbi8vIFRTUy5cbmltcG9ydCB7IFNlY3VyaXR5Q29uZmlnIH0gZnJvbSAnLi4vc2VjdXJpdHktY29uZmlnJztcbmltcG9ydCB7IFByaXZpbGVnZSB9IGZyb20gJy4uL3ByaXZpbGVnZXMvcHJpdmlsZWdlJztcbmltcG9ydCB7IE1JU1NJTkdfUk9MRV9QQVJBTV9FWENFUFRJT05fTVNHIH0gZnJvbSAnLi9yb2xlJztcbmltcG9ydCB7IEJhc2VSZXNvdXJjZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9jb3JlL3Jlc291cmNlL2Jhc2UtcmVzb3VyY2Uuc2VydmljZSc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAnLi4vLi4vY29yZS91cmwvam9pbi5mdW5jdGlvbic7XG5pbXBvcnQgeyBVTlNVUFBPUlRFRF9HRVRfRVhDRVBUSU9OX01TRywgVU5TVVBQT1JURURfQ1JFQVRFX0VYQ0VQVElPTl9NU0cgfSBmcm9tICcuLi8uLi9jb3JlL3Jlc291cmNlL3Jlc291cmNlLmNvbnN0YW50cyc7XG5cblxuZXhwb3J0IGNvbnN0IE1JU1NJTkdfUFJJVklMRUdFX1BBUkFNX0VYQ0VQVElPTl9NU0cgPSAnTWlzc2luZyBwcml2aWxlZ2UgaWRlbnRpZmllciBwYXJhbWV0ZXInO1xuXG5cbi8qKlxuICogU2VydmljZSB0byBwcm92aWRlIGFsbCBDUlVEIG9wZXJhdGlvbnMgZm9yIHByaXZpbGVnZS9yb2xlIGFzc2lnbm1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqICMjIEdldHMgcHJpdmlsZWdlcyBmb3IgYSBnaXZlbiByb2xlOlxuICogc2VydmljZS5wcml2aWxlZ2VzQnlSb2xlKCc4NzllMjdlMS1iMTM5LTQzNDgtODZjYS1lYzRkNTY1MTQ3NWYnKVxuICpcbiAqIC8vIFdoaWNoIGlzIGp1c3QgYSBzaG9ydGN1dCBmb3I6XG4gKiBzZXJ2aWNlLnF1ZXJ5KHsgcm9sZUlkOiAnYWRtaW4nIH0pO1xuICpcbiAqL1xuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgUm9sZVByaXZpbGVnZVNlcnZpY2UgZXh0ZW5kcyBCYXNlUmVzb3VyY2VTZXJ2aWNlPFByaXZpbGVnZT4ge1xuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cDogSHR0cENsaWVudCwgY29uZmlnOiBTZWN1cml0eUNvbmZpZykge1xuICAgIHN1cGVyKGh0dHAsIHtcbiAgICAgIHVybDogam9pbihjb25maWcuc2VydmljZVVybCwgY29uZmlnLnJvbGVzUHJpdmlsZWdlc0VuZHBvaW50KSxcbiAgICAgIGlkRmllbGROYW1lOiAncm9sZUlkJ1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhIGxpc3Qgb2YgcHJpdmlsZWdlcyBmb3IgYSBnaXZlbiByb2xlIElELlxuICAgKi9cbiAgcXVlcnkocm91dGVUb2tlbnM/OiBhbnksIHBhcmFtcz86IEh0dHBQYXJhbXMpOiBPYnNlcnZhYmxlPFByaXZpbGVnZVtdPiB7XG4gICAgaWYgKCFyb3V0ZVRva2VucyB8fCAhcm91dGVUb2tlbnMucm9sZUlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoTUlTU0lOR19ST0xFX1BBUkFNX0VYQ0VQVElPTl9NU0cpO1xuICAgIH1cblxuICAgIHJldHVybiBzdXBlci5xdWVyeShyb3V0ZVRva2VucywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIHJlc291cmNlLiBQbGVhc2UgdXNlIFwicHJpdmlsZWdlc0J5Um9sZVwiLlxuICAgKi9cbiAgZ2V0KGlkOiBzdHJpbmcgfCBudW1iZXIsIHJvdXRlVG9rZW5zPzogYW55LCBwYXJhbXM/OiBIdHRwUGFyYW1zKTogT2JzZXJ2YWJsZTxQcml2aWxlZ2U+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoVU5TVVBQT1JURURfR0VUX0VYQ0VQVElPTl9NU0cpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgcmVzb3VyY2UuIFBsZWFzZSB1c2UgXCJhZGRQcml2aWxlZ2VUb1JvbGVcIi5cbiAgICovXG4gIGNyZWF0ZShlbnRpdHk6IFByaXZpbGVnZSwgcm91dGVUb2tlbnM/OiBhbnksIHBhcmFtcz86IEh0dHBQYXJhbXMpOiBPYnNlcnZhYmxlPFByaXZpbGVnZT4ge1xuICAgIHRocm93IG5ldyBFcnJvcihVTlNVUFBPUlRFRF9DUkVBVEVfRVhDRVBUSU9OX01TRyk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyBhIHByaXZpbGVnZSBhc3NpZ25tZW50IChhZGRzIGEgcHJpdmlsZWdlIHRvIGEgcm9sZSkuXG4gICAqL1xuICB1cGRhdGUoZW50aXR5OiBQcml2aWxlZ2UsIHJvdXRlVG9rZW5zPzogYW55LCBwYXJhbXM/OiBIdHRwUGFyYW1zKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICBpZiAoIXJvdXRlVG9rZW5zIHx8ICFyb3V0ZVRva2Vucy5yb2xlSWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihNSVNTSU5HX1JPTEVfUEFSQU1fRVhDRVBUSU9OX01TRyk7XG4gICAgfSBlbHNlIGlmICghcm91dGVUb2tlbnMucHJpdmlsZWdlSWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihNSVNTSU5HX1BSSVZJTEVHRV9QQVJBTV9FWENFUFRJT05fTVNHKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3VwZXIudXBkYXRlKG51bGwsIHJvdXRlVG9rZW5zLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBwcml2aWxlZ2UgZnJvbSBhIHJvbGUgYXNzaWdubWVudC5cbiAgICovXG4gIGRlbGV0ZShpZDogc3RyaW5nIHwgbnVtYmVyLCByb3V0ZVRva2Vucz86IGFueSwgcGFyYW1zPzogSHR0cFBhcmFtcyk6IE9ic2VydmFibGU8UHJpdmlsZWdlPiB7XG4gICAgaWYgKCFyb3V0ZVRva2VucyB8fCAhcm91dGVUb2tlbnMucm9sZUlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoTUlTU0lOR19ST0xFX1BBUkFNX0VYQ0VQVElPTl9NU0cpO1xuICAgIH0gZWxzZSBpZiAoIXJvdXRlVG9rZW5zLnByaXZpbGVnZUlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoTUlTU0lOR19QUklWSUxFR0VfUEFSQU1fRVhDRVBUSU9OX01TRyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN1cGVyLmRlbGV0ZShpZCwgcm91dGVUb2tlbnMsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIGFsbCBwcml2aWxlZ2VzIGFzc2lnbmVkIHRvIHRoZSBnaXZlbiByb2xlIElELlxuICAgKi9cbiAgcHJpdmlsZWdlc0J5Um9sZShyb2xlSWQ6IHN0cmluZywgcGFyYW1zPzogSHR0cFBhcmFtcyk6IE9ic2VydmFibGU8UHJpdmlsZWdlW10+IHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeSh7IHJvbGVJZCB9LCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBwcml2aWxlZ2UgdG8gcm9sZS5cbiAgICovXG4gIGFkZFByaXZpbGVnZVRvUm9sZShyb2xlSWQ6IHN0cmluZywgcHJpdmlsZWdlSWQ6IHN0cmluZyk6IE9ic2VydmFibGU8UHJpdmlsZWdlPiB7XG4gICAgcmV0dXJuIHRoaXMudXBkYXRlKG51bGwsIHsgcm9sZUlkLCBwcml2aWxlZ2VJZCB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBwcml2aWxlZ2UgZnJvbSB0aGUgZ2l2ZW4gcm9sZS5cbiAgICovXG4gIHJlbW92ZVByaXZpbGVnZUZyb21Sb2xlKHJvbGVJZDogc3RyaW5nLCBwcml2aWxlZ2VJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxQcml2aWxlZ2U+IHtcbiAgICByZXR1cm4gdGhpcy5kZWxldGUocm9sZUlkLCB7IHJvbGVJZCwgcHJpdmlsZWdlSWQgfSk7XG4gIH1cbn1cbiJdfQ==