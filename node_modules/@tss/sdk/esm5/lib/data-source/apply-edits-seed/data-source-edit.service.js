/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
// Angular.
import { Injectable } from '@angular/core';
import { HttpClient, HttpParams } from '@angular/common/http';
import { DataSourceConfig } from '../data-source-config';
import { BaseEmptyResourceService } from '../../core/resource/base-empty-resource.service';
import { EMPTY_PARAM_VALUE } from '../../core/resource/resource.constants';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "../data-source-config";
var DataSourceEditService = /** @class */ (function (_super) {
    tslib_1.__extends(DataSourceEditService, _super);
    function DataSourceEditService(http, dsConfig) {
        var _this = _super.call(this, http, {
            url: dsConfig.serviceUrl
        }) || this;
        _this.http = http;
        _this.dsConfig = dsConfig;
        return _this;
    }
    /**
     * @param {?} data
     * @param {?=} params
     * @return {?}
     */
    DataSourceEditService.prototype.applyEdits = /**
     * @param {?} data
     * @param {?=} params
     * @return {?}
     */
    function (data, params) {
        if (!data) {
            throw new Error('Missing or invalid apply edits seed data provided');
        }
        else if (!data.dataSourceId) {
            throw new Error("Missing 'dataSourceId' from the apply edits seed data");
        }
        /** @type {?} */
        var url = this.getUrlWithId(data.dataSourceId, this.dsConfig.applyEditsEndpoint, {});
        return this.http.post(url, data, { params: params });
    };
    /**
     * @param {?} dataSourceId
     * @param {?} table
     * @param {?} feature
     * @param {?=} version
     * @param {?=} params
     * @return {?}
     */
    DataSourceEditService.prototype.createRecord = /**
     * @param {?} dataSourceId
     * @param {?} table
     * @param {?} feature
     * @param {?=} version
     * @param {?=} params
     * @return {?}
     */
    function (dataSourceId, table, feature, version, params) {
        /** @type {?} */
        var url = this.getUrlWithId(dataSourceId, this.dsConfig.editDataEndpoint, { table: table });
        params = (params || new HttpParams())
            .set('version', version || EMPTY_PARAM_VALUE);
        return this.http.post(url, feature, { params: params });
    };
    DataSourceEditService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    DataSourceEditService.ctorParameters = function () { return [
        { type: HttpClient },
        { type: DataSourceConfig }
    ]; };
    /** @nocollapse */ DataSourceEditService.ngInjectableDef = i0.defineInjectable({ factory: function DataSourceEditService_Factory() { return new DataSourceEditService(i0.inject(i1.HttpClient), i0.inject(i2.DataSourceConfig)); }, token: DataSourceEditService, providedIn: "root" });
    return DataSourceEditService;
}(BaseEmptyResourceService));
export { DataSourceEditService };
if (false) {
    /**
     * @type {?}
     * @protected
     */
    DataSourceEditService.prototype.http;
    /**
     * @type {?}
     * @private
     */
    DataSourceEditService.prototype.dsConfig;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS1zb3VyY2UtZWRpdC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRzcy9zZGsvIiwic291cmNlcyI6WyJsaWIvZGF0YS1zb3VyY2UvYXBwbHktZWRpdHMtc2VlZC9kYXRhLXNvdXJjZS1lZGl0LnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBUTlELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBR3pELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLGlEQUFpRCxDQUFDO0FBQzNGLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHdDQUF3QyxDQUFDOzs7O0FBRzNFO0lBRzJDLGlEQUF3QztJQUNqRiwrQkFBc0IsSUFBZ0IsRUFBVSxRQUEwQjtRQUExRSxZQUNFLGtCQUFNLElBQUksRUFBRTtZQUNWLEdBQUcsRUFBRSxRQUFRLENBQUMsVUFBVTtTQUN6QixDQUFDLFNBQ0g7UUFKcUIsVUFBSSxHQUFKLElBQUksQ0FBWTtRQUFVLGNBQVEsR0FBUixRQUFRLENBQWtCOztJQUkxRSxDQUFDOzs7Ozs7SUFFRCwwQ0FBVTs7Ozs7SUFBVixVQUFXLElBQW1CLEVBQUUsTUFBbUI7UUFDakQsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNULE1BQU0sSUFBSSxLQUFLLENBQUMsbURBQW1ELENBQUMsQ0FBQztTQUN0RTthQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQzdCLE1BQU0sSUFBSSxLQUFLLENBQUMsdURBQXVELENBQUMsQ0FBQztTQUMxRTs7WUFFSyxHQUFHLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsa0JBQWtCLEVBQUUsRUFBRSxDQUFDO1FBQ3RGLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQW1CLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxNQUFNLFFBQUEsRUFBRSxDQUFDLENBQUM7SUFDakUsQ0FBQzs7Ozs7Ozs7O0lBRUQsNENBQVk7Ozs7Ozs7O0lBQVosVUFDRSxZQUFvQixFQUNwQixLQUFhLEVBQ2IsT0FBZ0IsRUFDaEIsT0FBZ0IsRUFDaEIsTUFBbUI7O1lBRWIsR0FBRyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxLQUFLLE9BQUEsRUFBRSxDQUFDO1FBQ3RGLE1BQU0sR0FBRyxDQUFDLE1BQU0sSUFBSSxJQUFJLFVBQVUsRUFBRSxDQUFDO2FBQ2xDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsT0FBTyxJQUFJLGlCQUFpQixDQUFDLENBQUM7UUFFaEQsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBbUIsR0FBRyxFQUFFLE9BQU8sRUFBRSxFQUFFLE1BQU0sUUFBQSxFQUFFLENBQUMsQ0FBQztJQUNwRSxDQUFDOztnQkFqQ0YsVUFBVSxTQUFDO29CQUNWLFVBQVUsRUFBRSxNQUFNO2lCQUNuQjs7OztnQkFqQlEsVUFBVTtnQkFRVixnQkFBZ0I7OztnQ0FWekI7Q0FtREMsQUFsQ0QsQ0FHMkMsd0JBQXdCLEdBK0JsRTtTQS9CWSxxQkFBcUI7Ozs7OztJQUNwQixxQ0FBMEI7Ozs7O0lBQUUseUNBQWtDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQW5ndWxhci5cbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBQYXJhbXMgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5cbi8vIDNyZCBQYXJ0eS5cbmltcG9ydCB7IEZlYXR1cmUgfSBmcm9tICdnZW9qc29uJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcblxuLy8gVFNTLlxuaW1wb3J0IHsgQXBwbHlFZGl0c1NlZWQgfSBmcm9tICcuL2FwcGx5LWVkaXRzLXNlZWQnO1xuaW1wb3J0IHsgRGF0YVNvdXJjZUNvbmZpZyB9IGZyb20gJy4uL2RhdGEtc291cmNlLWNvbmZpZyc7XG5pbXBvcnQgeyBBcHBseUVkaXRzUmVzdWx0IH0gZnJvbSAnLi9hcHBseS1lZGl0cy1yZXN1bHQnO1xuaW1wb3J0IHsgQXBwbHlFZGl0c1BvZCB9IGZyb20gJy4vYXBwbHktZWRpdHMtcG9kJztcbmltcG9ydCB7IEJhc2VFbXB0eVJlc291cmNlU2VydmljZSB9IGZyb20gJy4uLy4uL2NvcmUvcmVzb3VyY2UvYmFzZS1lbXB0eS1yZXNvdXJjZS5zZXJ2aWNlJztcbmltcG9ydCB7IEVNUFRZX1BBUkFNX1ZBTFVFIH0gZnJvbSAnLi4vLi4vY29yZS9yZXNvdXJjZS9yZXNvdXJjZS5jb25zdGFudHMnO1xuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIERhdGFTb3VyY2VFZGl0U2VydmljZSBleHRlbmRzIEJhc2VFbXB0eVJlc291cmNlU2VydmljZTxBcHBseUVkaXRzU2VlZD4ge1xuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cDogSHR0cENsaWVudCwgcHJpdmF0ZSBkc0NvbmZpZzogRGF0YVNvdXJjZUNvbmZpZykge1xuICAgIHN1cGVyKGh0dHAsIHtcbiAgICAgIHVybDogZHNDb25maWcuc2VydmljZVVybFxuICAgIH0pO1xuICB9XG5cbiAgYXBwbHlFZGl0cyhkYXRhOiBBcHBseUVkaXRzUG9kLCBwYXJhbXM/OiBIdHRwUGFyYW1zKTogT2JzZXJ2YWJsZTxBcHBseUVkaXRzUmVzdWx0PiB7XG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgb3IgaW52YWxpZCBhcHBseSBlZGl0cyBzZWVkIGRhdGEgcHJvdmlkZWQnKTtcbiAgICB9IGVsc2UgaWYgKCFkYXRhLmRhdGFTb3VyY2VJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nICdkYXRhU291cmNlSWQnIGZyb20gdGhlIGFwcGx5IGVkaXRzIHNlZWQgZGF0YWApO1xuICAgIH1cblxuICAgIGNvbnN0IHVybCA9IHRoaXMuZ2V0VXJsV2l0aElkKGRhdGEuZGF0YVNvdXJjZUlkLCB0aGlzLmRzQ29uZmlnLmFwcGx5RWRpdHNFbmRwb2ludCwge30pO1xuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdDxBcHBseUVkaXRzUmVzdWx0Pih1cmwsIGRhdGEsIHsgcGFyYW1zIH0pO1xuICB9XG5cbiAgY3JlYXRlUmVjb3JkKFxuICAgIGRhdGFTb3VyY2VJZDogc3RyaW5nLFxuICAgIHRhYmxlOiBzdHJpbmcsXG4gICAgZmVhdHVyZTogRmVhdHVyZSxcbiAgICB2ZXJzaW9uPzogc3RyaW5nLFxuICAgIHBhcmFtcz86IEh0dHBQYXJhbXNcbiAgKTogT2JzZXJ2YWJsZTxBcHBseUVkaXRzUmVzdWx0PiB7XG4gICAgY29uc3QgdXJsID0gdGhpcy5nZXRVcmxXaXRoSWQoZGF0YVNvdXJjZUlkLCB0aGlzLmRzQ29uZmlnLmVkaXREYXRhRW5kcG9pbnQsIHsgdGFibGUgfSk7XG4gICAgcGFyYW1zID0gKHBhcmFtcyB8fCBuZXcgSHR0cFBhcmFtcygpKVxuICAgICAgLnNldCgndmVyc2lvbicsIHZlcnNpb24gfHwgRU1QVFlfUEFSQU1fVkFMVUUpO1xuXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0PEFwcGx5RWRpdHNSZXN1bHQ+KHVybCwgZmVhdHVyZSwgeyBwYXJhbXMgfSk7XG4gIH1cbn1cbiJdfQ==